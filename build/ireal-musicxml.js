var bi=Object.create;var zr=Object.defineProperty;var yi=Object.getOwnPropertyDescriptor;var xi=Object.getOwnPropertyNames;var Si=Object.getPrototypeOf,Ai=Object.prototype.hasOwnProperty;var vt=(s,p)=>()=>(p||s((p={exports:{}}).exports,p),p.exports);var Oi=(s,p,u,g)=>{if(p&&typeof p=="object"||typeof p=="function")for(let e of xi(p))!Ai.call(s,e)&&e!==u&&zr(s,e,{get:()=>p[e],enumerable:!(g=yi(p,e))||g.enumerable});return s};var Ie=(s,p,u)=>(u=s!=null?bi(Si(s)):{},Oi(p||!s||!s.__esModule?zr(u,"default",{value:s,enumerable:!0}):u,s));var ar=vt((is,Hr)=>{"use strict";Hr.exports=nr;function nr(s){_t.length||(De(),Br=!0),_t[_t.length]=s}var _t=[],Br=!1,De,Rt=0,Ti=1024;function Lr(){for(;Rt<_t.length;){var s=Rt;if(Rt=Rt+1,_t[s].call(),Rt>Ti){for(var p=0,u=_t.length-Rt;p<u;p++)_t[p]=_t[p+Rt];_t.length-=Rt,Rt=0}}_t.length=0,Rt=0,Br=!1}var Gr=typeof global<"u"?global:self,$r=Gr.MutationObserver||Gr.WebKitMutationObserver;typeof $r=="function"?De=wi(Lr):De=Ur(Lr);nr.requestFlush=De;function wi(s){var p=1,u=new $r(s),g=document.createTextNode("");return u.observe(g,{characterData:!0}),function(){p=-p,g.data=p}}function Ur(s){return function(){var u=setTimeout(e,0),g=setInterval(e,50);function e(){clearTimeout(u),clearInterval(g),s()}}}nr.makeRequestCallFromTimer=Ur});var kt=vt((ss,Xr)=>{"use strict";var ji=ar();function Ne(){}var ce=null,fe={};function Ci(s){try{return s.then}catch(p){return ce=p,fe}}function Ei(s,p){try{return s(p)}catch(u){return ce=u,fe}}function Fi(s,p,u){try{s(p,u)}catch(g){return ce=g,fe}}Xr.exports=bt;function bt(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof s!="function")throw new TypeError("Promise constructor's argument is not a function");this._x=0,this._y=0,this._z=null,this._A=null,s!==Ne&&Wr(s,this)}bt._B=null;bt._C=null;bt._D=Ne;bt.prototype.then=function(s,p){if(this.constructor!==bt)return Ii(this,s,p);var u=new bt(Ne);return Pe(this,new Kr(s,p,u)),u};function Ii(s,p,u){return new s.constructor(function(g,e){var i=new bt(Ne);i.then(g,e),Pe(s,new Kr(p,u,i))})}function Pe(s,p){for(;s._y===3;)s=s._z;if(bt._B&&bt._B(s),s._y===0){if(s._x===0){s._x=1,s._A=p;return}if(s._x===1){s._x=2,s._A=[s._A,p];return}s._A.push(p);return}Di(s,p)}function Di(s,p){ji(function(){var u=s._y===1?p.onFulfilled:p.onRejected;if(u===null){s._y===1?ir(p.promise,s._z):le(p.promise,s._z);return}var g=Ei(u,s._z);g===fe?le(p.promise,ce):ir(p.promise,g)})}function ir(s,p){if(p===s)return le(s,new TypeError("A promise cannot be resolved with itself."));if(p&&(typeof p=="object"||typeof p=="function")){var u=Ci(p);if(u===fe)return le(s,ce);if(u===s.then&&p instanceof bt){s._y=3,s._z=p,sr(s);return}else if(typeof u=="function"){Wr(u.bind(p),s);return}}s._y=1,s._z=p,sr(s)}function le(s,p){s._y=2,s._z=p,bt._C&&bt._C(s,p),sr(s)}function sr(s){if(s._x===1&&(Pe(s,s._A),s._A=null),s._x===2){for(var p=0;p<s._A.length;p++)Pe(s,s._A[p]);s._A=null}}function Kr(s,p,u){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof p=="function"?p:null,this.promise=u}function Wr(s,p){var u=!1,g=Fi(s,function(e){u||(u=!0,ir(p,e))},function(e){u||(u=!0,le(p,e))});!u&&g===fe&&(u=!0,le(p,ce))}});var Zr=vt((os,Yr)=>{"use strict";var Vr=kt();Yr.exports=Vr;Vr.prototype.done=function(s,p){var u=arguments.length?this.then.apply(this,arguments):this;u.then(null,function(g){setTimeout(function(){throw g},0)})}});var Jr=vt((us,Qr)=>{"use strict";var Re=kt();Qr.exports=Re;Re.prototype.finally=function(s){return this.then(function(p){return Re.resolve(s()).then(function(){return p})},function(p){return Re.resolve(s()).then(function(){throw p})})}});var en=vt((ls,tn)=>{"use strict";var k=kt();tn.exports=k;var Pi=qt(!0),Ni=qt(!1),Ri=qt(null),_i=qt(void 0),Mi=qt(0),zi=qt("");function qt(s){var p=new k(k._D);return p._y=1,p._z=s,p}k.resolve=function(s){if(s instanceof k)return s;if(s===null)return Ri;if(s===void 0)return _i;if(s===!0)return Pi;if(s===!1)return Ni;if(s===0)return Mi;if(s==="")return zi;if(typeof s=="object"||typeof s=="function")try{var p=s.then;if(typeof p=="function")return new k(p.bind(s))}catch(u){return new k(function(g,e){e(u)})}return qt(s)};var pe=function(s){return typeof Array.from=="function"?(pe=Array.from,Array.from(s)):(pe=function(p){return Array.prototype.slice.call(p)},Array.prototype.slice.call(s))};k.all=function(s){var p=pe(s);return new k(function(u,g){if(p.length===0)return u([]);var e=p.length;function i(a,n){if(n&&(typeof n=="object"||typeof n=="function"))if(n instanceof k&&n.then===k.prototype.then){for(;n._y===3;)n=n._z;if(n._y===1)return i(a,n._z);n._y===2&&g(n._z),n.then(function(h){i(a,h)},g);return}else{var o=n.then;if(typeof o=="function"){var c=new k(o.bind(n));c.then(function(h){i(a,h)},g);return}}p[a]=n,--e===0&&u(p)}for(var t=0;t<p.length;t++)i(t,p[t])})};function or(s){return{status:"fulfilled",value:s}}function kr(s){return{status:"rejected",reason:s}}function Li(s){if(s&&(typeof s=="object"||typeof s=="function")){if(s instanceof k&&s.then===k.prototype.then)return s.then(or,kr);var p=s.then;if(typeof p=="function")return new k(p.bind(s)).then(or,kr)}return or(s)}k.allSettled=function(s){return k.all(pe(s).map(Li))};k.reject=function(s){return new k(function(p,u){u(s)})};k.race=function(s){return new k(function(p,u){pe(s).forEach(function(g){k.resolve(g).then(p,u)})})};k.prototype.catch=function(s){return this.then(null,s)};function qr(s){if(typeof AggregateError=="function")return new AggregateError(s,"All promises were rejected");var p=new Error("All promises were rejected");return p.name="AggregateError",p.errors=s,p}k.any=function(p){return new k(function(u,g){var e=pe(p),i=!1,t=[];function a(o){i||(i=!0,u(o))}function n(o){t.push(o),t.length===e.length&&g(qr(t))}e.length===0?g(qr(t)):e.forEach(function(o){k.resolve(o).then(a,n)})})}});var sn=vt((cs,an)=>{"use strict";var rn=ar(),_e=[],ur=[],Gi=rn.makeRequestCallFromTimer(Bi);function Bi(){if(ur.length)throw ur.shift()}an.exports=lr;function lr(s){var p;_e.length?p=_e.pop():p=new nn,p.task=s,rn(p)}function nn(){this.task=null}nn.prototype.call=function(){try{this.task.call()}catch(s){lr.onerror?lr.onerror(s):(ur.push(s),Gi())}finally{this.task=null,_e[_e.length]=this}}});var ln=vt((fs,un)=>{"use strict";var te=kt(),cr=sn();un.exports=te;te.denodeify=function(s,p){return typeof p=="number"&&p!==1/0?$i(s,p):Ui(s)};var on="function (err, res) {if (err) { rj(err); } else { rs(res); }}";function $i(s,p){for(var u=[],g=0;g<p;g++)u.push("a"+g);var e=["return function ("+u.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(u).concat([on]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],e)(te,s)}function Ui(s){for(var p=Math.max(s.length-1,3),u=[],g=0;g<p;g++)u.push("a"+g);var e=["return function ("+u.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+p+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+on+";","var res;","switch (argLength) {",u.concat(["extra"]).map(function(i,t){return"case "+t+":res = fn.call("+["self"].concat(u.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],e)(te,s)}te.nodeify=function(s){return function(){var p=Array.prototype.slice.call(arguments),u=typeof p[p.length-1]=="function"?p.pop():null,g=this;try{return s.apply(this,arguments).nodeify(u,g)}catch(e){if(u===null||typeof u>"u")return new te(function(i,t){t(e)});cr(function(){u.call(g,e)})}}};te.prototype.nodeify=function(s,p){if(typeof s!="function")return this;this.then(function(u){cr(function(){s.call(p,null,u)})},function(u){cr(function(){s.call(p,u)})})}});var fn=vt((ps,cn)=>{"use strict";var pt=kt();cn.exports=pt;pt.enableSynchronous=function(){pt.prototype.isPending=function(){return this.getState()==0},pt.prototype.isFulfilled=function(){return this.getState()==1},pt.prototype.isRejected=function(){return this.getState()==2},pt.prototype.getValue=function(){if(this._y===3)return this._z.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._z},pt.prototype.getReason=function(){if(this._y===3)return this._z.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._z},pt.prototype.getState=function(){return this._y===3?this._z.getState():this._y===-1||this._y===-2?0:this._y}};pt.disableSynchronous=function(){pt.prototype.isPending=void 0,pt.prototype.isFulfilled=void 0,pt.prototype.isRejected=void 0,pt.prototype.getValue=void 0,pt.prototype.getReason=void 0,pt.prototype.getState=void 0}});var hn=vt((hs,pn)=>{"use strict";pn.exports=kt();Zr();Jr();en();ln();fn()});var mn=vt((ds,dn)=>{"use strict";dn.exports=hn()});var jn=vt((ms,wn)=>{var yt=-1,ht=1,it=0;function Se(s,p,u,g,e){if(s===p)return s?[[it,s]]:[];if(u!=null){var i=Ji(s,p,u);if(i)return i}var t=pr(s,p),a=s.substring(0,t);s=s.substring(t),p=p.substring(t),t=Me(s,p);var n=s.substring(s.length-t);s=s.substring(0,s.length-t),p=p.substring(0,p.length-t);var o=Hi(s,p);return a&&o.unshift([it,a]),n&&o.push([it,n]),hr(o,e),g&&Xi(o),o}function Hi(s,p){var u;if(!s)return[[ht,p]];if(!p)return[[yt,s]];var g=s.length>p.length?s:p,e=s.length>p.length?p:s,i=g.indexOf(e);if(i!==-1)return u=[[ht,g.substring(0,i)],[it,e],[ht,g.substring(i+e.length)]],s.length>p.length&&(u[0][0]=u[2][0]=yt),u;if(e.length===1)return[[yt,s],[ht,p]];var t=Wi(s,p);if(t){var a=t[0],n=t[1],o=t[2],c=t[3],h=t[4],l=Se(a,o),m=Se(n,c);return l.concat([[it,h]],m)}return Ki(s,p)}function Ki(s,p){for(var u=s.length,g=p.length,e=Math.ceil((u+g)/2),i=e,t=2*e,a=new Array(t),n=new Array(t),o=0;o<t;o++)a[o]=-1,n[o]=-1;a[i+1]=0,n[i+1]=0;for(var c=u-g,h=c%2!==0,l=0,m=0,v=0,x=0,y=0;y<e;y++){for(var S=-y+l;S<=y-m;S+=2){var A=i+S,j;S===-y||S!==y&&a[A-1]<a[A+1]?j=a[A+1]:j=a[A-1]+1;for(var E=j-S;j<u&&E<g&&s.charAt(j)===p.charAt(E);)j++,E++;if(a[A]=j,j>u)m+=2;else if(E>g)l+=2;else if(h){var _=i+c-S;if(_>=0&&_<t&&n[_]!==-1){var F=u-n[_];if(j>=F)return gn(s,p,j,E)}}}for(var I=-y+v;I<=y-x;I+=2){var _=i+I,F;I===-y||I!==y&&n[_-1]<n[_+1]?F=n[_+1]:F=n[_-1]+1;for(var z=F-I;F<u&&z<g&&s.charAt(u-F-1)===p.charAt(g-z-1);)F++,z++;if(n[_]=F,F>u)x+=2;else if(z>g)v+=2;else if(!h){var A=i+c-I;if(A>=0&&A<t&&a[A]!==-1){var j=a[A],E=i+j-A;if(F=u-F,j>=F)return gn(s,p,j,E)}}}}return[[yt,s],[ht,p]]}function gn(s,p,u,g){var e=s.substring(0,u),i=p.substring(0,g),t=s.substring(u),a=p.substring(g),n=Se(e,i),o=Se(t,a);return n.concat(o)}function pr(s,p){if(!s||!p||s.charAt(0)!==p.charAt(0))return 0;for(var u=0,g=Math.min(s.length,p.length),e=g,i=0;u<e;)s.substring(i,e)==p.substring(i,e)?(u=e,i=u):g=e,e=Math.floor((g-u)/2+u);return Sn(s.charCodeAt(e-1))&&e--,e}function vn(s,p){var u=s.length,g=p.length;if(u==0||g==0)return 0;u>g?s=s.substring(u-g):u<g&&(p=p.substring(0,u));var e=Math.min(u,g);if(s==p)return e;for(var i=0,t=1;;){var a=s.substring(e-t),n=p.indexOf(a);if(n==-1)return i;t+=n,(n==0||s.substring(e-t)==p.substring(0,t))&&(i=t,t++)}}function Me(s,p){if(!s||!p||s.slice(-1)!==p.slice(-1))return 0;for(var u=0,g=Math.min(s.length,p.length),e=g,i=0;u<e;)s.substring(s.length-e,s.length-i)==p.substring(p.length-e,p.length-i)?(u=e,i=u):g=e,e=Math.floor((g-u)/2+u);return An(s.charCodeAt(s.length-e))&&e--,e}function Wi(s,p){var u=s.length>p.length?s:p,g=s.length>p.length?p:s;if(u.length<4||g.length*2<u.length)return null;function e(m,v,x){for(var y=m.substring(x,x+Math.floor(m.length/4)),S=-1,A="",j,E,_,F;(S=v.indexOf(y,S+1))!==-1;){var I=pr(m.substring(x),v.substring(S)),z=Me(m.substring(0,x),v.substring(0,S));A.length<z+I&&(A=v.substring(S-z,S)+v.substring(S,S+I),j=m.substring(0,x-z),E=m.substring(x+I),_=v.substring(0,S-z),F=v.substring(S+I))}return A.length*2>=m.length?[j,E,_,F,A]:null}var i=e(u,g,Math.ceil(u.length/4)),t=e(u,g,Math.ceil(u.length/2)),a;if(!i&&!t)return null;t?i?a=i[4].length>t[4].length?i:t:a=t:a=i;var n,o,c,h;s.length>p.length?(n=a[0],o=a[1],c=a[2],h=a[3]):(c=a[0],h=a[1],n=a[2],o=a[3]);var l=a[4];return[n,o,c,h,l]}function Xi(s){for(var p=!1,u=[],g=0,e=null,i=0,t=0,a=0,n=0,o=0;i<s.length;)s[i][0]==it?(u[g++]=i,t=n,a=o,n=0,o=0,e=s[i][1]):(s[i][0]==ht?n+=s[i][1].length:o+=s[i][1].length,e&&e.length<=Math.max(t,a)&&e.length<=Math.max(n,o)&&(s.splice(u[g-1],0,[yt,e]),s[u[g-1]+1][0]=ht,g--,g--,i=g>0?u[g-1]:-1,t=0,a=0,n=0,o=0,e=null,p=!0)),i++;for(p&&hr(s),Zi(s),i=1;i<s.length;){if(s[i-1][0]==yt&&s[i][0]==ht){var c=s[i-1][1],h=s[i][1],l=vn(c,h),m=vn(h,c);l>=m?(l>=c.length/2||l>=h.length/2)&&(s.splice(i,0,[it,h.substring(0,l)]),s[i-1][1]=c.substring(0,c.length-l),s[i+1][1]=h.substring(l),i++):(m>=c.length/2||m>=h.length/2)&&(s.splice(i,0,[it,c.substring(0,m)]),s[i-1][0]=ht,s[i-1][1]=h.substring(0,h.length-m),s[i+1][0]=yt,s[i+1][1]=c.substring(m),i++),i++}i++}}var bn=/[^a-zA-Z0-9]/,yn=/\s/,xn=/[\r\n]/,Vi=/\n\r?\n$/,Yi=/^\r?\n\r?\n/;function Zi(s){function p(m,v){if(!m||!v)return 6;var x=m.charAt(m.length-1),y=v.charAt(0),S=x.match(bn),A=y.match(bn),j=S&&x.match(yn),E=A&&y.match(yn),_=j&&x.match(xn),F=E&&y.match(xn),I=_&&m.match(Vi),z=F&&v.match(Yi);return I||z?5:_||F?4:S&&!j&&E?3:j||E?2:S||A?1:0}for(var u=1;u<s.length-1;){if(s[u-1][0]==it&&s[u+1][0]==it){var g=s[u-1][1],e=s[u][1],i=s[u+1][1],t=Me(g,e);if(t){var a=e.substring(e.length-t);g=g.substring(0,g.length-t),e=a+e.substring(0,e.length-t),i=a+i}for(var n=g,o=e,c=i,h=p(g,e)+p(e,i);e.charAt(0)===i.charAt(0);){g+=e.charAt(0),e=e.substring(1)+i.charAt(0),i=i.substring(1);var l=p(g,e)+p(e,i);l>=h&&(h=l,n=g,o=e,c=i)}s[u-1][1]!=n&&(n?s[u-1][1]=n:(s.splice(u-1,1),u--),s[u][1]=o,c?s[u+1][1]=c:(s.splice(u+1,1),u--))}u++}}function hr(s,p){s.push([it,""]);for(var u=0,g=0,e=0,i="",t="",a;u<s.length;){if(u<s.length-1&&!s[u][1]){s.splice(u,1);continue}switch(s[u][0]){case ht:e++,t+=s[u][1],u++;break;case yt:g++,i+=s[u][1],u++;break;case it:var n=u-e-g-1;if(p){if(n>=0&&Tn(s[n][1])){var o=s[n][1].slice(-1);if(s[n][1]=s[n][1].slice(0,-1),i=o+i,t=o+t,!s[n][1]){s.splice(n,1),u--;var c=n-1;s[c]&&s[c][0]===ht&&(e++,t=s[c][1]+t,c--),s[c]&&s[c][0]===yt&&(g++,i=s[c][1]+i,c--),n=c}}if(On(s[u][1])){var o=s[u][1].charAt(0);s[u][1]=s[u][1].slice(1),i+=o,t+=o}}if(u<s.length-1&&!s[u][1]){s.splice(u,1);break}if(i.length>0||t.length>0){i.length>0&&t.length>0&&(a=pr(t,i),a!==0&&(n>=0?s[n][1]+=t.substring(0,a):(s.splice(0,0,[it,t.substring(0,a)]),u++),t=t.substring(a),i=i.substring(a)),a=Me(t,i),a!==0&&(s[u][1]=t.substring(t.length-a)+s[u][1],t=t.substring(0,t.length-a),i=i.substring(0,i.length-a)));var h=e+g;i.length===0&&t.length===0?(s.splice(u-h,h),u=u-h):i.length===0?(s.splice(u-h,h,[ht,t]),u=u-h+1):t.length===0?(s.splice(u-h,h,[yt,i]),u=u-h+1):(s.splice(u-h,h,[yt,i],[ht,t]),u=u-h+2)}u!==0&&s[u-1][0]===it?(s[u-1][1]+=s[u][1],s.splice(u,1)):u++,e=0,g=0,i="",t="";break}}s[s.length-1][1]===""&&s.pop();var l=!1;for(u=1;u<s.length-1;)s[u-1][0]===it&&s[u+1][0]===it&&(s[u][1].substring(s[u][1].length-s[u-1][1].length)===s[u-1][1]?(s[u][1]=s[u-1][1]+s[u][1].substring(0,s[u][1].length-s[u-1][1].length),s[u+1][1]=s[u-1][1]+s[u+1][1],s.splice(u-1,1),l=!0):s[u][1].substring(0,s[u+1][1].length)==s[u+1][1]&&(s[u-1][1]+=s[u+1][1],s[u][1]=s[u][1].substring(s[u+1][1].length)+s[u+1][1],s.splice(u+1,1),l=!0)),u++;l&&hr(s,p)}function Sn(s){return s>=55296&&s<=56319}function An(s){return s>=56320&&s<=57343}function On(s){return An(s.charCodeAt(0))}function Tn(s){return Sn(s.charCodeAt(s.length-1))}function Qi(s){for(var p=[],u=0;u<s.length;u++)s[u][1].length>0&&p.push(s[u]);return p}function fr(s,p,u,g){return Tn(s)||On(g)?null:Qi([[it,s],[yt,p],[ht,u],[it,g]])}function Ji(s,p,u){var g=typeof u=="number"?{index:u,length:0}:u.oldRange,e=typeof u=="number"?null:u.newRange,i=s.length,t=p.length;if(g.length===0&&(e===null||e.length===0)){var a=g.index,n=s.slice(0,a),o=s.slice(a),c=e?e.index:null;t:{var h=a+t-i;if(c!==null&&c!==h||h<0||h>t)break t;var l=p.slice(0,h),m=p.slice(h);if(m!==o)break t;var v=Math.min(a,h),x=n.slice(0,v),y=l.slice(0,v);if(x!==y)break t;var S=n.slice(v),A=l.slice(v);return fr(x,S,A,o)}t:{if(c!==null&&c!==a)break t;var j=a,l=p.slice(0,j),m=p.slice(j);if(l!==n)break t;var E=Math.min(i-j,t-j),_=o.slice(o.length-E),F=m.slice(m.length-E);if(_!==F)break t;var S=o.slice(0,o.length-E),A=m.slice(0,m.length-E);return fr(n,S,A,_)}}if(g.length>0&&e&&e.length===0)t:{var x=s.slice(0,g.index),_=s.slice(g.index+g.length),v=x.length,E=_.length;if(t<v+E)break t;var y=p.slice(0,v),F=p.slice(t-E);if(x!==y||_!==F)break t;var S=s.slice(v,i-E),A=p.slice(v,t-E);return fr(x,S,A,_)}return null}function ze(s,p,u,g){return Se(s,p,u,g,!0)}ze.INSERT=ht;ze.DELETE=yt;ze.EQUAL=it;wn.exports=ze});var En=vt(Be=>{(function(s,p){if(typeof define=="function"&&define.amd)define(["exports"],p);else if(typeof Be<"u")p(Be);else{var u={exports:{}};p(u.exports),s.jstoxml=u.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Be,function(s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.toXML=s.default=void 0;function p(P){return i(P)||e(P)||g(P)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(P,O){if(P){if(typeof P=="string")return t(P,O);var D=Object.prototype.toString.call(P).slice(8,-1);if(D==="Object"&&P.constructor&&(D=P.constructor.name),D==="Map"||D==="Set")return Array.from(P);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return t(P,O)}}function e(P){if(typeof Symbol<"u"&&P[Symbol.iterator]!=null||P["@@iterator"]!=null)return Array.from(P)}function i(P){if(Array.isArray(P))return t(P)}function t(P,O){(O==null||O>P.length)&&(O=P.length);for(var D=0,Y=new Array(O);D<O;D++)Y[D]=P[D];return Y}function a(P,O){var D=Object.keys(P);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(P);O&&(Y=Y.filter(function(at){return Object.getOwnPropertyDescriptor(P,at).enumerable})),D.push.apply(D,Y)}return D}function n(P){for(var O=1;O<arguments.length;O++){var D=arguments[O]!=null?arguments[O]:{};O%2?a(Object(D),!0).forEach(function(Y){o(P,Y,D[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(D)):a(Object(D)).forEach(function(Y){Object.defineProperty(P,Y,Object.getOwnPropertyDescriptor(D,Y))})}return P}function o(P,O,D){return O in P?Object.defineProperty(P,O,{value:D,enumerable:!0,configurable:!0,writable:!0}):P[O]=D,P}function c(P){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},c(P)}var h="array",l="boolean",m="date",v="null",x="number",y="object",S="special-object",A="string",j=["_selfCloseTag","_attrs"],E=new RegExp(j.join("|"),"g"),_=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return O.repeat(D)},F=function(O){return Array.isArray(O)&&h||c(O)===y&&O!==null&&O._name&&S||O instanceof Date&&m||O===null&&v||c(O)},I=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof O!="string")return O;var Y=new RegExp("(".concat(Object.keys(D).join("|"),")(?!(\\w|#)*;)"),"g");return String(O).replace(Y,function(at,et){return D[et]||""})},z=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1?arguments[1]:void 0,Y=[];if(Array.isArray(O))Y=O.map(function(et){var mt=Object.keys(et)[0],Tt=et[mt],Mt=D?I(Tt,D):Tt,Ut=Mt===!0?"":'="'.concat(Mt,'"');return"".concat(mt).concat(Ut)});else{var at=Object.keys(O);Y=at.map(function(et){var mt=D?I(O[et],D):O[et],Tt=O[et]===!0?"":'="'.concat(mt,'"');return"".concat(et).concat(Tt)})}return Y},M=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1?arguments[1]:void 0,Y=z(O,D);if(Y.length===0)return"";var at=Y.join(" ");return" ".concat(at)},H=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(O).map(function(D){return{_name:D,_content:O[D]}})},L=[A,x,l],X=function(O){return L.includes(F(O))},$=[].concat(L,[m,S]),U=function(O){return $.includes(F(O))},Q=function(O){return!O.match("<")},V='<?xml version="1.0" encoding="UTF-8"?>',st=function(O){var D=O.header,Y=O.indent,at=O.isOutputStart,et=D&&at;if(!et)return"";var mt=c(D)===l;return mt?V:D},G={"<":"&lt;",">":"&gt;","&":"&amp;"},q=function P(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=D.depth,at=Y===void 0?0:Y,et=D.indent,mt=D._isFirstItem,Tt=D._isOutputStart,Mt=Tt===void 0?!0:Tt,Ut=D.header,Ht=D.attributesFilter,Kt=Ht===void 0?{}:Ht,re=D.filter,wt=re===void 0?{}:re,W=typeof Kt=="boolean"&&!Kt,Wt=W?{}:n(n(n({},G),{'"':"&quot;"}),Kt),xt=typeof wt=="boolean"&&!wt,Xt=xt?{}:n(n({},G),wt),ne=_(et,at),he=F(O),Vt=st({header:Ut,indent:et,depth:at,isOutputStart:Mt}),T=Mt&&!Vt&&mt&&at===0,ft="";switch(he){case"special-object":{var K=O._name,Z=O._content;if(Z===null){ft=K;break}var St=Array.isArray(Z)&&Z.every(X);if(St){var de=Z.map(function(ct){return P({_name:K,_content:ct},n(n({},D),{},{depth:at,_isOutputStart:!1}))});return de.join("")}if(K.match(E))break;var jt=P(Z,n(n({},D),{},{depth:at+1,_isOutputStart:T})),At=F(jt),ut=Q(jt),It=et&&!T?`
`:"",rt="".concat(It).concat(ne);if(K==="_comment"){ft+="".concat(rt,"<!-- ").concat(Z," -->");break}var ae=At==="undefined"||jt==="",Dt=c(O._selfCloseTag)===l?ae&&O._selfCloseTag:ae,Ct=Dt?"/":"",ie=M(O._attrs,Wt),zt="<".concat(K).concat(ie).concat(Ct,">"),me=et&&!ut?`
`.concat(ne):"",se=Dt?"":"".concat(jt).concat(me,"</").concat(K,">");ft+="".concat(rt).concat(zt).concat(se);break}case"object":{var gt=Object.keys(O),Et=gt.map(function(ct,Yt){var ge=n(n({},D),{},{_isFirstItem:Yt===0,_isLastItem:Yt+1===gt.length,_isOutputStart:T}),Zt={_name:ct};if(F(O[ct])==="object"){j.forEach(function(ve){var je=O[ct][ve];typeof je<"u"&&(Zt[ve]=je,delete O[ct][ve])});var nt=typeof O[ct]._content<"u";if(nt&&Object.keys(O[ct]).length>1){var Qt=Object.assign({},O[ct]);delete Qt._content,Zt._content=[].concat(p(H(Qt)),[O[ct]._content])}}typeof Zt._content>"u"&&(Zt._content=O[ct]);var Ke=P(Zt,ge,ct);return Ke},D);ft=Et.join("");break}case"function":{var Ue=O(D);ft=P(Ue,D);break}case"array":{var He=O.map(function(ct,Yt){var ge=n(n({},D),{},{_isFirstItem:Yt===0,_isLastItem:Yt+1===O.length,_isOutputStart:T});return P(ct,ge)});ft=He.join("");break}default:{ft=I(O,Xt);break}}return"".concat(Vt).concat(ft)};s.toXML=q;var ot={toXML:q};s.default=ot})});var Fn=vt((Oe,dr)=>{(function(p,u){typeof Oe=="object"&&typeof dr=="object"?dr.exports=u():typeof define=="function"&&define.amd?define([],u):typeof Oe=="object"?Oe["chord-symbol"]=u():p["chord-symbol"]=u()})(typeof self<"u"?self:Oe,function(){return(()=>{var s={8552:(e,i,t)=>{var a=t(852),n=t(5639),o=a(n,"DataView");e.exports=o},1989:(e,i,t)=>{var a=t(1789),n=t(401),o=t(7667),c=t(1327),h=t(1866);function l(m){var v=-1,x=m==null?0:m.length;for(this.clear();++v<x;){var y=m[v];this.set(y[0],y[1])}}l.prototype.clear=a,l.prototype.delete=n,l.prototype.get=o,l.prototype.has=c,l.prototype.set=h,e.exports=l},8407:(e,i,t)=>{var a=t(7040),n=t(4125),o=t(2117),c=t(7518),h=t(4705);function l(m){var v=-1,x=m==null?0:m.length;for(this.clear();++v<x;){var y=m[v];this.set(y[0],y[1])}}l.prototype.clear=a,l.prototype.delete=n,l.prototype.get=o,l.prototype.has=c,l.prototype.set=h,e.exports=l},7071:(e,i,t)=>{var a=t(852),n=t(5639),o=a(n,"Map");e.exports=o},3369:(e,i,t)=>{var a=t(4785),n=t(1285),o=t(6e3),c=t(9916),h=t(5265);function l(m){var v=-1,x=m==null?0:m.length;for(this.clear();++v<x;){var y=m[v];this.set(y[0],y[1])}}l.prototype.clear=a,l.prototype.delete=n,l.prototype.get=o,l.prototype.has=c,l.prototype.set=h,e.exports=l},3818:(e,i,t)=>{var a=t(852),n=t(5639),o=a(n,"Promise");e.exports=o},8525:(e,i,t)=>{var a=t(852),n=t(5639),o=a(n,"Set");e.exports=o},8668:(e,i,t)=>{var a=t(3369),n=t(619),o=t(2385);function c(h){var l=-1,m=h==null?0:h.length;for(this.__data__=new a;++l<m;)this.add(h[l])}c.prototype.add=c.prototype.push=n,c.prototype.has=o,e.exports=c},6384:(e,i,t)=>{var a=t(8407),n=t(7465),o=t(3779),c=t(7599),h=t(4758),l=t(4309);function m(v){var x=this.__data__=new a(v);this.size=x.size}m.prototype.clear=n,m.prototype.delete=o,m.prototype.get=c,m.prototype.has=h,m.prototype.set=l,e.exports=m},2705:(e,i,t)=>{var a=t(5639),n=a.Symbol;e.exports=n},1149:(e,i,t)=>{var a=t(5639),n=a.Uint8Array;e.exports=n},577:(e,i,t)=>{var a=t(852),n=t(5639),o=a(n,"WeakMap");e.exports=o},6874:e=>{function i(t,a,n){switch(n.length){case 0:return t.call(a);case 1:return t.call(a,n[0]);case 2:return t.call(a,n[0],n[1]);case 3:return t.call(a,n[0],n[1],n[2])}return t.apply(a,n)}e.exports=i},7412:e=>{function i(t,a){for(var n=-1,o=t==null?0:t.length;++n<o&&a(t[n],n,t)!==!1;);return t}e.exports=i},4963:e=>{function i(t,a){for(var n=-1,o=t==null?0:t.length,c=0,h=[];++n<o;){var l=t[n];a(l,n,t)&&(h[c++]=l)}return h}e.exports=i},7443:(e,i,t)=>{var a=t(2118);function n(o,c){var h=o==null?0:o.length;return!!h&&a(o,c,0)>-1}e.exports=n},1196:e=>{function i(t,a,n){for(var o=-1,c=t==null?0:t.length;++o<c;)if(n(a,t[o]))return!0;return!1}e.exports=i},4636:(e,i,t)=>{var a=t(2545),n=t(5694),o=t(1469),c=t(4144),h=t(5776),l=t(6719),m=Object.prototype,v=m.hasOwnProperty;function x(y,S){var A=o(y),j=!A&&n(y),E=!A&&!j&&c(y),_=!A&&!j&&!E&&l(y),F=A||j||E||_,I=F?a(y.length,String):[],z=I.length;for(var M in y)(S||v.call(y,M))&&!(F&&(M=="length"||E&&(M=="offset"||M=="parent")||_&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||h(M,z)))&&I.push(M);return I}e.exports=x},9932:e=>{function i(t,a){for(var n=-1,o=t==null?0:t.length,c=Array(o);++n<o;)c[n]=a(t[n],n,t);return c}e.exports=i},2488:e=>{function i(t,a){for(var n=-1,o=a.length,c=t.length;++n<o;)t[c+n]=a[n];return t}e.exports=i},2908:e=>{function i(t,a){for(var n=-1,o=t==null?0:t.length;++n<o;)if(a(t[n],n,t))return!0;return!1}e.exports=i},4865:(e,i,t)=>{var a=t(9465),n=t(7813),o=Object.prototype,c=o.hasOwnProperty;function h(l,m,v){var x=l[m];(!(c.call(l,m)&&n(x,v))||v===void 0&&!(m in l))&&a(l,m,v)}e.exports=h},8470:(e,i,t)=>{var a=t(7813);function n(o,c){for(var h=o.length;h--;)if(a(o[h][0],c))return h;return-1}e.exports=n},4037:(e,i,t)=>{var a=t(8363),n=t(3674);function o(c,h){return c&&a(h,n(h),c)}e.exports=o},3886:(e,i,t)=>{var a=t(8363),n=t(1704);function o(c,h){return c&&a(h,n(h),c)}e.exports=o},9465:(e,i,t)=>{var a=t(8777);function n(o,c,h){c=="__proto__"&&a?a(o,c,{configurable:!0,enumerable:!0,value:h,writable:!0}):o[c]=h}e.exports=n},5990:(e,i,t)=>{var a=t(6384),n=t(7412),o=t(4865),c=t(4037),h=t(3886),l=t(4626),m=t(278),v=t(8805),x=t(1911),y=t(8234),S=t(6904),A=t(4160),j=t(3824),E=t(9148),_=t(8517),F=t(1469),I=t(4144),z=t(6688),M=t(3218),H=t(2928),L=t(3674),X=t(1704),$=1,U=2,Q=4,V="[object Arguments]",st="[object Array]",G="[object Boolean]",q="[object Date]",ot="[object Error]",P="[object Function]",O="[object GeneratorFunction]",D="[object Map]",Y="[object Number]",at="[object Object]",et="[object RegExp]",mt="[object Set]",Tt="[object String]",Mt="[object Symbol]",Ut="[object WeakMap]",Ht="[object ArrayBuffer]",Kt="[object DataView]",re="[object Float32Array]",wt="[object Float64Array]",W="[object Int8Array]",Wt="[object Int16Array]",xt="[object Int32Array]",Xt="[object Uint8Array]",ne="[object Uint8ClampedArray]",he="[object Uint16Array]",Vt="[object Uint32Array]",T={};T[V]=T[st]=T[Ht]=T[Kt]=T[G]=T[q]=T[re]=T[wt]=T[W]=T[Wt]=T[xt]=T[D]=T[Y]=T[at]=T[et]=T[mt]=T[Tt]=T[Mt]=T[Xt]=T[ne]=T[he]=T[Vt]=!0,T[ot]=T[P]=T[Ut]=!1;function ft(K,Z,St,de,jt,At){var ut,It=Z&$,rt=Z&U,ae=Z&Q;if(St&&(ut=jt?St(K,de,jt,At):St(K)),ut!==void 0)return ut;if(!M(K))return K;var Dt=F(K);if(Dt){if(ut=j(K),!It)return m(K,ut)}else{var Ct=A(K),ie=Ct==P||Ct==O;if(I(K))return l(K,It);if(Ct==at||Ct==V||ie&&!jt){if(ut=rt||ie?{}:_(K),!It)return rt?x(K,h(ut,K)):v(K,c(ut,K))}else{if(!T[Ct])return jt?K:{};ut=E(K,Ct,It)}}At||(At=new a);var zt=At.get(K);if(zt)return zt;At.set(K,ut),H(K)?K.forEach(function(gt){ut.add(ft(gt,Z,St,gt,K,At))}):z(K)&&K.forEach(function(gt,Et){ut.set(Et,ft(gt,Z,St,Et,K,At))});var me=ae?rt?S:y:rt?X:L,se=Dt?void 0:me(K);return n(se||K,function(gt,Et){se&&(Et=gt,gt=K[Et]),o(ut,Et,ft(gt,Z,St,Et,K,At))}),ut}e.exports=ft},3118:(e,i,t)=>{var a=t(3218),n=Object.create,o=function(){function c(){}return function(h){if(!a(h))return{};if(n)return n(h);c.prototype=h;var l=new c;return c.prototype=void 0,l}}();e.exports=o},731:(e,i,t)=>{var a=t(8668),n=t(7443),o=t(1196),c=t(9932),h=t(1717),l=t(4757),m=200;function v(x,y,S,A){var j=-1,E=n,_=!0,F=x.length,I=[],z=y.length;if(!F)return I;S&&(y=c(y,h(S))),A?(E=o,_=!1):y.length>=m&&(E=l,_=!1,y=new a(y));t:for(;++j<F;){var M=x[j],H=S==null?M:S(M);if(M=A||M!==0?M:0,_&&H===H){for(var L=z;L--;)if(y[L]===H)continue t;I.push(M)}else E(y,H,A)||I.push(M)}return I}e.exports=v},1848:e=>{function i(t,a,n,o){for(var c=t.length,h=n+(o?1:-1);o?h--:++h<c;)if(a(t[h],h,t))return h;return-1}e.exports=i},1078:(e,i,t)=>{var a=t(2488),n=t(7285);function o(c,h,l,m,v){var x=-1,y=c.length;for(l||(l=n),v||(v=[]);++x<y;){var S=c[x];h>0&&l(S)?h>1?o(S,h-1,l,m,v):a(v,S):m||(v[v.length]=S)}return v}e.exports=o},8483:(e,i,t)=>{var a=t(5063),n=a();e.exports=n},7816:(e,i,t)=>{var a=t(8483),n=t(3674);function o(c,h){return c&&a(c,h,n)}e.exports=o},7786:(e,i,t)=>{var a=t(1811),n=t(327);function o(c,h){h=a(h,c);for(var l=0,m=h.length;c!=null&&l<m;)c=c[n(h[l++])];return l&&l==m?c:void 0}e.exports=o},8866:(e,i,t)=>{var a=t(2488),n=t(1469);function o(c,h,l){var m=h(c);return n(c)?m:a(m,l(c))}e.exports=o},4239:(e,i,t)=>{var a=t(2705),n=t(9607),o=t(2333),c="[object Null]",h="[object Undefined]",l=a?a.toStringTag:void 0;function m(v){return v==null?v===void 0?h:c:l&&l in Object(v)?n(v):o(v)}e.exports=m},13:e=>{function i(t,a){return t!=null&&a in Object(t)}e.exports=i},2118:(e,i,t)=>{var a=t(1848),n=t(2722),o=t(2351);function c(h,l,m){return l===l?o(h,l,m):a(h,n,m)}e.exports=c},8975:(e,i,t)=>{var a=t(7816);function n(o,c,h,l){return a(o,function(m,v,x){c(l,h(m),v,x)}),l}e.exports=n},9454:(e,i,t)=>{var a=t(4239),n=t(7005),o="[object Arguments]";function c(h){return n(h)&&a(h)==o}e.exports=c},939:(e,i,t)=>{var a=t(2492),n=t(7005);function o(c,h,l,m,v){return c===h?!0:c==null||h==null||!n(c)&&!n(h)?c!==c&&h!==h:a(c,h,l,m,o,v)}e.exports=o},2492:(e,i,t)=>{var a=t(6384),n=t(7114),o=t(8351),c=t(6096),h=t(4160),l=t(1469),m=t(4144),v=t(6719),x=1,y="[object Arguments]",S="[object Array]",A="[object Object]",j=Object.prototype,E=j.hasOwnProperty;function _(F,I,z,M,H,L){var X=l(F),$=l(I),U=X?S:h(F),Q=$?S:h(I);U=U==y?A:U,Q=Q==y?A:Q;var V=U==A,st=Q==A,G=U==Q;if(G&&m(F)){if(!m(I))return!1;X=!0,V=!1}if(G&&!V)return L||(L=new a),X||v(F)?n(F,I,z,M,H,L):o(F,I,U,z,M,H,L);if(!(z&x)){var q=V&&E.call(F,"__wrapped__"),ot=st&&E.call(I,"__wrapped__");if(q||ot){var P=q?F.value():F,O=ot?I.value():I;return L||(L=new a),H(P,O,z,M,L)}}return G?(L||(L=new a),c(F,I,z,M,H,L)):!1}e.exports=_},5588:(e,i,t)=>{var a=t(4160),n=t(7005),o="[object Map]";function c(h){return n(h)&&a(h)==o}e.exports=c},2958:(e,i,t)=>{var a=t(6384),n=t(939),o=1,c=2;function h(l,m,v,x){var y=v.length,S=y,A=!x;if(l==null)return!S;for(l=Object(l);y--;){var j=v[y];if(A&&j[2]?j[1]!==l[j[0]]:!(j[0]in l))return!1}for(;++y<S;){j=v[y];var E=j[0],_=l[E],F=j[1];if(A&&j[2]){if(_===void 0&&!(E in l))return!1}else{var I=new a;if(x)var z=x(_,F,E,l,m,I);if(!(z===void 0?n(F,_,o|c,x,I):z))return!1}}return!0}e.exports=h},2722:e=>{function i(t){return t!==t}e.exports=i},8458:(e,i,t)=>{var a=t(3560),n=t(5346),o=t(3218),c=t(346),h=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,m=Function.prototype,v=Object.prototype,x=m.toString,y=v.hasOwnProperty,S=RegExp("^"+x.call(y).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(j){if(!o(j)||n(j))return!1;var E=a(j)?S:l;return E.test(c(j))}e.exports=A},9221:(e,i,t)=>{var a=t(4160),n=t(7005),o="[object Set]";function c(h){return n(h)&&a(h)==o}e.exports=c},8749:(e,i,t)=>{var a=t(4239),n=t(1780),o=t(7005),c="[object Arguments]",h="[object Array]",l="[object Boolean]",m="[object Date]",v="[object Error]",x="[object Function]",y="[object Map]",S="[object Number]",A="[object Object]",j="[object RegExp]",E="[object Set]",_="[object String]",F="[object WeakMap]",I="[object ArrayBuffer]",z="[object DataView]",M="[object Float32Array]",H="[object Float64Array]",L="[object Int8Array]",X="[object Int16Array]",$="[object Int32Array]",U="[object Uint8Array]",Q="[object Uint8ClampedArray]",V="[object Uint16Array]",st="[object Uint32Array]",G={};G[M]=G[H]=G[L]=G[X]=G[$]=G[U]=G[Q]=G[V]=G[st]=!0,G[c]=G[h]=G[I]=G[l]=G[z]=G[m]=G[v]=G[x]=G[y]=G[S]=G[A]=G[j]=G[E]=G[_]=G[F]=!1;function q(ot){return o(ot)&&n(ot.length)&&!!G[a(ot)]}e.exports=q},7206:(e,i,t)=>{var a=t(1573),n=t(6432),o=t(6557),c=t(1469),h=t(9601);function l(m){return typeof m=="function"?m:m==null?o:typeof m=="object"?c(m)?n(m[0],m[1]):a(m):h(m)}e.exports=l},280:(e,i,t)=>{var a=t(5726),n=t(6916),o=Object.prototype,c=o.hasOwnProperty;function h(l){if(!a(l))return n(l);var m=[];for(var v in Object(l))c.call(l,v)&&v!="constructor"&&m.push(v);return m}e.exports=h},313:(e,i,t)=>{var a=t(3218),n=t(5726),o=t(3498),c=Object.prototype,h=c.hasOwnProperty;function l(m){if(!a(m))return o(m);var v=n(m),x=[];for(var y in m)y=="constructor"&&(v||!h.call(m,y))||x.push(y);return x}e.exports=l},1573:(e,i,t)=>{var a=t(2958),n=t(1499),o=t(2634);function c(h){var l=n(h);return l.length==1&&l[0][2]?o(l[0][0],l[0][1]):function(m){return m===h||a(m,h,l)}}e.exports=c},6432:(e,i,t)=>{var a=t(939),n=t(7361),o=t(9095),c=t(5403),h=t(9162),l=t(2634),m=t(327),v=1,x=2;function y(S,A){return c(S)&&h(A)?l(m(S),A):function(j){var E=n(j,S);return E===void 0&&E===A?o(j,S):a(A,E,v|x)}}e.exports=y},371:e=>{function i(t){return function(a){return a?.[t]}}e.exports=i},9152:(e,i,t)=>{var a=t(7786);function n(o){return function(c){return a(c,o)}}e.exports=n},5976:(e,i,t)=>{var a=t(6557),n=t(5357),o=t(61);function c(h,l){return o(n(h,l,a),h+"")}e.exports=c},6560:(e,i,t)=>{var a=t(5703),n=t(8777),o=t(6557),c=n?function(h,l){return n(h,"toString",{configurable:!0,enumerable:!1,value:a(l),writable:!0})}:o;e.exports=c},2545:e=>{function i(t,a){for(var n=-1,o=Array(t);++n<t;)o[n]=a(n);return o}e.exports=i},531:(e,i,t)=>{var a=t(2705),n=t(9932),o=t(1469),c=t(3448),h=1/0,l=a?a.prototype:void 0,m=l?l.toString:void 0;function v(x){if(typeof x=="string")return x;if(o(x))return n(x,v)+"";if(c(x))return m?m.call(x):"";var y=x+"";return y=="0"&&1/x==-h?"-0":y}e.exports=v},7561:(e,i,t)=>{var a=t(7990),n=/^\s+/;function o(c){return c&&c.slice(0,a(c)+1).replace(n,"")}e.exports=o},1717:e=>{function i(t){return function(a){return t(a)}}e.exports=i},5652:(e,i,t)=>{var a=t(8668),n=t(7443),o=t(1196),c=t(4757),h=t(3593),l=t(1814),m=200;function v(x,y,S){var A=-1,j=n,E=x.length,_=!0,F=[],I=F;if(S)_=!1,j=o;else if(E>=m){var z=y?null:h(x);if(z)return l(z);_=!1,j=c,I=new a}else I=y?[]:F;t:for(;++A<E;){var M=x[A],H=y?y(M):M;if(M=S||M!==0?M:0,_&&H===H){for(var L=I.length;L--;)if(I[L]===H)continue t;y&&I.push(H),F.push(M)}else j(I,H,S)||(I!==F&&I.push(H),F.push(M))}return F}e.exports=v},4757:e=>{function i(t,a){return t.has(a)}e.exports=i},1811:(e,i,t)=>{var a=t(1469),n=t(5403),o=t(5514),c=t(9833);function h(l,m){return a(l)?l:n(l,m)?[l]:o(c(l))}e.exports=h},4318:(e,i,t)=>{var a=t(1149);function n(o){var c=new o.constructor(o.byteLength);return new a(c).set(new a(o)),c}e.exports=n},4626:(e,i,t)=>{e=t.nmd(e);var a=t(5639),n=i&&!i.nodeType&&i,o=n&&!0&&e&&!e.nodeType&&e,c=o&&o.exports===n,h=c?a.Buffer:void 0,l=h?h.allocUnsafe:void 0;function m(v,x){if(x)return v.slice();var y=v.length,S=l?l(y):new v.constructor(y);return v.copy(S),S}e.exports=m},7157:(e,i,t)=>{var a=t(4318);function n(o,c){var h=c?a(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.byteLength)}e.exports=n},3147:e=>{var i=/\w*$/;function t(a){var n=new a.constructor(a.source,i.exec(a));return n.lastIndex=a.lastIndex,n}e.exports=t},419:(e,i,t)=>{var a=t(2705),n=a?a.prototype:void 0,o=n?n.valueOf:void 0;function c(h){return o?Object(o.call(h)):{}}e.exports=c},7133:(e,i,t)=>{var a=t(4318);function n(o,c){var h=c?a(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.length)}e.exports=n},278:e=>{function i(t,a){var n=-1,o=t.length;for(a||(a=Array(o));++n<o;)a[n]=t[n];return a}e.exports=i},8363:(e,i,t)=>{var a=t(4865),n=t(9465);function o(c,h,l,m){var v=!l;l||(l={});for(var x=-1,y=h.length;++x<y;){var S=h[x],A=m?m(l[S],c[S],S,l,c):void 0;A===void 0&&(A=c[S]),v?n(l,S,A):a(l,S,A)}return l}e.exports=o},8805:(e,i,t)=>{var a=t(8363),n=t(9551);function o(c,h){return a(c,n(c),h)}e.exports=o},1911:(e,i,t)=>{var a=t(8363),n=t(1442);function o(c,h){return a(c,n(c),h)}e.exports=o},4429:(e,i,t)=>{var a=t(5639),n=a["__core-js_shared__"];e.exports=n},5063:e=>{function i(t){return function(a,n,o){for(var c=-1,h=Object(a),l=o(a),m=l.length;m--;){var v=l[t?m:++c];if(n(h[v],v,h)===!1)break}return a}}e.exports=i},7740:(e,i,t)=>{var a=t(7206),n=t(8612),o=t(3674);function c(h){return function(l,m,v){var x=Object(l);if(!n(l)){var y=a(m,3);l=o(l),m=function(A){return y(x[A],A,x)}}var S=h(l,m,v);return S>-1?x[y?l[S]:S]:void 0}}e.exports=c},7779:(e,i,t)=>{var a=t(8975);function n(o,c){return function(h,l){return a(h,o,c(l),{})}}e.exports=n},3593:(e,i,t)=>{var a=t(8525),n=t(308),o=t(1814),c=1/0,h=a&&1/o(new a([,-0]))[1]==c?function(l){return new a(l)}:n;e.exports=h},8777:(e,i,t)=>{var a=t(852),n=function(){try{var o=a(Object,"defineProperty");return o({},"",{}),o}catch{}}();e.exports=n},7114:(e,i,t)=>{var a=t(8668),n=t(2908),o=t(4757),c=1,h=2;function l(m,v,x,y,S,A){var j=x&c,E=m.length,_=v.length;if(E!=_&&!(j&&_>E))return!1;var F=A.get(m),I=A.get(v);if(F&&I)return F==v&&I==m;var z=-1,M=!0,H=x&h?new a:void 0;for(A.set(m,v),A.set(v,m);++z<E;){var L=m[z],X=v[z];if(y)var $=j?y(X,L,z,v,m,A):y(L,X,z,m,v,A);if($!==void 0){if($)continue;M=!1;break}if(H){if(!n(v,function(U,Q){if(!o(H,Q)&&(L===U||S(L,U,x,y,A)))return H.push(Q)})){M=!1;break}}else if(!(L===X||S(L,X,x,y,A))){M=!1;break}}return A.delete(m),A.delete(v),M}e.exports=l},8351:(e,i,t)=>{var a=t(2705),n=t(1149),o=t(7813),c=t(7114),h=t(8776),l=t(1814),m=1,v=2,x="[object Boolean]",y="[object Date]",S="[object Error]",A="[object Map]",j="[object Number]",E="[object RegExp]",_="[object Set]",F="[object String]",I="[object Symbol]",z="[object ArrayBuffer]",M="[object DataView]",H=a?a.prototype:void 0,L=H?H.valueOf:void 0;function X($,U,Q,V,st,G,q){switch(Q){case M:if($.byteLength!=U.byteLength||$.byteOffset!=U.byteOffset)return!1;$=$.buffer,U=U.buffer;case z:return!($.byteLength!=U.byteLength||!G(new n($),new n(U)));case x:case y:case j:return o(+$,+U);case S:return $.name==U.name&&$.message==U.message;case E:case F:return $==U+"";case A:var ot=h;case _:var P=V&m;if(ot||(ot=l),$.size!=U.size&&!P)return!1;var O=q.get($);if(O)return O==U;V|=v,q.set($,U);var D=c(ot($),ot(U),V,st,G,q);return q.delete($),D;case I:if(L)return L.call($)==L.call(U)}return!1}e.exports=X},6096:(e,i,t)=>{var a=t(8234),n=1,o=Object.prototype,c=o.hasOwnProperty;function h(l,m,v,x,y,S){var A=v&n,j=a(l),E=j.length,_=a(m),F=_.length;if(E!=F&&!A)return!1;for(var I=E;I--;){var z=j[I];if(!(A?z in m:c.call(m,z)))return!1}var M=S.get(l),H=S.get(m);if(M&&H)return M==m&&H==l;var L=!0;S.set(l,m),S.set(m,l);for(var X=A;++I<E;){z=j[I];var $=l[z],U=m[z];if(x)var Q=A?x(U,$,z,m,l,S):x($,U,z,l,m,S);if(!(Q===void 0?$===U||y($,U,v,x,S):Q)){L=!1;break}X||(X=z=="constructor")}if(L&&!X){var V=l.constructor,st=m.constructor;V!=st&&"constructor"in l&&"constructor"in m&&!(typeof V=="function"&&V instanceof V&&typeof st=="function"&&st instanceof st)&&(L=!1)}return S.delete(l),S.delete(m),L}e.exports=h},1957:(e,i,t)=>{var a=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g;e.exports=a},8234:(e,i,t)=>{var a=t(8866),n=t(9551),o=t(3674);function c(h){return a(h,o,n)}e.exports=c},6904:(e,i,t)=>{var a=t(8866),n=t(1442),o=t(1704);function c(h){return a(h,o,n)}e.exports=c},5050:(e,i,t)=>{var a=t(7019);function n(o,c){var h=o.__data__;return a(c)?h[typeof c=="string"?"string":"hash"]:h.map}e.exports=n},1499:(e,i,t)=>{var a=t(9162),n=t(3674);function o(c){for(var h=n(c),l=h.length;l--;){var m=h[l],v=c[m];h[l]=[m,v,a(v)]}return h}e.exports=o},852:(e,i,t)=>{var a=t(8458),n=t(7801);function o(c,h){var l=n(c,h);return a(l)?l:void 0}e.exports=o},5924:(e,i,t)=>{var a=t(5569),n=a(Object.getPrototypeOf,Object);e.exports=n},9607:(e,i,t)=>{var a=t(2705),n=Object.prototype,o=n.hasOwnProperty,c=n.toString,h=a?a.toStringTag:void 0;function l(m){var v=o.call(m,h),x=m[h];try{m[h]=void 0;var y=!0}catch{}var S=c.call(m);return y&&(v?m[h]=x:delete m[h]),S}e.exports=l},9551:(e,i,t)=>{var a=t(4963),n=t(479),o=Object.prototype,c=o.propertyIsEnumerable,h=Object.getOwnPropertySymbols,l=h?function(m){return m==null?[]:(m=Object(m),a(h(m),function(v){return c.call(m,v)}))}:n;e.exports=l},1442:(e,i,t)=>{var a=t(2488),n=t(5924),o=t(9551),c=t(479),h=Object.getOwnPropertySymbols,l=h?function(m){for(var v=[];m;)a(v,o(m)),m=n(m);return v}:c;e.exports=l},4160:(e,i,t)=>{var a=t(8552),n=t(7071),o=t(3818),c=t(8525),h=t(577),l=t(4239),m=t(346),v="[object Map]",x="[object Object]",y="[object Promise]",S="[object Set]",A="[object WeakMap]",j="[object DataView]",E=m(a),_=m(n),F=m(o),I=m(c),z=m(h),M=l;(a&&M(new a(new ArrayBuffer(1)))!=j||n&&M(new n)!=v||o&&M(o.resolve())!=y||c&&M(new c)!=S||h&&M(new h)!=A)&&(M=function(H){var L=l(H),X=L==x?H.constructor:void 0,$=X?m(X):"";if($)switch($){case E:return j;case _:return v;case F:return y;case I:return S;case z:return A}return L}),e.exports=M},7801:e=>{function i(t,a){return t?.[a]}e.exports=i},222:(e,i,t)=>{var a=t(1811),n=t(5694),o=t(1469),c=t(5776),h=t(1780),l=t(327);function m(v,x,y){x=a(x,v);for(var S=-1,A=x.length,j=!1;++S<A;){var E=l(x[S]);if(!(j=v!=null&&y(v,E)))break;v=v[E]}return j||++S!=A?j:(A=v==null?0:v.length,!!A&&h(A)&&c(E,A)&&(o(v)||n(v)))}e.exports=m},1789:(e,i,t)=>{var a=t(4536);function n(){this.__data__=a?a(null):{},this.size=0}e.exports=n},401:e=>{function i(t){var a=this.has(t)&&delete this.__data__[t];return this.size-=a?1:0,a}e.exports=i},7667:(e,i,t)=>{var a=t(4536),n="__lodash_hash_undefined__",o=Object.prototype,c=o.hasOwnProperty;function h(l){var m=this.__data__;if(a){var v=m[l];return v===n?void 0:v}return c.call(m,l)?m[l]:void 0}e.exports=h},1327:(e,i,t)=>{var a=t(4536),n=Object.prototype,o=n.hasOwnProperty;function c(h){var l=this.__data__;return a?l[h]!==void 0:o.call(l,h)}e.exports=c},1866:(e,i,t)=>{var a=t(4536),n="__lodash_hash_undefined__";function o(c,h){var l=this.__data__;return this.size+=this.has(c)?0:1,l[c]=a&&h===void 0?n:h,this}e.exports=o},3824:e=>{var i=Object.prototype,t=i.hasOwnProperty;function a(n){var o=n.length,c=new n.constructor(o);return o&&typeof n[0]=="string"&&t.call(n,"index")&&(c.index=n.index,c.input=n.input),c}e.exports=a},9148:(e,i,t)=>{var a=t(4318),n=t(7157),o=t(3147),c=t(419),h=t(7133),l="[object Boolean]",m="[object Date]",v="[object Map]",x="[object Number]",y="[object RegExp]",S="[object Set]",A="[object String]",j="[object Symbol]",E="[object ArrayBuffer]",_="[object DataView]",F="[object Float32Array]",I="[object Float64Array]",z="[object Int8Array]",M="[object Int16Array]",H="[object Int32Array]",L="[object Uint8Array]",X="[object Uint8ClampedArray]",$="[object Uint16Array]",U="[object Uint32Array]";function Q(V,st,G){var q=V.constructor;switch(st){case E:return a(V);case l:case m:return new q(+V);case _:return n(V,G);case F:case I:case z:case M:case H:case L:case X:case $:case U:return h(V,G);case v:return new q;case x:case A:return new q(V);case y:return o(V);case S:return new q;case j:return c(V)}}e.exports=Q},8517:(e,i,t)=>{var a=t(3118),n=t(5924),o=t(5726);function c(h){return typeof h.constructor=="function"&&!o(h)?a(n(h)):{}}e.exports=c},7285:(e,i,t)=>{var a=t(2705),n=t(5694),o=t(1469),c=a?a.isConcatSpreadable:void 0;function h(l){return o(l)||n(l)||!!(c&&l&&l[c])}e.exports=h},5776:e=>{var i=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function a(n,o){var c=typeof n;return o=o??i,!!o&&(c=="number"||c!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<o}e.exports=a},5403:(e,i,t)=>{var a=t(1469),n=t(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function h(l,m){if(a(l))return!1;var v=typeof l;return v=="number"||v=="symbol"||v=="boolean"||l==null||n(l)?!0:c.test(l)||!o.test(l)||m!=null&&l in Object(m)}e.exports=h},7019:e=>{function i(t){var a=typeof t;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?t!=="__proto__":t===null}e.exports=i},5346:(e,i,t)=>{var a=t(4429),n=function(){var c=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function o(c){return!!n&&n in c}e.exports=o},5726:e=>{var i=Object.prototype;function t(a){var n=a&&a.constructor,o=typeof n=="function"&&n.prototype||i;return a===o}e.exports=t},9162:(e,i,t)=>{var a=t(3218);function n(o){return o===o&&!a(o)}e.exports=n},7040:e=>{function i(){this.__data__=[],this.size=0}e.exports=i},4125:(e,i,t)=>{var a=t(8470),n=Array.prototype,o=n.splice;function c(h){var l=this.__data__,m=a(l,h);if(m<0)return!1;var v=l.length-1;return m==v?l.pop():o.call(l,m,1),--this.size,!0}e.exports=c},2117:(e,i,t)=>{var a=t(8470);function n(o){var c=this.__data__,h=a(c,o);return h<0?void 0:c[h][1]}e.exports=n},7518:(e,i,t)=>{var a=t(8470);function n(o){return a(this.__data__,o)>-1}e.exports=n},4705:(e,i,t)=>{var a=t(8470);function n(o,c){var h=this.__data__,l=a(h,o);return l<0?(++this.size,h.push([o,c])):h[l][1]=c,this}e.exports=n},4785:(e,i,t)=>{var a=t(1989),n=t(8407),o=t(7071);function c(){this.size=0,this.__data__={hash:new a,map:new(o||n),string:new a}}e.exports=c},1285:(e,i,t)=>{var a=t(5050);function n(o){var c=a(this,o).delete(o);return this.size-=c?1:0,c}e.exports=n},6e3:(e,i,t)=>{var a=t(5050);function n(o){return a(this,o).get(o)}e.exports=n},9916:(e,i,t)=>{var a=t(5050);function n(o){return a(this,o).has(o)}e.exports=n},5265:(e,i,t)=>{var a=t(5050);function n(o,c){var h=a(this,o),l=h.size;return h.set(o,c),this.size+=h.size==l?0:1,this}e.exports=n},8776:e=>{function i(t){var a=-1,n=Array(t.size);return t.forEach(function(o,c){n[++a]=[c,o]}),n}e.exports=i},2634:e=>{function i(t,a){return function(n){return n==null?!1:n[t]===a&&(a!==void 0||t in Object(n))}}e.exports=i},4523:(e,i,t)=>{var a=t(8306),n=500;function o(c){var h=a(c,function(m){return l.size===n&&l.clear(),m}),l=h.cache;return h}e.exports=o},4536:(e,i,t)=>{var a=t(852),n=a(Object,"create");e.exports=n},6916:(e,i,t)=>{var a=t(5569),n=a(Object.keys,Object);e.exports=n},3498:e=>{function i(t){var a=[];if(t!=null)for(var n in Object(t))a.push(n);return a}e.exports=i},1167:(e,i,t)=>{e=t.nmd(e);var a=t(1957),n=i&&!i.nodeType&&i,o=n&&!0&&e&&!e.nodeType&&e,c=o&&o.exports===n,h=c&&a.process,l=function(){try{var m=o&&o.require&&o.require("util").types;return m||h&&h.binding&&h.binding("util")}catch{}}();e.exports=l},2333:e=>{var i=Object.prototype,t=i.toString;function a(n){return t.call(n)}e.exports=a},5569:e=>{function i(t,a){return function(n){return t(a(n))}}e.exports=i},5357:(e,i,t)=>{var a=t(6874),n=Math.max;function o(c,h,l){return h=n(h===void 0?c.length-1:h,0),function(){for(var m=arguments,v=-1,x=n(m.length-h,0),y=Array(x);++v<x;)y[v]=m[h+v];v=-1;for(var S=Array(h+1);++v<h;)S[v]=m[v];return S[h]=l(y),a(c,this,S)}}e.exports=o},5639:(e,i,t)=>{var a=t(1957),n=typeof self=="object"&&self&&self.Object===Object&&self,o=a||n||Function("return this")();e.exports=o},619:e=>{var i="__lodash_hash_undefined__";function t(a){return this.__data__.set(a,i),this}e.exports=t},2385:e=>{function i(t){return this.__data__.has(t)}e.exports=i},1814:e=>{function i(t){var a=-1,n=Array(t.size);return t.forEach(function(o){n[++a]=o}),n}e.exports=i},61:(e,i,t)=>{var a=t(6560),n=t(1275),o=n(a);e.exports=o},1275:e=>{var i=800,t=16,a=Date.now;function n(o){var c=0,h=0;return function(){var l=a(),m=t-(l-h);if(h=l,m>0){if(++c>=i)return arguments[0]}else c=0;return o.apply(void 0,arguments)}}e.exports=n},7465:(e,i,t)=>{var a=t(8407);function n(){this.__data__=new a,this.size=0}e.exports=n},3779:e=>{function i(t){var a=this.__data__,n=a.delete(t);return this.size=a.size,n}e.exports=i},7599:e=>{function i(t){return this.__data__.get(t)}e.exports=i},4758:e=>{function i(t){return this.__data__.has(t)}e.exports=i},4309:(e,i,t)=>{var a=t(8407),n=t(7071),o=t(3369),c=200;function h(l,m){var v=this.__data__;if(v instanceof a){var x=v.__data__;if(!n||x.length<c-1)return x.push([l,m]),this.size=++v.size,this;v=this.__data__=new o(x)}return v.set(l,m),this.size=v.size,this}e.exports=h},2351:e=>{function i(t,a,n){for(var o=n-1,c=t.length;++o<c;)if(t[o]===a)return o;return-1}e.exports=i},5514:(e,i,t)=>{var a=t(4523),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,c=a(function(h){var l=[];return h.charCodeAt(0)===46&&l.push(""),h.replace(n,function(m,v,x,y){l.push(x?y.replace(o,"$1"):v||m)}),l});e.exports=c},327:(e,i,t)=>{var a=t(3448),n=1/0;function o(c){if(typeof c=="string"||a(c))return c;var h=c+"";return h=="0"&&1/c==-n?"-0":h}e.exports=o},346:e=>{var i=Function.prototype,t=i.toString;function a(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}e.exports=a},7990:e=>{var i=/\s/;function t(a){for(var n=a.length;n--&&i.test(a.charAt(n)););return n}e.exports=t},6678:(e,i,t)=>{var a=t(5990),n=4;function o(c){return a(c,n)}e.exports=o},361:(e,i,t)=>{var a=t(5990),n=1,o=4;function c(h){return a(h,n|o)}e.exports=c},5703:e=>{function i(t){return function(){return t}}e.exports=i},1966:(e,i,t)=>{var a=t(731),n=t(1078),o=t(5976),c=t(9246),h=o(function(l,m){return c(l)?a(l,n(m,1,c,!0)):[]});e.exports=h},7813:e=>{function i(t,a){return t===a||t!==t&&a!==a}e.exports=i},3311:(e,i,t)=>{var a=t(7740),n=t(998),o=a(n);e.exports=o},998:(e,i,t)=>{var a=t(1848),n=t(7206),o=t(554),c=Math.max;function h(l,m,v){var x=l==null?0:l.length;if(!x)return-1;var y=v==null?0:o(v);return y<0&&(y=c(x+y,0)),a(l,n(m,3),y)}e.exports=h},7361:(e,i,t)=>{var a=t(7786);function n(o,c,h){var l=o==null?void 0:a(o,c);return l===void 0?h:l}e.exports=n},9095:(e,i,t)=>{var a=t(13),n=t(222);function o(c,h){return c!=null&&n(c,h,a)}e.exports=o},6557:e=>{function i(t){return t}e.exports=i},3137:(e,i,t)=>{var a=t(5703),n=t(7779),o=t(6557),c=Object.prototype,h=c.toString,l=n(function(m,v,x){v!=null&&typeof v.toString!="function"&&(v=h.call(v)),m[v]=x},a(o));e.exports=l},5694:(e,i,t)=>{var a=t(9454),n=t(7005),o=Object.prototype,c=o.hasOwnProperty,h=o.propertyIsEnumerable,l=a(function(){return arguments}())?a:function(m){return n(m)&&c.call(m,"callee")&&!h.call(m,"callee")};e.exports=l},1469:e=>{var i=Array.isArray;e.exports=i},8612:(e,i,t)=>{var a=t(3560),n=t(1780);function o(c){return c!=null&&n(c.length)&&!a(c)}e.exports=o},9246:(e,i,t)=>{var a=t(8612),n=t(7005);function o(c){return n(c)&&a(c)}e.exports=o},4144:(e,i,t)=>{e=t.nmd(e);var a=t(5639),n=t(5062),o=i&&!i.nodeType&&i,c=o&&!0&&e&&!e.nodeType&&e,h=c&&c.exports===o,l=h?a.Buffer:void 0,m=l?l.isBuffer:void 0,v=m||n;e.exports=v},8446:(e,i,t)=>{var a=t(939);function n(o,c){return a(o,c)}e.exports=n},3560:(e,i,t)=>{var a=t(4239),n=t(3218),o="[object AsyncFunction]",c="[object Function]",h="[object GeneratorFunction]",l="[object Proxy]";function m(v){if(!n(v))return!1;var x=a(v);return x==c||x==h||x==o||x==l}e.exports=m},1780:e=>{var i=9007199254740991;function t(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=i}e.exports=t},6688:(e,i,t)=>{var a=t(5588),n=t(1717),o=t(1167),c=o&&o.isMap,h=c?n(c):a;e.exports=h},3218:e=>{function i(t){var a=typeof t;return t!=null&&(a=="object"||a=="function")}e.exports=i},7005:e=>{function i(t){return t!=null&&typeof t=="object"}e.exports=i},2928:(e,i,t)=>{var a=t(9221),n=t(1717),o=t(1167),c=o&&o.isSet,h=c?n(c):a;e.exports=h},3448:(e,i,t)=>{var a=t(4239),n=t(7005),o="[object Symbol]";function c(h){return typeof h=="symbol"||n(h)&&a(h)==o}e.exports=c},6719:(e,i,t)=>{var a=t(8749),n=t(1717),o=t(1167),c=o&&o.isTypedArray,h=c?n(c):a;e.exports=h},3674:(e,i,t)=>{var a=t(4636),n=t(280),o=t(8612);function c(h){return o(h)?a(h):n(h)}e.exports=c},1704:(e,i,t)=>{var a=t(4636),n=t(313),o=t(8612);function c(h){return o(h)?a(h,!0):n(h)}e.exports=c},8306:(e,i,t)=>{var a=t(3369),n="Expected a function";function o(c,h){if(typeof c!="function"||h!=null&&typeof h!="function")throw new TypeError(n);var l=function(){var m=arguments,v=h?h.apply(this,m):m[0],x=l.cache;if(x.has(v))return x.get(v);var y=c.apply(this,m);return l.cache=x.set(v,y)||x,y};return l.cache=new(o.Cache||a),l}o.Cache=a,e.exports=o},308:e=>{function i(){}e.exports=i},9601:(e,i,t)=>{var a=t(371),n=t(9152),o=t(5403),c=t(327);function h(l){return o(l)?a(c(l)):n(l)}e.exports=h},479:e=>{function i(){return[]}e.exports=i},5062:e=>{function i(){return!1}e.exports=i},8601:(e,i,t)=>{var a=t(4841),n=1/0,o=17976931348623157e292;function c(h){if(!h)return h===0?h:0;if(h=a(h),h===n||h===-n){var l=h<0?-1:1;return l*o}return h===h?h:0}e.exports=c},554:(e,i,t)=>{var a=t(8601);function n(o){var c=a(o),h=c%1;return c===c?h?c-h:c:0}e.exports=n},4841:(e,i,t)=>{var a=t(7561),n=t(3218),o=t(3448),c=NaN,h=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,m=/^0o[0-7]+$/i,v=parseInt;function x(y){if(typeof y=="number")return y;if(o(y))return c;if(n(y)){var S=typeof y.valueOf=="function"?y.valueOf():y;y=n(S)?S+"":S}if(typeof y!="string")return y===0?y:+y;y=a(y);var A=l.test(y);return A||m.test(y)?v(y.slice(2),A?2:8):h.test(y)?c:+y}e.exports=x},9833:(e,i,t)=>{var a=t(531);function n(o){return o==null?"":a(o)}e.exports=n},4908:(e,i,t)=>{var a=t(5652);function n(o){return o&&o.length?a(o):[]}e.exports=n},2569:(e,i,t)=>{var a=t(731),n=t(5976),o=t(9246),c=n(function(h,l){return o(h)?a(h,l):[]});e.exports=c}},p={};function u(e){var i=p[e];if(i!==void 0)return i.exports;var t=p[e]={id:e,loaded:!1,exports:{}};return s[e](t,t.exports,u),t.loaded=!0,t.exports}u.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return u.d(i,{a:i}),i},u.d=(e,i)=>{for(var t in i)u.o(i,t)&&!u.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},u.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),u.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),u.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var g={};return(()=>{"use strict";u.r(g),u.d(g,{chordParserFactory:()=>Er,chordRendererFactory:()=>gi});function e(r,f){return r.reduce(function(d,b){return d?b(d):null},f)}var i=u(361),t=u.n(i),a=function(f){if(!Array.isArray(f))throw new TypeError("customFilters should be given as an array");if(f.some(function(d){return typeof d!="function"}))throw new TypeError("The given filter is not a function");return!0};let n=a;function o(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(r);f&&(b=b.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,b)}return d}function c(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?o(Object(d),!0).forEach(function(b){h(r,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):o(Object(d)).forEach(function(b){Object.defineProperty(r,b,Object.getOwnPropertyDescriptor(d,b))})}return r}function h(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var l={AFlat:"Ab",A:"A",ASharp:"A#",BFlat:"Bb",B:"B",C:"C",CSharp:"C#",DFlat:"Db",D:"D",DSharp:"D#",EFlat:"Eb",E:"E",F:"F",FSharp:"F#",GFlat:"Gb",G:"G",GSharp:"G#"},m={Ab:l.AFlat,A:l.A,"A#":l.ASharp,Bb:l.BFlat,B:l.B,"B#":l.C,Cb:l.B,C:l.C,"C#":l.CSharp,Db:l.DFlat,D:l.D,"D#":l.DSharp,Eb:l.EFlat,E:l.E,"E#":l.F,Fb:l.E,F:l.F,"F#":l.FSharp,Gb:l.GFlat,G:l.G,"G#":l.GSharp},v={Lab:l.AFlat,La:l.A,"La#":l.ASharp,Sib:l.BFlat,Si:l.B,"Si#":l.C,Dob:l.B,Do:l.C,"Do#":l.CSharp,Reb:l.DFlat,R\u00E9b:l.DFlat,Re:l.D,R\u00E9:l.D,"Re#":l.DSharp,"R\xE9#":l.DSharp,Mib:l.EFlat,Mi:l.E,"Mi#":l.F,Fab:l.E,Fa:l.F,"Fa#":l.FSharp,Solb:l.GFlat,Sol:l.G,"Sol#":l.GSharp},x={As:l.AFlat,A:l.A,Ais:l.ASharp,Hes:l.BFlat,H:l.B,His:l.C,Ces:l.B,C:l.C,Cis:l.CSharp,Des:l.DFlat,D:l.D,Dis:l.DSharp,Es:l.EFlat,E:l.E,Eis:l.F,Fes:l.E,F:l.F,Fis:l.FSharp,Ges:l.GFlat,G:l.G,Gis:l.GSharp};function y(r){var f;return Object.keys(r).reduce(function(d,b){return b.match(/.[b|#]$/)&&(f=b.replace("#","\u266F").replace("b","\u266D"),d[f]=r[b]),d},{})}var S=c(c({},m),y(m)),A=c(c({},v),y(v)),j=c({},x),E=c(c(c({},S),A),j),_=Object.keys(E).sort(function(r,f){return f.length-r.length}),F=Object.keys(S).sort(function(r,f){return f.length-r.length}),I=Object.keys(A).sort(function(r,f){return f.length-r.length}),z=Object.keys(j).sort(function(r,f){return f.length-r.length}),M=[{name:"english",notes:F},{name:"german",notes:z},{name:"latin",notes:I}];function H(r){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},H(r)}function L(r,f){for(var d=0;d<f.length;d++){var b=f[d];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(r,b.key,b)}}function X(r,f,d){return f&&L(r.prototype,f),d&&L(r,d),Object.defineProperty(r,"prototype",{writable:!1}),r}function $(r,f){if(!(r instanceof f))throw new TypeError("Cannot call a class as a function")}function U(r,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(f&&f.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),f&&O(r,f)}function Q(r){var f=ot();return function(){var b=D(r),C;if(f){var R=D(this).constructor;C=Reflect.construct(b,arguments,R)}else C=b.apply(this,arguments);return V(this,C)}}function V(r,f){if(f&&(H(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return st(r)}function st(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function G(r){var f=typeof Map=="function"?new Map:void 0;return G=function(b){if(b===null||!P(b))return b;if(typeof b!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f<"u"){if(f.has(b))return f.get(b);f.set(b,C)}function C(){return q(b,arguments,D(this).constructor)}return C.prototype=Object.create(b.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O(C,b)},G(r)}function q(r,f,d){return ot()?q=Reflect.construct:q=function(C,R,B){var J=[null];J.push.apply(J,R);var dt=Function.bind.apply(C,J),Ft=new dt;return B&&O(Ft,B.prototype),Ft},q.apply(null,arguments)}function ot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function O(r,f){return O=Object.setPrototypeOf||function(b,C){return b.__proto__=C,b},O(r,f)}function D(r){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(d){return d.__proto__||Object.getPrototypeOf(d)},D(r)}var Y=function(r){U(d,r);var f=Q(d);function d(){var b;return $(this,d),b=f.call(this,"The given symbol is not a valid string"),b.name="InvalidInput",b}return X(d)}(G(Error)),at=function(r){U(d,r);var f=Q(d);function d(){var b;$(this,d);var C="An unexpected error happened. Maybe a custom filter returned null instead of throwing an exception?";return b=f.call(this,C),b.name="UnexpectedError",b}return X(d)}(G(Error)),et=function(r){U(d,r);var f=Q(d);function d(b,C,R){var B;return $(this,d),B=f.call(this,b),B.name=R,B.chord=C,B}return X(d)}(G(Error)),mt=function(r){U(d,r);var f=Q(d);function d(b){$(this,d);var C='"'.concat(b.input.symbol,'" does not seems to be a chord');return f.call(this,C,b,"NoSymbolFound")}return X(d)}(et),Tt=function(r){U(d,r);var f=Q(d);function d(b,C){$(this,d);var R='The chord descriptor "'.concat(b.input.descriptor,'" contains unknown or duplicated modifiers: "').concat(C,'"');return f.call(this,R,b,"InvalidModifier")}return X(d)}(et),Mt=function(r){U(d,r);var f=Q(d);function d(b,C){$(this,d);var R='"'.concat(b.input.symbol,'" describes a chord with an invalid intervals combo: ')+C.join(" and ");return f.call(this,R,b,"InvalidIntervals")}return X(d)}(et),Ut=u(1469),Ht=u.n(Ut),Kt=u(8446),re=u.n(Kt);function wt(r,f){var d=Ht()(f)?f:[f];return re()(r,d)}function W(r,f){return Xt(r,f,"oneOf")}function Wt(r,f){return Xt(r,f,"all")}function xt(r,f){return Xt(r,f,"none")}function Xt(r,f,d){var b=Ht()(f)?f:[f],C=d==="oneOf"?"some":"every";return b[C](function(R){return d==="none"?!r.includes(R):r.includes(R)})}var ne=[["2","3"],["2","9"],["3","b3"],["4","11"],["5","b5"],["5","#5"],["b6","#5"],["b6","6"],["b6","13"],["6","13"],["b7","bb7"],["7","b7"],["9","b9"],["9","#9"],["11","#11"],["13","b13"]];function he(r){var f=r.normalized.intervals,d=ne.find(function(b){return Wt(f,b)});if(d)throw new Mt(r,d);return r}function Vt(r){var f=r.formatted,d=f.rootNote,b=f.bassNote,C=f.descriptor,R=f.chordChanges,B=d;return C&&(B+=C),R&&R.length&&(B+="("+R.join(",")+")"),b&&(B+="/"+b),r.formatted.symbol=B,r}var T={ma:"major",ma6:"major6",ma7:"major7",dom7:"dominant7",mi:"minor",mi6:"minor6",mi7:"minor7",miMa7:"minorMajor7",aug:"augmented",dim:"diminished",dim7:"diminished7",power:"power",bass:"bass"},ft=[T.ma,T.ma6,T.ma7,T.dom7,T.aug],K=[T.mi,T.mi6,T.mi7,T.miMa7,T.dim,T.dim7],Z;function St(r){return ut(r)||At(r)||jt(r)||de()}function de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(r,f){if(r){if(typeof r=="string")return It(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return It(r,f)}}function At(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function ut(r){if(Array.isArray(r))return It(r)}function It(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=r[d];return b}function rt(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var ae=(Z={},rt(Z,T.ma,function(){return""}),rt(Z,T.ma6,function(r){return r.normalized.intervals.includes("9")?"69":"6"}),rt(Z,T.ma7,function(r){return"ma"+zt(r)}),rt(Z,T.dom7,function(r){return r.normalized.intents.alt?"7alt":zt(r)}),rt(Z,T.mi,function(){return"mi"}),rt(Z,T.mi6,function(r){return r.normalized.intervals.includes("9")?"mi69":"mi6"}),rt(Z,T.mi7,function(r){return"mi"+zt(r)}),rt(Z,T.miMa7,function(r){return"miMa"+zt(r)}),rt(Z,T.aug,function(){return"+"}),rt(Z,T.dim,function(){return"dim"}),rt(Z,T.dim7,function(){return"dim7"}),rt(Z,T.power,function(){return"5"}),rt(Z,T.bass,function(){return" bass"}),Z),Dt={add:"add",add7:"Ma7",omit:"omit",sus:"sus"};function Ct(r){return r.formatted={rootNote:r.normalized.rootNote,bassNote:r.normalized.bassNote,descriptor:ie(r),chordChanges:me(r)},r}function ie(r){var f=ae[r.normalized.quality](r);return r.normalized.isSuspended&&(f+=Dt.sus),f}function zt(r){var f=r.normalized.extensions,d=f[f.length-1];return d==="11"&&r.normalized.intents.major&&(d=xt(r.normalized.alterations,["b9","#9"])?"9":"7"),d||"7"}function me(r){var f=Et(r.normalized.omits);if(se(r))return f;var d=gt(r.normalized.quality,r.normalized.adds);return[].concat(St(r.normalized.alterations),St(d),St(f))}function se(r){return r.normalized.intents.alt&&r.normalized.quality===T.dom7}function gt(r,f){return f.filter(function(d){return!([T.ma6,T.mi6].includes(r)&&d==="9")}).map(function(d,b){var C="";return b===0&&(C+=Dt.add,["b","#"].includes(d[0])&&(C+=" ")),C+=d==="7"?Dt.add7:d,C})}function Et(r){return r.map(function(f,d){var b="";return d===0&&(b+=Dt.omit),b+=f==="b3"?"3":f,b})}function Ue(r){var f=[He,ct,Yt,ge];return r.input.descriptor&&(r.input.parsableDescriptor=e(f,r.input.descriptor)),r}function He(r){return r.replace(/[A-LN-Za-z]+/g,function(f){return f.toLowerCase()}).replace("oMit","omit").replace("diM","dim").replace("augMented","augmented")}function ct(r){return r.replace(/ /g,"")}function Yt(r){return r.replace(/(7?dim)(alt|add)/g,"$1 $2").replace(/([m|M])(alt|add)/g,"$1 $2").replace(/i(no[35])/g,"i $1").replace(/([b#]9)6/g,"$1 6").replace(/(9\/?6)/g," $1")}function ge(r){var f,d,b;return r.replace(/\((.*?)\)/g,function(C,R){return f=[],d="",R.split(",").forEach(function(B){b=!0,B.startsWith("add")?d="add":B.startsWith("omit")?d="omit":B.startsWith("no")?d="no":b=!1,b?f.push(B):f.push(d+B)})," "+f.join(" ")+" "})}function Zt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;return{input:{symbol:f},normalized:{},formatted:{},parserConfiguration:t()(r)}}var nt;function Qt(r){return Mn(r)||je(r)||ve(r)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ve(r,f){if(r){if(typeof r=="string")return We(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return We(r,f)}}function je(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Mn(r){if(Array.isArray(r))return We(r)}function We(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=r[d];return b}function lt(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var zn=[l.A,l.ASharp,l.B,l.C,l.CSharp,l.D,l.DSharp,l.E,l.F,l.FSharp,l.G,l.GSharp],Ln=[l.A,l.BFlat,l.B,l.C,l.DFlat,l.D,l.EFlat,l.E,l.F,l.GFlat,l.G,l.AFlat],Gn=(nt={},lt(nt,l.C,{maj:"flat",min:"flat"}),lt(nt,l.CSharp,{maj:"sharp",min:"sharp"}),lt(nt,l.DFlat,{maj:"flat",min:"flat"}),lt(nt,l.D,{maj:"sharp",min:"flat"}),lt(nt,l.DSharp,{maj:"sharp",min:"sharp"}),lt(nt,l.EFlat,{maj:"flat",min:"flat"}),lt(nt,l.E,{maj:"sharp",min:"sharp"}),lt(nt,l.F,{maj:"flat",min:"flat"}),lt(nt,l.FSharp,{maj:"sharp",min:"sharp"}),lt(nt,l.GFlat,{maj:"flat",min:"flat"}),lt(nt,l.G,{maj:"sharp",min:"flat"}),lt(nt,l.GSharp,{maj:"sharp",min:"sharp"}),lt(nt,l.AFlat,{maj:"flat",min:"flat"}),lt(nt,l.A,{maj:"sharp",min:"flat"}),lt(nt,l.ASharp,{maj:"sharp",min:"sharp"}),lt(nt,l.BFlat,{maj:"flat",min:"flat"}),lt(nt,l.B,{maj:"sharp",min:"sharp"}),nt);function Xe(r){var f=r.normalized.rootNote,d=r.normalized.semitones,b=r.normalized.quality,C=ft.includes(b)?"maj":"min",R=Gn[f][C]==="sharp"?zn:Ln,B=R.indexOf(f),J=[].concat(Qt(R.slice(B)),Qt(R.slice(0,B)),Qt(R.slice(B)),Qt(R.slice(0,B))),dt=d.map(function(Ft){return J[Ft]});return r.normalized.notes=dt,r}function Bn(r){return r.normalized.rootNote=E[r.input.rootNote],r.input.bassNote&&(r.normalized.bassNote=E[r.input.bassNote]),r}var $n=u(6678),Ve=u.n($n),Un=u(3311),Hn=u.n(Un),Kn=u(4908),mr=u.n(Kn),Wn=u(2569),gr=u.n(Wn);function vr(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(r);f&&(b=b.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,b)}return d}function oe(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?vr(Object(d),!0).forEach(function(b){Ot(r,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):vr(Object(d)).forEach(function(b){Object.defineProperty(r,b,Object.getOwnPropertyDescriptor(d,b))})}return r}function Ot(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}function br(r){return Zn(r)||Yn(r)||Vn(r)||Xn()}function Xn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vn(r,f){if(r){if(typeof r=="string")return Ye(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Ye(r,f)}}function Yn(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Zn(r){if(Array.isArray(r))return Ye(r)}function Ye(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=r[d];return b}function yr(r){var f=Ve()(r.normalized.intervals),d={quality:"",isSuspended:!1,extensions:[],alterations:[],adds:[],omits:[]};if(Qn(f))d.quality=T.power;else if(Jn(f))d.quality=T.bass;else{var b=qn(f,r.normalized.intents.major),C=kn(f,r.normalized.intents.major),R=ta(f,r,C,b),B=R.qualityIntervals,J=R.quality,dt=ia(f,J),Ft=["1"].concat(br(B),br(dt)),Jt=fa(f,Ft,J),Pt=Jt.adds,be=Jt.alterations;d=oe(oe({},d),{},{quality:J,isSuspended:C,extensions:dt,alterations:be,adds:Pt,omits:b})}return oe(oe({},r),{},{normalized:oe(oe({},r.normalized),d)})}function Qn(r){return wt(r,["1","5"])}function Jn(r){return wt(r,["1"])}function kn(r,f){return r.includes("4")||r.includes("11")&&f&&!r.includes("3")}function qn(r,f){var d=[];return(xt(r,["b3","3","4","11"])||!f&&xt(r,["b3","4"]))&&d.push(f?"3":"b3"),xt(r,["b5","5","#5","b13"])&&d.push("5"),d}function ta(r,f,d,b){var C=ea(r,f,d,b),R=[{qualityIntervals:["b3"],quality:T.mi},{qualityIntervals:["b3","6"],quality:T.mi6},{qualityIntervals:["b3","7"],quality:T.miMa7},{qualityIntervals:["b3","b7"],quality:T.mi7},{qualityIntervals:["3"],quality:T.ma},{qualityIntervals:["3","6"],quality:T.ma6},{qualityIntervals:["3","7"],quality:T.ma7},{qualityIntervals:["3","b7"],quality:T.dom7},{qualityIntervals:["3","#5"],quality:T.aug},{qualityIntervals:["b3","b5"],quality:T.dim},{qualityIntervals:["b3","b5","bb7"],quality:T.dim7}].sort(function(B,J){return J.qualityIntervals.length-B.qualityIntervals.length});return Hn()(R,function(B){return Wt(C,B.qualityIntervals)})}function ea(r,f,d,b){var C=[ra.bind(null,b),na.bind(null,d,f.normalized.intents.major),aa.bind(null,f.normalized.intents.alt),mr()];return e(C,Ve()(r))}function ra(r,f){var d=Ve()(f);return r.includes("3")?d.push("3"):r.includes("b3")&&d.push("b3"),d}function na(r,f,d){if(r){var b=gr()(d,"4");return b.push(f?"3":"b3"),b}return d}function aa(r,f){if(r){var d=gr()(f,"b5","#5");return d.push("5"),d}return f}function ia(r,f){var d=[];return sa(f)&&(oa(r,f)?d.push("9","11","13"):ua(r,f)?d.push("9","13"):la(r)?d.push("9","11"):ca(r)&&d.push("9")),d}function sa(r){return[T.ma7,T.dom7,T.mi7,T.miMa7].includes(r)}function xr(r){return[T.mi7,T.miMa7].includes(r)}function oa(r,f){return xr(f)&&W(r,"13")&&W(r,["11","#11"])&&W(r,["b9","9","#9"])}function ua(r,f){return!xr(f)&&W(r,"13")&&W(r,["b9","9","#9"])}function la(r){return W(r,"11")&&W(r,["b9","9","#9"])}function ca(r){return r.includes("9")}function fa(r,f,d){var b=[],C=[];return r.filter(function(R){return R!=="5"&&R!=="4"}).forEach(function(R){f.includes(R)||(pa(d,R)?C.push(R):b.push(R))}),ha(r)&&b.push("3"),{adds:Sr(b),alterations:Sr(C)}}function pa(r,f){var d,b=(d={},Ot(d,T.ma,["b5","#5","#11","b13"]),Ot(d,T.ma6,["b5","#5","#11","b13"]),Ot(d,T.ma7,["b5","#5","#11","b13"]),Ot(d,T.dom7,["b5","#5","b9","#9","#11","b13"]),Ot(d,T.mi,["b5","#5","#11","b13"]),Ot(d,T.mi6,["b5","#5","#11","b13"]),Ot(d,T.mi7,["b5","#5","#11","b13"]),Ot(d,T.miMa7,["b5","#5","#11","b13"]),Ot(d,T.aug,[]),Ot(d,T.dim,[]),Ot(d,T.dim7,[]),d);return b[r].includes(f)}function ha(r){return Wt(r,["3","4"])}function Sr(r){return r.sort(function(f,d){var b=Number.parseInt(f.replace(/[b#]/,"")),C=Number.parseInt(d.replace(/[b#]/,""));return b-C})}function da(r,f){var d=f.input.symbol,b=r.join("|"),C=new RegExp("^("+b+")(.*?)(/("+b+"))?$"),R=d.match(C);if(R&&R[1])return f.input.rootNote=R[1],R[2]&&(f.input.descriptor=R[2]),R[4]&&(f.input.bassNote=R[4]),f;throw new mt(f)}function Ar(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(r);f&&(b=b.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,b)}return d}function Ce(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?Ar(Object(d),!0).forEach(function(b){ma(r,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):Ar(Object(d)).forEach(function(b){Object.defineProperty(r,b,Object.getOwnPropertyDescriptor(d,b))})}return r}function ma(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var w={ma:"ma",mi:"mi",dim:"dim",halfDim:"halfDim",aug:"aug",seventh:"seventh",sus:"sus",sus2:"sus2",ninth:"ninth",eleventh:"eleventh",thirteenth:"thirteenth",fifthFlat:"b5",fifthSharp:"#5",ninthFlat:"b9",ninthSharp:"#9",eleventhSharp:"#11",thirteenthFlat:"b13",add3:"add3",add4:"add4",addb6:"addb6",add6:"add6",add69:"add69",add7:"add7",add9:"add9",add11:"add11",add13:"add13",bass:"bass",omit3:"omit3",omit5:"omit5",power:"power",alt:"alt"},Ze={"^":[w.ma,w.add7],\u0394:[w.ma,w.add7],M:w.ma,Ma:w.ma,Maj:w.ma,Major:w.ma,ma:w.ma,maj:w.ma,major:w.ma},ga=Tr(Ze,w.add7,function(r){return r+"7"}),va=Tr(Ze,w.add7,function(r){return"add"+r+"7"}),Or=Ce(Ce(Ce(Ce({},Ze),ga),{},{"-":w.mi,m:w.mi,Mi:w.mi,Min:w.mi,Minor:w.mi,mi:w.mi,min:w.mi,minor:w.mi,"\xB0":w.dim,o:w.dim,0:w.dim,dim:w.dim,"dim.":w.dim,diminished:w.dim,\u00D8:w.halfDim,\u00F8:w.halfDim,h:w.halfDim,"+":w.aug,aug:w.aug,augmented:w.aug,7:w.seventh,4:w.sus,sus:w.sus,sus4:w.sus,suspended:w.sus,suspended4:w.sus,sus2:w.sus2,suspended2:w.sus2,9:w.ninth,11:w.eleventh,13:w.thirteenth,b3:w.mi,b5:w.fifthFlat,"\u266D5":w.fifthFlat,"#5":w.fifthSharp,"\u266F5":w.fifthSharp,b9:w.ninthFlat,"\u266D9":w.ninthFlat,addb9:w.ninthFlat,"add\u266D9":w.ninthFlat,"#9":w.ninthSharp,"\u266F9":w.ninthSharp,"add#9":w.ninthSharp,"add\u266F9":w.ninthSharp,"#11":w.eleventhSharp,"\u266F11":w.eleventhSharp,"add#11":w.eleventhSharp,b13:w.thirteenthFlat,"\u266D13":w.thirteenthFlat,addb13:w.thirteenthFlat,"add\u266D13":w.thirteenthFlat},va),{},{2:w.add9,add2:w.add9,add3:w.add3,add4:w.add4,addb6:w.addb6,b6:w.addb6,6:w.add6,add6:w.add6,"6/9":w.add69,69:w.add69,96:w.add69,"9/6":w.add69,add9:w.add9,add11:w.add11,add13:w.add13,bass:w.bass,omit3:w.omit3,no3:w.omit3,omit5:w.omit5,no5:w.omit5,5:w.power,alt:w.alt,"alt.":w.alt,altered:w.alt});function Tr(r,f,d){return Object.keys(r).map(d).reduce(function(b,C){return b[C]=f,b},{})}var ba=Object.keys(Or).sort(function(r,f){return f.length-r.length});let N=w,Ee={1:0,2:2,b3:3,3:4,4:5,b5:6,5:7,"#5":8,b6:8,6:9,bb7:9,b7:10,7:11,b9:13,9:14,"#9":15,11:17,"#11":18,b13:20,13:21};function Gt(r){return Aa(r)||Sa(r)||xa(r)||ya()}function ya(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xa(r,f){if(r){if(typeof r=="string")return Qe(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Qe(r,f)}}function Sa(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Aa(r){if(Array.isArray(r))return Qe(r)}function Qe(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=r[d];return b}function Oa(r,f){var d=[];return f.input.parsableDescriptor&&(d=Ta(f)),f.input.modifiers=d,f.normalized.intervals=wa(d,r),f.normalized.semitones=_a(f.normalized.intervals),f.normalized.intents=Ma(d),f}function Ta(r){var f=r.input.parsableDescriptor,d=[],b=new RegExp(ba.map(Ra).join("|"),"g"),C=f.match(b),R=f,B;if(C&&C.forEach(function(J){B=Or[J],Array.isArray(B)||(B=[B]),B.forEach(function(dt){d.includes(dt)||(d.push(dt),R=R.replace(J,""))})}),d.length===0)throw new mt(r);if(R.trim().length>0)throw new Tt(r,R);return d}function wa(r,f){return r.includes(N.power)?["1","5"]:r.includes(N.bass)?["1"]:mr()(["1"].concat(Gt(ja(r)),Gt(Ca(r)),Gt(Ea(r,f)),Gt(Fa(r)),Gt(Ia(r)),Gt(Da(r,f)),Gt(Pa(r,f)),Gt(Na(r,f)))).sort(function(d,b){return Ee[d]-Ee[b]})}function ja(r){var f=[];return r.includes(N.omit3)?[]:(W(r,[N.sus,N.sus2])||(Je(r)?r.includes(N.eleventh)||f.push("3"):f.push("b3")),r.includes(N.add3)&&f.push("3"),f)}function Ca(r){var f=[];return W(r,[N.sus,N.add4])&&f.push("4"),f}function Ea(r,f){var d=[];return r.includes(N.omit5)?[]:((W(r,[N.dim,N.halfDim,N.fifthFlat])||ue(r,f,"b5"))&&d.push("b5"),(W(r,[N.aug,N.fifthSharp])||ue(r,f,"#5"))&&d.push("#5"),!d.length&&!r.includes(N.thirteenthFlat)&&d.push("5"),d)}function Fa(r){var f=[];return W(r,[N.addb6])&&f.push("b6"),W(r,[N.add6,N.add69])&&!jr(r)&&!W(r,[N.halfDim])&&f.push("6"),f}function Ia(r){var f=[];return W(r,[N.alt])&&f.push("b7"),W(r,[N.seventh,N.halfDim])?r.includes(N.dim)?f.push("bb7"):r.includes(N.halfDim)?f.push("b7"):f.push(wr(r)):W(r,[N.ninth,N.eleventh,N.thirteenth])&&f.push(wr(r)),r.includes(N.add7)&&f.push("7"),f}function wr(r){return r.includes(N.ma)?"7":"b7"}function Da(r,f){var d=[];return W(r,[N.add69,N.ninth,N.eleventh,N.thirteenth])&&xt(r,[N.ninthFlat,N.ninthSharp])&&d.push("9"),W(r,[N.sus2,N.add9])&&d.push("9"),(W(r,[N.ninthFlat])||ue(r,f,"b9"))&&d.push("b9"),(W(r,[N.ninthSharp])||ue(r,f,"#9"))&&d.push("#9"),d}function Pa(r,f){var d=[];return(W(r,[N.thirteenth])&&!Je(r)||W(r,[N.eleventh,N.add11]))&&d.push("11"),(W(r,[N.eleventhSharp])||ue(r,f,"#11"))&&d.push("#11"),d}function Na(r,f){var d=[];return(W(r,[N.add13,N.thirteenth])||W(r,[N.add6,N.add69])&&jr(r)||W(r,[N.add6,N.add69])&&W(r,[N.halfDim]))&&d.push("13"),(W(r,[N.thirteenthFlat])||ue(r,f,"b13"))&&d.push("b13"),d}function ue(r,f,d){return r.includes(N.alt)&&f.includes(d)}function Je(r){return xt(r,[N.mi,N.dim,N.dim7,N.halfDim])}function jr(r){return W(r,[N.seventh,N.ninth,N.eleventh,N.thirteenth])}function Ra(r){return r.replace(/[.\-*+?^${}()|[\]\\]/g,"\\$&")}function _a(r){return r.map(function(f){return Ee[f]}).sort(function(f,d){return f-d})}function Ma(r){return{major:Je(r),eleventh:r.includes(N.eleventh),alt:r.includes(N.alt)}}function za(r){return $a(r)||Ba(r)||Ga(r)||La()}function La(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ga(r,f){if(r){if(typeof r=="string")return ke(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return ke(r,f)}}function Ba(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function $a(r){if(Array.isArray(r))return ke(r)}function ke(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=r[d];return b}function Ua(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=["b5","#5","b9","#9","#11","b13"],d=["english","german","latin"],b=r.notationSystems,C=b===void 0?t()(d):b,R=r.altIntervals,B=R===void 0?t()(f):R,J=r.customFilters,dt=J===void 0?[]:J;return Ha(B,f),Ka(C,d),n(dt),Ft;function Ft(Jt){var Pt=[];if(!Wa(Jt)){var be=new Y;Pt.push(qe(be))}var ye=t()(M).filter(function(Nt){return C.includes(Nt.name)}),Bt,xe,$t;if(!Pt.length)for(;ye.length&&!Bt;){$t=ye.shift(),xe=[Zt.bind(null,r),da.bind(null,$t.notes),Ue,Oa.bind(null,B),he,Bn,yr,Ct,Vt,Xe].concat(za(dt));try{Bt=e(xe,Jt),Bt?Bt.input.notationSystem=$t.name:Pt.push(Xa($t.name))}catch(Nt){Pt.push(qe(Nt,$t.name))}}return Bt||{error:Pt}}}function Ha(r,f){Cr("altIntervals",r,f,!0)}function Ka(r,f){Cr("notationSystems",r,f)}function Cr(r,f,d,b){if(!Array.isArray(f))throw new TypeError("'".concat(r,"' should be an array"));if(!b&&f.length===0)throw new TypeError("'".concat(r,"' cannot be empty"));f.forEach(function(C){if(!d.includes(C))throw new TypeError("'".concat(C,"' is not a valid value for ").concat(r))})}function Wa(r){return typeof r=="string"&&r.length>0}function Xa(r){var f=new at;return qe(f,r)}function qe(r,f){return{type:r.name,chord:r.chord,message:r.message,notationSystem:f}}let Er=Ua;function Fr(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(r);f&&(b=b.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,b)}return d}function Fe(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?Fr(Object(d),!0).forEach(function(b){Va(r,b,d[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):Fr(Object(d)).forEach(function(b){Object.defineProperty(r,b,Object.getOwnPropertyDescriptor(d,b))})}return r}function Va(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var Lt={sus2:"sus2",add2:"2",omit:"no",ma:"M",mi:"m",dim:"\xB0",aug7:"7+",eleventh:"11"};function Ya(r){var f,d=r.formatted.chordChanges;return Za(r)?(f=Lt.sus2,d=[]):Qa(r)?(f=Lt.add2,d=[]):Ja(r)?(f=Lt.aug7,d=[]):(f=r.formatted.descriptor.replace("mi",Lt.mi).replace(/[m|M]a/,Lt.ma).replace("dim",Lt.dim),ka(r)&&(f=f.replace(/7sus|9sus/,Lt.eleventh))),d=d.map(function(b){return b.replace(/[m|M]a/,Lt.ma).replace("omit",Lt.omit)}),Fe(Fe({},r),{},{formatted:Fe(Fe({},r.formatted),{},{descriptor:f,chordChanges:d})})}function Za(r){return wt(r.normalized.intervals,["1","5","9"])}function Qa(r){return wt(r.normalized.intervals,["1","3","5","9"])}function Ja(r){return wt(r.normalized.intervals,["1","3","#5","b7"])}function ka(r){return r.normalized.intents.eleventh}var qa=u(1966),ti=u.n(qa);function ei(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"none",f=arguments.length>1?arguments[1]:void 0;if(r==="none")return f;var d={max:["4","b5","#5","6","bb7","b7","7","b9","9","#9","11","#11","b13","13"],core:["4","b9","9","#9","11","#11","b13","13"]},b=ti()(f.normalized.intervals,d[r]);xt(b,["b3","3"])&&b.push(f.normalized.intents.major?"3":"b3"),xt(b,["b5","5","#5"])&&b.push("5"),f.normalized.intervals=b,f.normalized.semitones=b.map(function(R){return Ee[R]}),f.normalized.intents.eleventh=!1,f.normalized.intents.alt=!1,r==="max"&&delete f.normalized.bassNote;var C=[yr,Ct,Xe];return e(C,f)}var ri=u(3137),ni=u.n(ri),Ir=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Dr={"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},ai=ni()(Dr);function ii(r,f,d){var b=d.normalized,C=b.rootNote,R=b.bassNote,B=Nr(C);if(d.normalized.rootNote=Pr(B,r,f),d.formatted.rootNote=d.normalized.rootNote,R){var J=Nr(R);d.normalized.bassNote=Pr(J,r,f),d.formatted.bassNote=d.normalized.bassNote}return Xe(d)}function Pr(r,f,d){var b=Ir.indexOf(r),C=b+f,R=Math.floor(C/12),B=C-R*12,J=Ir[B];return d&&Dr[J]||J}function Nr(r){return ai[r]||r}var tr={german:{Ab:"As",A:"A","A#":"Ais",Bb:"Hes",B:"H",C:"C","C#":"Cis",Db:"Des",D:"D","D#":"Dis",Eb:"Es",E:"E",F:"F","F#":"Fis",Gb:"Ges",G:"G","G#":"Gis"},latin:{Ab:"Lab",A:"La","A#":"La#",Bb:"Sib",B:"Si",C:"Do","C#":"Do#",Db:"Reb",D:"Re","D#":"Re#",Eb:"Mib",E:"Mi",F:"Fa","F#":"Fa#",Gb:"Solb",G:"Sol","G#":"Sol#"}},si=Object.keys(tr);function oi(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"english",f=arguments.length>1?arguments[1]:void 0,d=r==="auto"?f.input.notationSystem:r;return d==="english"?f:si.includes(d)?(f.formatted.rootNote=tr[d][f.formatted.rootNote],f.formatted.bassNote&&(f.formatted.bassNote=tr[d][f.formatted.bassNote]),f):null}function Rr(r){return r&&r.formatted&&r.formatted.symbol?r.formatted.symbol:null}function ui(r){delete r.parserConfiguration.notationSystems;var f=t()(r),d=Rr(r),b=Er(r.parserConfiguration),C=b(d);return f.input=C.input,f}function er(r){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},er(r)}function li(r){return hi(r)||pi(r)||fi(r)||ci()}function ci(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(r,f){if(r){if(typeof r=="string")return rr(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return rr(r,f)}}function pi(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function hi(r){if(Array.isArray(r))return rr(r)}function rr(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=r[d];return b}function di(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=r.useShortNamings,d=f===void 0?!1:f,b=r.simplify,C=b===void 0?"none":b,R=r.transposeValue,B=R===void 0?0:R,J=r.harmonizeAccidentals,dt=J===void 0?!1:J,Ft=r.useFlats,Jt=Ft===void 0?!1:Ft,Pt=r.printer,be=Pt===void 0?"text":Pt,ye=r.notationSystem,Bt=ye===void 0?"english":ye,xe=r.customFilters,$t=xe===void 0?[]:xe;n($t);var Nt=[];return["max","core"].includes(C)&&Nt.push(ei.bind(null,C)),(dt||B!==0)&&Nt.push(ii.bind(null,B,Jt)),d&&Nt.push(Ya),Nt.push.apply(Nt,[oi.bind(null,Bt),Vt].concat(li($t))),vi;function vi(_r){if(!mi(_r))return null;var Mr=e(Nt,t()(_r));return be==="raw"?ui(Mr):Rr(Mr)}}var mi=function(f){return f&&er(f)==="object"&&!f.error&&f.input};let gi=di})(),g})()})});var _n=Ie(mn(),1);var Cn=Ie(jn(),1),Le=class{constructor(p){let u=/.*?(irealb(?:ook)?):\/\/([^"]*)/.exec(p),e=decodeURIComponent(u[2]).split("===");e.length>1&&(this.name=e.pop()),this.songs=e.map(i=>{try{return new Ae(i,u[1]==="irealbook")}catch(t){let a=i.split("="),n=Ae.parseTitle(a[0].trim());return console.error(`[ireal-musicxml] [${n}] ${t}`),null}}).filter(i=>i!==null).reduce((i,t)=>{if(i.length>0){let a=(0,Cn.default)(i[i.length-1].title,t.title);if(a[0][0]===0&&a.every(n=>n[0]===0||n[1].match(/^\d+$/)))return i[i.length-1].cells=i[i.length-1].cells.concat(t.cells),i}return i.push(t),i},[])}},Ge=class{constructor(){this.annots=[],this.comments=[],this.bars="",this.spacer=0,this.chord=null}},ee=class{constructor(p,u="",g=null,e=null){this.note=p,this.modifiers=u,this.over=g,this.alternate=e}},Ae=class s{constructor(p,u=!1){if(this.cells=[],this.musicXml="",!p){this.title="",this.composer="",this.style="",this.key="",this.transpose=0,this.groove="",this.bpm=0,this.repeats=0;return}let g=p.split("=");if(u)this.title=s.parseTitle(g[0].trim()),this.composer=s.parseComposer(g[1].trim()),this.style=g[2].trim(),this.key=g[3],this.cells=this.parse(g[5]);else{this.title=s.parseTitle(g[0].trim()),this.composer=s.parseComposer(g[1].trim()),this.style=g[3].trim(),this.key=g[4],this.transpose=+g[5]||0,this.groove=g[7],this.bpm=+g[8],this.repeats=+g[9]||3;let e=g[6].split("1r34LbKcu7");this.cells=this.parse(ki(e[1]))}}static chordRegex=/^([A-G][b#]?)((?:sus|alt|add|[+\-^\dhob#])*)(\*.+?\*)*(\/[A-G][#b]?)?(\(.*?\))?/;static chordRegex2=/^([ Wp])()()(\/[A-G][#b]?)?(\(.*?\))?/;static regExps=[/^\*[a-zA-Z]/,/^T\d\d/,/^N./,/^<.*?>/,s.chordRegex,s.chordRegex2];parse(p){let u=p.trim(),g=[];for(;u;){let a=!1;for(let n=0;n<s.regExps.length;n++){let o=s.regExps[n].exec(u);if(o){a=!0,o.length<=2?(g.push(o[0]),u=u.substr(o[0].length)):(g.push(o),u=u.substr(o[0].length));break}}a||(u[0]!==","&&g.push(u[0]),u=u.substr(1))}let e=[],i=this.newCell(e),t=null;for(let a=0;a<g.length;a++){let n=g[a];switch(n instanceof Array&&(i.chord=this.parseChord(n),n=" "),n[0]){case"{":case"[":t&&(t.bars+=")",t=null),i.bars=n,n=null;break;case"|":t&&(t.bars+=")",t=null),i.bars="(",n=null;break;case"]":case"}":case"Z":t&&(t.bars+=n,t=null),n=null;break;case"n":i.chord=new ee(n[0]);break;case",":n=null;break;case"S":case"T":case"Q":case"N":case"U":case"s":case"l":case"f":case"*":i.annots.push(n),n=null;break;case"Y":i.spacer++,n=null,t=null;break;case"r":case"x":case"W":i.chord=new ee(n);break;case"<":n=n.substr(1,n.length-2),i.comments.push(n),n=null;break;default:}n&&a<g.length-1&&(t=i,i=this.newCell(e))}return e}static parseTitle(p){return p.replace(/(.*)(, )(A|The)$/g,"$3 $1")}static parseComposer(p){let u=p.split(/(\s+)/);return u.length==3?u[2]+u[1]+u[0]:p}parseChord(p){var u=p[1]||" ",g=p[2]||"",e=p[3]||"";e&&(g+=e.substr(1,e.length-2));var i=p[4]||"";i[0]==="/"&&(i=i.substr(1));var t=p[5]||null;if(t&&(p=s.chordRegex.exec(t.substr(1,t.length-2)),p?t=this.parseChord(p):t=null),u===" "&&!t&&!i)return null;if(i){var a=i[1]==="#"||i[1]==="b"?2:1;i=new ee(i.substr(0,a),i.substr(a),null,null)}else i=null;return new ee(u,g,i,t)}newCell(p){var u=new Ge;return p.push(u),u}};function ki(s){let p="",u;for(;s.length>51;)u=s.substring(0,50),s=s.substring(50),p=p+qi(u);return p=p+s,p=p.replace(/Kcl/g,"| x").replace(/LZ/g," |").replace(/XyQ/g,"   "),p}function qi(s){let p=s.split("");for(let u=0;u<5;u++)p[49-u]=s[u],p[u]=s[49-u];for(let u=10;u<24;u++)p[49-u]=s[u],p[u]=s[49-u];return p.join("")}var Nn=Ie(En(),1),Rn=Ie(Fn(),1);var Te={name:"ireal-musicxml",version:"2.0.3",description:"iReal Pro to MusicXML converter.",author:"Karim Ratib <karim.ratib@gmail.com> (https://github.com/infojunkie)",license:"GPL-3.0-only",repository:{type:"git",url:"https://github.com/infojunkie/ireal-musicxml"},homepage:"https://github.com/infojunkie/ireal-musicxml",type:"module",types:"./build/ireal-musicxml.d.ts",files:["LICENSE.txt","build/*","src/*"],bin:{"ireal-musicxml":"./src/cli/cli.js"},exports:{import:"./build/ireal-musicxml.js",require:"./build/ireal-musicxml.cjs"},scripts:{build:"npm run build:esm && npm run build:cjs && npm run build:d.ts","build:d.ts":"cp src/types/* build/","build:esm":"esbuild src/lib/index.js --bundle --format=esm --minify --sourcemap --outfile=build/ireal-musicxml.js","build:cjs":"esbuild src/lib/index.js --bundle --platform=node --packages=external --minify --sourcemap --outfile=build/ireal-musicxml.cjs",test:"npm run build && npm run test:lint && npm run test:spec && npm run test:ts","test:spec":'node --test --test-name-pattern="${TEST:-.*}"',"test:ts":"node --test --loader=ts-node/esm --require ts-node/register test/*.spec.ts","test:lint":"eslint src --fix"},devDependencies:{"@types/node":"^22.7.7","@xmldom/xmldom":"^0.8.0",esbuild:"0.24.0",eslint:"^9.13.0",resolve:"^1.22.8","sanitize-filename":"^1.6.3","ts-node":"^10.9.2",typescript:"^4.9.5","validate-with-xmllint":"^1.2.0","xpath.js":"^1.1.0"},dependencies:{"chord-symbol":"^3.0.0","fast-diff":"^1.2.0",jstoxml:"^2.0.6",promise:"^8.1.0"}};var we=class{static name=Te.name;static version=Te.version;static author=Te.author;static description=Te.description};var{chordParserFactory:es,chordRendererFactory:rs}=Rn.default,tt=class{static Debug=0;static Info=1;static Warn=2;static Error=3;static None=4},In="4.0",Dn=7,Pn=40,$e=class s{static defaultOptions={divisions:768,notation:"rhythmic",step:"B",octave:4,notehead:"slash",noteheadSize:"large",date:!0,clef:!1,keySignature:!1,pageWidth:210,pageHeight:297,pageMargin:15,logLevel:tt.Warn};static sequenceAttributes=["divisions","key","time","staves","part-symbol","instruments","clef","staff-details","transpose","directive","measure-style"];static sequenceNote=["cue","pitch","rest","unpitched","duration","tie","voice","type","dot","accidental","time-modification","stem","notehead","notehead-text","staff","beam","notations","lyric","play"];static sequenceNotations=["accidental-mark","arpeggiate","articulations","dynamics","fermata","glissando","non-arpeggiate","ornaments","other-notation","slide","slur","technical","tied","tuplet"];static sequenceBarline=["bar-style","footnote","level","wavy-line","segno","coda","fermata","ending","repeat"];static mapAlter={"#":1,b:-1};static mapFifthsToAlters={sharp:["F","C","G","D","A","E","B"],flat:["B","E","A","D","G","C","F"]};static mapRepeats={"D.C. al Coda":s.prototype.convertDaCapo,"D.C. al Fine":s.prototype.convertDaCapo,"D.C. al 1st End.":s.prototype.convertDaCapo,"D.C. al 2nd End.":s.prototype.convertDaCapo,"D.C. al 3rd End.":s.prototype.convertDaCapo,"D.S. al Coda":s.prototype.convertDalSegno,"D.S. al Fine":s.prototype.convertDalSegno,"D.S. al 1st End.":s.prototype.convertDalSegno,"D.S. al 2nd End.":s.prototype.convertDalSegno,"D.S. al 3rd End.":s.prototype.convertDalSegno,Fine:s.prototype.convertFine,"3x":s.prototype.convertRepeatNx,"4x":s.prototype.convertRepeatNx,"5x":s.prototype.convertRepeatNx,"6x":s.prototype.convertRepeatNx,"7x":s.prototype.convertRepeatNx,"8x":s.prototype.convertRepeatNx};static convert(p,u={}){let g=Object.assign({},this.defaultOptions,u);return new s(p,g).convert()}constructor(p,u){this.song=p,this.options=u,this.time={beats:4,beatType:4},this.fifths=null,this.measure=null,this.barRepeat=0,this.codas=[],this.repeats=0,this.emptyCells=0,this.emptyCellNewSystem=!1,this.cellWidth=(this.options.pageWidth-2*this.options.pageMargin)/16,this.parseChord=es({altIntervals:["b5","b9"]}),this.renderChord=rs({useShortNamings:!0,printer:"raw"})}convert(){return Nn.default.toXML(this.convertSong(),{header:`
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE score-partwise PUBLIC "-//Recordare//DTD MusicXML ${In} Partwise//EN" "http://www.musicxml.org/dtds/partwise.dtd">
      `.trim(),indent:"  "})}convertSong(){return{_name:"score-partwise",_attrs:{version:In},_content:[{work:{"work-title":this.song.title}},{identification:[{_name:"creator",_attrs:{type:"composer"},_content:this.song.composer},{encoding:[{software:`@infojunkie/ireal-musicxml ${we.version}`},{...this.options.date&&{"encoding-date":s.convertDate(new Date)}},{_name:"supports",_attrs:{element:"accidental",type:"no"}},{_name:"supports",_attrs:{element:"transpose",type:"no"}},{_name:"supports",_attrs:{attribute:"new-page",element:"print",type:"yes",value:"yes"}},{_name:"supports",_attrs:{attribute:"new-system",element:"print",type:"yes",value:"yes"}}]}]},{defaults:{scaling:{millimeters:Dn,tenths:Pn},"page-layout":{"page-height":s._mmToTenths(this.options.pageHeight),"page-width":s._mmToTenths(this.options.pageWidth),"page-margins":{"left-margin":s._mmToTenths(this.options.pageMargin,4),"right-margin":s._mmToTenths(this.options.pageMargin,4),"top-margin":s._mmToTenths(this.options.pageMargin,4),"bottom-margin":s._mmToTenths(this.options.pageMargin,4)}}}},{"part-list":{_name:"score-part",_attrs:{id:"P1"},_content:{_name:"part-name",_attrs:{"print-object":"no"},_content:"Lead Sheet"}}},{_name:"part",_attrs:{id:"P1"},_content:this.convertMeasures()}]}}static convertDate(p){return new Date(p.getTime()-p.getTimezoneOffset()*6e4).toISOString().split("T")[0]}static Measure=class{constructor(p){this.body={_name:"measure",_attrs:{number:p},_content:[]},this.attributes=[],this.chords=[],this.barlines=[],this.barEnding=null}number(){return this.body._attrs.number}assemble(){return this.attributes.length&&this.body._content.push({attributes:s.reorderSequence(this,this.attributes,s.sequenceAttributes)}),this.chords.forEach(p=>{this.body._content.push({harmony:p.harmony},...p.notes.map(u=>({note:u})))}),this.barlines[0]._content=s.reorderSequence(this,this.barlines[0]._content,s.sequenceBarline),this.body._content.splice(1,0,this.barlines[0]),this.barlines[1]._content=s.reorderSequence(this,this.barlines[1]._content,s.sequenceBarline),this.body._content.push(this.barlines[1]),this.body}};static Chord=class{constructor(p,u,g){this.harmony=p,this.notes=u,this.ireal=g,this.spaces=0,this.fermata=!1}};convertMeasures(){let p=e=>e>0&&e%16===0,u=this.song.cells.reduce((e,i,t)=>{if((i.bars.match(/\(|\{|\[/)||!this.measure&&(i.chord||i.annots.length||i.comments.length))&&(this.measure&&(this._log(tt.Warn,"Starting a new measure over existing measure. Closing current measure first."),this.measure.barlines.push(this.convertBarline("","right")),this.adjustChordsDuration(this.measure)&&e.push(this.measure)),this.measure=new s.Measure(e.length+1,this.options),e.length||(this.measure.attributes.push({divisions:this.options.divisions},{_name:"clef",_attrs:[{"print-object":this.options.clef?"yes":"no"}],_content:[{sign:"G"},{line:2}]},{"staff-details":{"staff-lines":0}},{"measure-style":[{_name:"slash",_attrs:{type:"start","use-stems":this.options.notation==="rhythmic"?"yes":"no"}}]},this.convertKey()),this.song.bpm&&this.measure.body._content.push(this.convertTempo(this.song.bpm)),this.measure.body._content.push(this.convertStyleAndGroove(this.song.style,this.song.groove))),this.measure.barlines.push(this.convertBarline(i.bars,"left",p(t)||this.emptyCellNewSystem?"regular":void 0)),this.barRepeat&&(this.measure.chords=[...e[e.length-this.barRepeat-1].chords])),!this.measure)return(i.chord||i.annots.length||i.comments.length||i.bars&&i.bars!==")")&&this._log(tt.Warn,`Found non-empty orphan cell ${JSON.stringify(i)}`,e[e.length-1]),this.emptyCells++,p(t)&&(this.emptyCellNewSystem=!0),e;if((p(t)||this.emptyCellNewSystem)&&this.measure.body._content.splice(0,0,{_name:"print",_attrs:{"new-system":"yes"},_content:{...this.emptyCellNewSystem&&{"system-layout":{"system-margins":[{"left-margin":s._mmToTenths(this.cellWidth*this.emptyCells)},{"right-margin":"0.00"}]}}}}),!this.emptyCellNewSystem&&this.emptyCells>0&&(this.measure.body._content[0]?._name==="print"&&this.measure.body._content[0]._attrs?.["new-system"]==="yes"?e[e.length-1].body._content.splice(0,0,{_name:"print",_content:{"system-layout":{"system-margins":[{"left-margin":"0.00"},{"right-margin":s._mmToTenths(this.cellWidth*this.emptyCells)}]}}}):this.measure.body._content.splice(0,0,{_name:"print",_content:{"measure-layout":{"measure-distance":s._mmToTenths(this.cellWidth*this.emptyCells)}}})),this.emptyCellNewSystem=!1,this.emptyCells=0,i.chord)switch(i.chord.note){case"x":{this.barRepeat=1,this.measure.chords=[...e[e.length-this.barRepeat].chords];break}case"r":{this.barRepeat=2,this.measure.chords=[...e[e.length-this.barRepeat].chords];break}case"p":if(this.measure.chords.length){this.measure.chords[this.measure.chords.length-1].spaces++;break}case"W":{let a=this.measure;if(a.chords.length||(a=e.slice().reverse().find(n=>n.chords.length),a||this._log(tt.Error,`Cannot find any measure with chords prior to ${JSON.stringify(i.chord)}`)),a){let n=a.chords[a.chords.length-1].ireal;n.over=i.chord.over,n.alternate=i.chord.alternate,this.measure.chords.push(this.convertChord(n))}break}case" ":{this._log(tt.Warn,`Unhandled empty/alternate chord ${JSON.stringify(i.chord)}`);break}default:this.measure.chords.push(this.convertChord(i.chord))}else this.barRepeat||this.measure.chords.length&&this.measure.chords[this.measure.chords.length-1].spaces++;return i.annots.forEach(a=>{switch(a[0]){case"*":{let n=a.slice(1);this.measure.body._content.push(this.convertSection(n));break}case"T":{let n=a.slice(1);this.measure.attributes.push(this.convertTime(n));break}case"S":{this.measure.body._content.push(this.convertSegno());break}case"N":{let n=parseInt(a.slice(1));if(n<1&&(n=e.slice().reverse().find(c=>!!c.barEnding)?.barEnding??1),this.measure.barlines[0]._content.push(this.convertEnding(n,"start")),n>1){e[e.length-1].barlines[1]._content.push(this.convertEnding(n-1,"stop"));let o=e.slice().reverse().find(c=>c.barEnding===n-1);if(!o)this._log(tt.Error,`Cannot find ending ${n-1} in right barline of any measure`);else{let c=o.barlines[1]._content.findIndex(h=>!!h&&h._name==="ending");c===-1&&this._log(tt.Error,`Cannot find ending ${n-1} in right barline`,o),delete o.barlines[1]._content[c]}}this.measure.barEnding=n;break}case"Q":{this.measure.body._content.push(this.convertToCoda()),this.codas.push(this.measure);break}case"l":case"s":break;case"f":{this.measure.chords[this.measure.chords.length-1].fermata=!0;break}case"U":{this.measure.body._content.push(this.convertFine("END"));break}default:this._log(tt.Warn,`Unhandled annotation "${a}"`)}}),i.comments.map(a=>a.trim()).forEach(a=>{let n=this._map(s.mapRepeats,a);n?this.measure.body._content.push(n.call(this,a)):this.measure.body._content.push(this.convertComment(a))}),i.bars.match(/\)|\}|\]|Z/)&&this.measure.chords.length&&(this.measure.barlines.push(this.convertBarline(i.bars,"right")),this.measure.barEnding&&this.measure.barlines[1]._content.push(this.convertEnding(this.measure.barEnding,"discontinue")),this.adjustChordsDuration(this.measure)&&e.push(this.measure),this.measure=null,this.barRepeat&&this.barRepeat--),e},[]),g=this.song.cells.length%16-this.emptyCells;if(g>0&&u.length>0&&u[u.length-1].body._content.splice(0,0,{_name:"print",_content:{"system-layout":{"system-margins":[{"left-margin":"0.00"},{"right-margin":s._mmToTenths(this.cellWidth*g)}]}}}),this.codas.length){let e=this.codas[this.codas.length-1],i=e.body._content.findIndex(t=>t._name==="direction"&&Array.isArray(t._content)&&t._content.some(a=>a._name==="sound"&&Object.keys(a._attrs).includes("tocoda")));i===-1&&this._log(tt.Warn,"Cannot find sound direction",e),e.body._content[i]=this.convertCoda()}return u.map(e=>e.assemble())}static reorderSequence(p,u,g){return u.filter(e=>Object.keys(e).length).sort((e,i)=>{let t=Object.keys(e)[0];t==="_name"&&(t=e[t]);let a=Object.keys(i)[0];a==="_name"&&(a=i[a]);let n=g.indexOf(t),o=g.indexOf(a);return n===-1&&this._log(tt.Warn,`Unrecognized element "${t}"`,p),o===-1&&this._log(tt.Warn,`Unrecognized element "${a}"`,p),n-o})}convertRepeatNx(p){let u=null;(u=p.match(/(\d+)x/))!==null&&(this.repeats=u[1])}convertFine(p){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:p}},{_name:"sound",_attrs:{fine:"yes"}}]}}convertDaCapo(p){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:p}},{_name:"sound",_attrs:{dacapo:"yes"}}]}}convertDalSegno(p){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:p}},{_name:"sound",_attrs:{dalsegno:"yes"}}]}}convertComment(p){return{_name:"direction",_attrs:{placement:p[0]==="*"?"above":"below"},_content:{"direction-type":{words:p[0]==="*"?p.slice(3):p}}}}convertEnding(p,u){return{_name:"ending",_attrs:{number:p,type:u},_content:`${p}.`}}convertBarline(p,u,g=void 0){let e=u==="left"?"none":"regular",i=null;return p.match(/\[|\]/)?e="light-light":p.match(/Z/)?e="light-heavy":p.match(/\{|\}/)&&(e=u==="left"?"heavy-light":"light-heavy",i=u==="left"?"forward":"backward"),i==="forward"&&(this.repeats=2),{_name:"barline",_attrs:{location:u},_content:[{"bar-style":g??e},{...i&&{_name:"repeat",_attrs:{direction:i,...i==="backward"&&{times:this.repeats}}}}]}}convertSection(p){return p==="i"&&(p="Intro"),{_name:"direction",_attrs:{placement:"above"},_content:{"direction-type":{rehearsal:p}}}}convertSegno(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"segno"}},{_name:"sound",_attrs:{segno:"segno"}}]}}convertCoda(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"coda"}},{_name:"sound",_attrs:{coda:"coda"}}]}}convertToCoda(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{words:"To Coda"}},{_name:"sound",_attrs:{tocoda:"coda"}}]}}convertTempo(p){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{_name:"metronome",_attrs:{parentheses:"no"},_content:[{"beat-unit":this.calculateChordDuration(1)[0].type},{"per-minute":p}]}]},{_name:"sound",_attrs:{tempo:p}}]}}convertTime(p){let u=parseInt(p[0]),g=parseInt(p[1]);return p==="12"&&(u=12,g=8),this.time={beats:u,beatType:g},{time:[{beats:u},{"beat-type":g}]}}adjustChordsDuration(p){if(p.chords.length>this.time.beats)return this._log(tt.Error,`Too many chords (${p.chords.length} out of ${this.time.beats})`,p),!0;let u=p.chords.reduce((g,e)=>g+1+e.spaces,0);if(!u)return this._log(tt.Warn,"No chord found. Skipping current measure.",p),!1;if(u>this.time.beats){let g=0;for(;u>this.time.beats;)p.chords[g].spaces>0&&(p.chords[g].spaces--,u--),g=(g+1)%p.chords.length}else{let g=0;for(;u<this.time.beats;)p.chords[g].spaces++,u++,g=(g+1)%p.chords.length}return p.chords=p.chords.map(g=>(g.notes=this.calculateChordDuration(1+g.spaces).map((e,i,t)=>this.convertChordNote(e,i===t.length-1?g.fermata:!1,this.options.notation==="rhythmic"&&t.length>1?i>0?"stop":"start":null)),g)),!0}calculateChordDuration(p){let u={1:[{t:"eighth",d:0,b:1}],2:[{t:"quarter",d:0,b:2}],3:[{t:"quarter",d:1,b:3}],4:[{t:"half",d:0,b:4}],5:[{t:"quarter",d:1,b:3},{t:"quarter",d:0,b:2}],6:[{t:"half",d:1,b:6}],7:[{t:"half",d:2,b:7}],8:[{t:"whole",d:0,b:8}],9:[{t:"half",d:1,b:6},{t:"quarter",d:1,b:3}],10:[{t:"half",d:1,b:6},{t:"half",d:0,b:4}],11:[{t:"half",d:2,b:7},{t:"half",d:0,b:4}],12:[{t:"whole",d:1,b:12}],13:[{t:"half",d:2,b:7},{t:"half",d:1,b:6}],14:[{t:"whole",d:2,b:14}],15:[{t:"whole",d:0,b:8},{t:"half",d:2,b:7}]};if(this.options.notation==="slash"){let g=8/this.time.beatType;return Array(p).fill(this._map(u,g,[],`Unexpected beat count 1 for time signature ${this.time.beats}/${this.time.beatType}`).map(e=>({duration:e.b*this.options.divisions/2,type:e.t,dots:e.d}))[0])}else{let g=p*8/this.time.beatType;return this._map(u,g,[],`Unexpected beat count ${p} for time signature ${this.time.beats}/${this.time.beatType}`).map(e=>({duration:e.b*this.options.divisions/2,type:e.t,dots:e.d}))}}convertChordNote(p,u=!1,g=null){let e=s.mapFifthsToAlters[this.fifths>=0?"sharp":"flat"].slice(0,Math.abs(this.fifths)),i={_name:"pitch",_content:[{step:this.options.step},{alter:e.includes(this.options.step)?this.fifths>0?1:-1:0},{octave:this.options.octave}]},t=[];return u&&t.push({_name:"fermata"}),g&&t.push({_name:"tied",_attrs:{type:g}}),s.reorderSequence(this.measure,[i,{_name:"cue"},{_name:"notehead",_content:this.options.notehead,_attrs:[{"font-size":this.options.noteheadSize}]},{duration:p.duration},{voice:1},{_name:"type",_attrs:{size:"full"},_content:p.type},{...t.length&&{notations:s.reorderSequence(this.measure,t,s.sequenceNotations)}}].concat(Array(p.dots).fill({_name:"dot"})),s.sequenceNote)}convertChordDegree(p,u,g){return{_name:"degree",_attrs:{"print-object":"no"},_content:[{"degree-value":p},{"degree-alter":g},{"degree-type":u}]}}convertChordSymbol(p){let u=this.renderChord(this.parseChord(`${p.note}${p.modifiers}`));if(!u)return this._log(tt.Warn,`Unrecognized chord "${p.note}${p.modifiers}"`),{rootStep:null,rootAlter:null,chordKind:null,chordDegrees:[],chordText:null};let g=u.input.rootNote[0],e=this._map(s.mapAlter,u.input.rootNote[1]||null,null,`Unrecognized accidental in chord "${u.input.rootNote}"`),i=u.formatted.descriptor+u.formatted.chordChanges.join(""),t={major:"major",major6:"major-sixth",major7:"major-seventh",dominant7:"dominant",minor:"minor",minor6:"minor-sixth",minor7:"minor-seventh",minorMajor7:"major-minor",augmented:"augmented",diminished:"diminished",diminished7:"diminished-seventh",power:"power"},a=this._map(t,u.normalized.quality,"",`Unrecognized chord quality "${u.normalized.quality}"`);if(u.normalized.extensions.length){let o=Math.max(...u.normalized.extensions.map(h=>parseInt(h))).toString(),c={9:"-ninth",11:"-11th",13:"-13th"};a=a.split("-")[0]+this._map(c,o,"",`Unhandled extension ${o}`),a==="dominant-11th"&&(u.normalized.isSuspended=!1)}[{intervals:["1","4","5"],kind:"suspended-fourth",strict:!0},{intervals:["1","5","9"],kind:"suspended-second",strict:!0},{intervals:["1","b3","b5","b7"],kind:"half-diminished",strict:!0},{intervals:["1","3","#5","b7"],kind:"augmented-seventh",strict:!1}].some(o=>{if((!o.strict||u.normalized.intervals.length===o.intervals.length)&&o.intervals.every((c,h)=>c===u.normalized.intervals[h]))return a=o.kind,o.intervals.forEach(c=>{u.normalized.alterations=u.normalized.alterations.filter(h=>h===c),u.normalized.adds=u.normalized.adds.filter(h=>h===c),u.normalized.omits=u.normalized.omits.filter(h=>h===c)}),u.normalized.intervals.forEach(c=>{o.intervals.includes(c)||u.normalized.adds.push(c)}),!0});let n=[];return u.normalized.isSuspended&&!a.includes("suspended")&&(u.normalized.adds.push("4"),u.normalized.adds.includes("3")||u.normalized.omits.push("3")),u.normalized.alterations.forEach(o=>{let c=o.slice(1);n.push(this.convertChordDegree(c,c==="5"||u.normalized.extensions.includes(c)?"alter":"add",this._map(s.mapAlter,o[0],0,`Unrecognized alter symbol in "${o}"`)))}),u.normalized.adds.forEach(o=>{let c=Object.keys(s.mapAlter).includes(o[0])?o[0]:null,h=c?o.slice(1):o;n.push(this.convertChordDegree(h,"add",this._map(s.mapAlter,c,0,`Unrecognized alter symbol in "${o}"`)))}),u.normalized.omits.forEach(o=>{let c=Object.keys(s.mapAlter).includes(o[0])?o[0]:null,h=c?o.slice(1):o;n.push(this.convertChordDegree(h,"subtract",this._map(s.mapAlter,c,0,`Unrecognized alter symbol in "${o}"`)))}),{rootStep:g,rootAlter:e,chordKind:a,chordDegrees:n,chordText:i}}convertChord(p){let u=null;if(p.note==="n")u=[{root:[{_name:"root-step",_attrs:{text:""},_content:this.options.step}]},{_name:"kind",_attrs:{text:"N.C."},_content:"none"}];else{let{rootStep:g,rootAlter:e,chordKind:i,chordDegrees:t,chordText:a}=this.convertChordSymbol(p),n=p.over?[{"bass-step":p.over.note[0]},{...p.over.note[1]&&{"bass-alter":this._map(s.mapAlter,p.over.note[1],null,`Unrecognized accidental in bass note "${p.over.note}"`)}}]:null;u=[{root:[{"root-step":g},{...e&&{"root-alter":e}}]},{_name:"kind",_attrs:{text:a,"use-symbols":"no"},_content:i},{...n&&{bass:n}}].concat(t)}return p.alternate&&this._log(tt.Warn,`Unhandled alternate chord ${JSON.stringify(p.alternate)}`),new s.Chord(u,this.calculateChordDuration(1).map(g=>this.convertChordNote(g)),p)}convertKey(){let p={C:0,G:1,D:2,A:3,E:4,B:5,"F#":6,"C#":7,F:-1,Bb:-2,Eb:-3,Ab:-4,Db:-5,Gb:-6,Cb:-7,"A-":0,"E-":1,"B-":2,"F#-":3,"C#-":4,"G#-":5,"D#-":6,"A#-":7,"D-":-1,"G-":-2,"C-":-3,"F-":-4,"Bb-":-5,"Eb-":-6,"Ab-":-7};return this.fifths=this._map(p,this.song.key,0,`Unrecognized key signature "${this.song.key}"`),{_name:"key",_attrs:[{"print-object":this.options.keySignature?"yes":"no"}],_content:[{fifths:this.fifths},{mode:this.song.key.slice(-1)==="-"?"minor":"major"}]}}convertStyleAndGroove(p,u){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{words:p}]},{sound:[{play:[{_name:"other-play",_attrs:{type:"groove"},_content:u||p}]}]}]}}_log(p,u,g=this.measure){if(p<this.options.logLevel)return;let e=`[ireal-musicxml] [${this.song.title}${g?"#"+g.number():""}] ${u}`,i="warn";switch(p){case tt.Debug:i="debug";break;case tt.Info:i="info";break;case tt.Warn:i="warn";break;case tt.Error:i="error";break}console[i](e)}_map(p,u,g,e,i=tt.Warn,t=this.measure){return u?u in p?p[u]:(e&&this._log(i,e,t),g||null):g}static _mmToTenths(p,u=2){let g=p*Pn/Dn,e=Math.pow(10,u);return Math.round(g*e)/e}};function ns(s,p={}){let u=new Le(s);return u.songs.forEach(g=>{g.musicXml=$e.convert(g,p)}),u}async function Es(s,p={}){return new _n.default(u=>u(ns(s,p)))}export{Ge as Cell,ee as Chord,$e as Converter,tt as LogLevel,Le as Playlist,Ae as Song,we as Version,Es as convert,ns as convertSync};
//# sourceMappingURL=ireal-musicxml.js.map
