var vs=Object.create;var zr=Object.defineProperty;var ys=Object.getOwnPropertyDescriptor;var xs=Object.getOwnPropertyNames;var Ss=Object.getPrototypeOf,As=Object.prototype.hasOwnProperty;var bt=(i,p)=>()=>(p||i((p={exports:{}}).exports,p),p.exports);var Os=(i,p,c,g)=>{if(p&&typeof p=="object"||typeof p=="function")for(let e of xs(p))!As.call(i,e)&&e!==c&&zr(i,e,{get:()=>p[e],enumerable:!(g=ys(p,e))||g.enumerable});return i};var Ie=(i,p,c)=>(c=i!=null?vs(Ss(i)):{},Os(p||!i||!i.__esModule?zr(c,"default",{value:i,enumerable:!0}):c,i));var ar=bt((si,Hr)=>{"use strict";Hr.exports=nr;function nr(i){_t.length||(De(),Ur=!0),_t[_t.length]=i}var _t=[],Ur=!1,De,Rt=0,Ts=1024;function Lr(){for(;Rt<_t.length;){var i=Rt;if(Rt=Rt+1,_t[i].call(),Rt>Ts){for(var p=0,c=_t.length-Rt;p<c;p++)_t[p]=_t[p+Rt];_t.length-=Rt,Rt=0}}_t.length=0,Rt=0,Ur=!1}var Gr=typeof global<"u"?global:self,Br=Gr.MutationObserver||Gr.WebKitMutationObserver;typeof Br=="function"?De=ws(Lr):De=$r(Lr);nr.requestFlush=De;function ws(i){var p=1,c=new Br(i),g=document.createTextNode("");return c.observe(g,{characterData:!0}),function(){p=-p,g.data=p}}function $r(i){return function(){var c=setTimeout(e,0),g=setInterval(e,50);function e(){clearTimeout(c),clearInterval(g),i()}}}nr.makeRequestCallFromTimer=$r});var kt=bt((ii,Xr)=>{"use strict";var js=ar();function Ne(){}var ce=null,fe={};function Cs(i){try{return i.then}catch(p){return ce=p,fe}}function Es(i,p){try{return i(p)}catch(c){return ce=c,fe}}function Fs(i,p,c){try{i(p,c)}catch(g){return ce=g,fe}}Xr.exports=vt;function vt(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof i!="function")throw new TypeError("Promise constructor's argument is not a function");this._x=0,this._y=0,this._z=null,this._A=null,i!==Ne&&Wr(i,this)}vt._B=null;vt._C=null;vt._D=Ne;vt.prototype.then=function(i,p){if(this.constructor!==vt)return Is(this,i,p);var c=new vt(Ne);return Pe(this,new Kr(i,p,c)),c};function Is(i,p,c){return new i.constructor(function(g,e){var s=new vt(Ne);s.then(g,e),Pe(i,new Kr(p,c,s))})}function Pe(i,p){for(;i._y===3;)i=i._z;if(vt._B&&vt._B(i),i._y===0){if(i._x===0){i._x=1,i._A=p;return}if(i._x===1){i._x=2,i._A=[i._A,p];return}i._A.push(p);return}Ds(i,p)}function Ds(i,p){js(function(){var c=i._y===1?p.onFulfilled:p.onRejected;if(c===null){i._y===1?sr(p.promise,i._z):le(p.promise,i._z);return}var g=Es(c,i._z);g===fe?le(p.promise,ce):sr(p.promise,g)})}function sr(i,p){if(p===i)return le(i,new TypeError("A promise cannot be resolved with itself."));if(p&&(typeof p=="object"||typeof p=="function")){var c=Cs(p);if(c===fe)return le(i,ce);if(c===i.then&&p instanceof vt){i._y=3,i._z=p,ir(i);return}else if(typeof c=="function"){Wr(c.bind(p),i);return}}i._y=1,i._z=p,ir(i)}function le(i,p){i._y=2,i._z=p,vt._C&&vt._C(i,p),ir(i)}function ir(i){if(i._x===1&&(Pe(i,i._A),i._A=null),i._x===2){for(var p=0;p<i._A.length;p++)Pe(i,i._A[p]);i._A=null}}function Kr(i,p,c){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof p=="function"?p:null,this.promise=c}function Wr(i,p){var c=!1,g=Fs(i,function(e){c||(c=!0,sr(p,e))},function(e){c||(c=!0,le(p,e))});!c&&g===fe&&(c=!0,le(p,ce))}});var Zr=bt((oi,Yr)=>{"use strict";var Vr=kt();Yr.exports=Vr;Vr.prototype.done=function(i,p){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(g){setTimeout(function(){throw g},0)})}});var Jr=bt((ui,Qr)=>{"use strict";var Re=kt();Qr.exports=Re;Re.prototype.finally=function(i){return this.then(function(p){return Re.resolve(i()).then(function(){return p})},function(p){return Re.resolve(i()).then(function(){throw p})})}});var en=bt((li,tn)=>{"use strict";var k=kt();tn.exports=k;var Ps=qt(!0),Ns=qt(!1),Rs=qt(null),_s=qt(void 0),Ms=qt(0),zs=qt("");function qt(i){var p=new k(k._D);return p._y=1,p._z=i,p}k.resolve=function(i){if(i instanceof k)return i;if(i===null)return Rs;if(i===void 0)return _s;if(i===!0)return Ps;if(i===!1)return Ns;if(i===0)return Ms;if(i==="")return zs;if(typeof i=="object"||typeof i=="function")try{var p=i.then;if(typeof p=="function")return new k(p.bind(i))}catch(c){return new k(function(g,e){e(c)})}return qt(i)};var pe=function(i){return typeof Array.from=="function"?(pe=Array.from,Array.from(i)):(pe=function(p){return Array.prototype.slice.call(p)},Array.prototype.slice.call(i))};k.all=function(i){var p=pe(i);return new k(function(c,g){if(p.length===0)return c([]);var e=p.length;function s(a,n){if(n&&(typeof n=="object"||typeof n=="function"))if(n instanceof k&&n.then===k.prototype.then){for(;n._y===3;)n=n._z;if(n._y===1)return s(a,n._z);n._y===2&&g(n._z),n.then(function(h){s(a,h)},g);return}else{var o=n.then;if(typeof o=="function"){var l=new k(o.bind(n));l.then(function(h){s(a,h)},g);return}}p[a]=n,--e===0&&c(p)}for(var t=0;t<p.length;t++)s(t,p[t])})};function or(i){return{status:"fulfilled",value:i}}function kr(i){return{status:"rejected",reason:i}}function Ls(i){if(i&&(typeof i=="object"||typeof i=="function")){if(i instanceof k&&i.then===k.prototype.then)return i.then(or,kr);var p=i.then;if(typeof p=="function")return new k(p.bind(i)).then(or,kr)}return or(i)}k.allSettled=function(i){return k.all(pe(i).map(Ls))};k.reject=function(i){return new k(function(p,c){c(i)})};k.race=function(i){return new k(function(p,c){pe(i).forEach(function(g){k.resolve(g).then(p,c)})})};k.prototype.catch=function(i){return this.then(null,i)};function qr(i){if(typeof AggregateError=="function")return new AggregateError(i,"All promises were rejected");var p=new Error("All promises were rejected");return p.name="AggregateError",p.errors=i,p}k.any=function(p){return new k(function(c,g){var e=pe(p),s=!1,t=[];function a(o){s||(s=!0,c(o))}function n(o){t.push(o),t.length===e.length&&g(qr(t))}e.length===0?g(qr(t)):e.forEach(function(o){k.resolve(o).then(a,n)})})}});var sn=bt((ci,an)=>{"use strict";var rn=ar(),_e=[],ur=[],Gs=rn.makeRequestCallFromTimer(Us);function Us(){if(ur.length)throw ur.shift()}an.exports=lr;function lr(i){var p;_e.length?p=_e.pop():p=new nn,p.task=i,rn(p)}function nn(){this.task=null}nn.prototype.call=function(){try{this.task.call()}catch(i){lr.onerror?lr.onerror(i):(ur.push(i),Gs())}finally{this.task=null,_e[_e.length]=this}}});var ln=bt((fi,un)=>{"use strict";var te=kt(),cr=sn();un.exports=te;te.denodeify=function(i,p){return typeof p=="number"&&p!==1/0?Bs(i,p):$s(i)};var on="function (err, res) {if (err) { rj(err); } else { rs(res); }}";function Bs(i,p){for(var c=[],g=0;g<p;g++)c.push("a"+g);var e=["return function ("+c.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(c).concat([on]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],e)(te,i)}function $s(i){for(var p=Math.max(i.length-1,3),c=[],g=0;g<p;g++)c.push("a"+g);var e=["return function ("+c.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+p+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+on+";","var res;","switch (argLength) {",c.concat(["extra"]).map(function(s,t){return"case "+t+":res = fn.call("+["self"].concat(c.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],e)(te,i)}te.nodeify=function(i){return function(){var p=Array.prototype.slice.call(arguments),c=typeof p[p.length-1]=="function"?p.pop():null,g=this;try{return i.apply(this,arguments).nodeify(c,g)}catch(e){if(c===null||typeof c>"u")return new te(function(s,t){t(e)});cr(function(){c.call(g,e)})}}};te.prototype.nodeify=function(i,p){if(typeof i!="function")return this;this.then(function(c){cr(function(){i.call(p,null,c)})},function(c){cr(function(){i.call(p,c)})})}});var fn=bt((pi,cn)=>{"use strict";var pt=kt();cn.exports=pt;pt.enableSynchronous=function(){pt.prototype.isPending=function(){return this.getState()==0},pt.prototype.isFulfilled=function(){return this.getState()==1},pt.prototype.isRejected=function(){return this.getState()==2},pt.prototype.getValue=function(){if(this._y===3)return this._z.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._z},pt.prototype.getReason=function(){if(this._y===3)return this._z.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._z},pt.prototype.getState=function(){return this._y===3?this._z.getState():this._y===-1||this._y===-2?0:this._y}};pt.disableSynchronous=function(){pt.prototype.isPending=void 0,pt.prototype.isFulfilled=void 0,pt.prototype.isRejected=void 0,pt.prototype.getValue=void 0,pt.prototype.getReason=void 0,pt.prototype.getState=void 0}});var hn=bt((hi,pn)=>{"use strict";pn.exports=kt();Zr();Jr();en();ln();fn()});var mn=bt((di,dn)=>{"use strict";dn.exports=hn()});var jn=bt((mi,wn)=>{var yt=-1,ht=1,st=0;function Se(i,p,c,g,e){if(i===p)return i?[[st,i]]:[];if(c!=null){var s=Js(i,p,c);if(s)return s}var t=pr(i,p),a=i.substring(0,t);i=i.substring(t),p=p.substring(t),t=Me(i,p);var n=i.substring(i.length-t);i=i.substring(0,i.length-t),p=p.substring(0,p.length-t);var o=Hs(i,p);return a&&o.unshift([st,a]),n&&o.push([st,n]),hr(o,e),g&&Xs(o),o}function Hs(i,p){var c;if(!i)return[[ht,p]];if(!p)return[[yt,i]];var g=i.length>p.length?i:p,e=i.length>p.length?p:i,s=g.indexOf(e);if(s!==-1)return c=[[ht,g.substring(0,s)],[st,e],[ht,g.substring(s+e.length)]],i.length>p.length&&(c[0][0]=c[2][0]=yt),c;if(e.length===1)return[[yt,i],[ht,p]];var t=Ws(i,p);if(t){var a=t[0],n=t[1],o=t[2],l=t[3],h=t[4],u=Se(a,o),m=Se(n,l);return u.concat([[st,h]],m)}return Ks(i,p)}function Ks(i,p){for(var c=i.length,g=p.length,e=Math.ceil((c+g)/2),s=e,t=2*e,a=new Array(t),n=new Array(t),o=0;o<t;o++)a[o]=-1,n[o]=-1;a[s+1]=0,n[s+1]=0;for(var l=c-g,h=l%2!==0,u=0,m=0,b=0,x=0,y=0;y<e;y++){for(var S=-y+u;S<=y-m;S+=2){var A=s+S,j;S===-y||S!==y&&a[A-1]<a[A+1]?j=a[A+1]:j=a[A-1]+1;for(var E=j-S;j<c&&E<g&&i.charAt(j)===p.charAt(E);)j++,E++;if(a[A]=j,j>c)m+=2;else if(E>g)u+=2;else if(h){var _=s+l-S;if(_>=0&&_<t&&n[_]!==-1){var F=c-n[_];if(j>=F)return gn(i,p,j,E)}}}for(var I=-y+b;I<=y-x;I+=2){var _=s+I,F;I===-y||I!==y&&n[_-1]<n[_+1]?F=n[_+1]:F=n[_-1]+1;for(var z=F-I;F<c&&z<g&&i.charAt(c-F-1)===p.charAt(g-z-1);)F++,z++;if(n[_]=F,F>c)x+=2;else if(z>g)b+=2;else if(!h){var A=s+l-I;if(A>=0&&A<t&&a[A]!==-1){var j=a[A],E=s+j-A;if(F=c-F,j>=F)return gn(i,p,j,E)}}}}return[[yt,i],[ht,p]]}function gn(i,p,c,g){var e=i.substring(0,c),s=p.substring(0,g),t=i.substring(c),a=p.substring(g),n=Se(e,s),o=Se(t,a);return n.concat(o)}function pr(i,p){if(!i||!p||i.charAt(0)!==p.charAt(0))return 0;for(var c=0,g=Math.min(i.length,p.length),e=g,s=0;c<e;)i.substring(s,e)==p.substring(s,e)?(c=e,s=c):g=e,e=Math.floor((g-c)/2+c);return Sn(i.charCodeAt(e-1))&&e--,e}function bn(i,p){var c=i.length,g=p.length;if(c==0||g==0)return 0;c>g?i=i.substring(c-g):c<g&&(p=p.substring(0,c));var e=Math.min(c,g);if(i==p)return e;for(var s=0,t=1;;){var a=i.substring(e-t),n=p.indexOf(a);if(n==-1)return s;t+=n,(n==0||i.substring(e-t)==p.substring(0,t))&&(s=t,t++)}}function Me(i,p){if(!i||!p||i.slice(-1)!==p.slice(-1))return 0;for(var c=0,g=Math.min(i.length,p.length),e=g,s=0;c<e;)i.substring(i.length-e,i.length-s)==p.substring(p.length-e,p.length-s)?(c=e,s=c):g=e,e=Math.floor((g-c)/2+c);return An(i.charCodeAt(i.length-e))&&e--,e}function Ws(i,p){var c=i.length>p.length?i:p,g=i.length>p.length?p:i;if(c.length<4||g.length*2<c.length)return null;function e(m,b,x){for(var y=m.substring(x,x+Math.floor(m.length/4)),S=-1,A="",j,E,_,F;(S=b.indexOf(y,S+1))!==-1;){var I=pr(m.substring(x),b.substring(S)),z=Me(m.substring(0,x),b.substring(0,S));A.length<z+I&&(A=b.substring(S-z,S)+b.substring(S,S+I),j=m.substring(0,x-z),E=m.substring(x+I),_=b.substring(0,S-z),F=b.substring(S+I))}return A.length*2>=m.length?[j,E,_,F,A]:null}var s=e(c,g,Math.ceil(c.length/4)),t=e(c,g,Math.ceil(c.length/2)),a;if(!s&&!t)return null;t?s?a=s[4].length>t[4].length?s:t:a=t:a=s;var n,o,l,h;i.length>p.length?(n=a[0],o=a[1],l=a[2],h=a[3]):(l=a[0],h=a[1],n=a[2],o=a[3]);var u=a[4];return[n,o,l,h,u]}function Xs(i){for(var p=!1,c=[],g=0,e=null,s=0,t=0,a=0,n=0,o=0;s<i.length;)i[s][0]==st?(c[g++]=s,t=n,a=o,n=0,o=0,e=i[s][1]):(i[s][0]==ht?n+=i[s][1].length:o+=i[s][1].length,e&&e.length<=Math.max(t,a)&&e.length<=Math.max(n,o)&&(i.splice(c[g-1],0,[yt,e]),i[c[g-1]+1][0]=ht,g--,g--,s=g>0?c[g-1]:-1,t=0,a=0,n=0,o=0,e=null,p=!0)),s++;for(p&&hr(i),Zs(i),s=1;s<i.length;){if(i[s-1][0]==yt&&i[s][0]==ht){var l=i[s-1][1],h=i[s][1],u=bn(l,h),m=bn(h,l);u>=m?(u>=l.length/2||u>=h.length/2)&&(i.splice(s,0,[st,h.substring(0,u)]),i[s-1][1]=l.substring(0,l.length-u),i[s+1][1]=h.substring(u),s++):(m>=l.length/2||m>=h.length/2)&&(i.splice(s,0,[st,l.substring(0,m)]),i[s-1][0]=ht,i[s-1][1]=h.substring(0,h.length-m),i[s+1][0]=yt,i[s+1][1]=l.substring(m),s++),s++}s++}}var vn=/[^a-zA-Z0-9]/,yn=/\s/,xn=/[\r\n]/,Vs=/\n\r?\n$/,Ys=/^\r?\n\r?\n/;function Zs(i){function p(m,b){if(!m||!b)return 6;var x=m.charAt(m.length-1),y=b.charAt(0),S=x.match(vn),A=y.match(vn),j=S&&x.match(yn),E=A&&y.match(yn),_=j&&x.match(xn),F=E&&y.match(xn),I=_&&m.match(Vs),z=F&&b.match(Ys);return I||z?5:_||F?4:S&&!j&&E?3:j||E?2:S||A?1:0}for(var c=1;c<i.length-1;){if(i[c-1][0]==st&&i[c+1][0]==st){var g=i[c-1][1],e=i[c][1],s=i[c+1][1],t=Me(g,e);if(t){var a=e.substring(e.length-t);g=g.substring(0,g.length-t),e=a+e.substring(0,e.length-t),s=a+s}for(var n=g,o=e,l=s,h=p(g,e)+p(e,s);e.charAt(0)===s.charAt(0);){g+=e.charAt(0),e=e.substring(1)+s.charAt(0),s=s.substring(1);var u=p(g,e)+p(e,s);u>=h&&(h=u,n=g,o=e,l=s)}i[c-1][1]!=n&&(n?i[c-1][1]=n:(i.splice(c-1,1),c--),i[c][1]=o,l?i[c+1][1]=l:(i.splice(c+1,1),c--))}c++}}function hr(i,p){i.push([st,""]);for(var c=0,g=0,e=0,s="",t="",a;c<i.length;){if(c<i.length-1&&!i[c][1]){i.splice(c,1);continue}switch(i[c][0]){case ht:e++,t+=i[c][1],c++;break;case yt:g++,s+=i[c][1],c++;break;case st:var n=c-e-g-1;if(p){if(n>=0&&Tn(i[n][1])){var o=i[n][1].slice(-1);if(i[n][1]=i[n][1].slice(0,-1),s=o+s,t=o+t,!i[n][1]){i.splice(n,1),c--;var l=n-1;i[l]&&i[l][0]===ht&&(e++,t=i[l][1]+t,l--),i[l]&&i[l][0]===yt&&(g++,s=i[l][1]+s,l--),n=l}}if(On(i[c][1])){var o=i[c][1].charAt(0);i[c][1]=i[c][1].slice(1),s+=o,t+=o}}if(c<i.length-1&&!i[c][1]){i.splice(c,1);break}if(s.length>0||t.length>0){s.length>0&&t.length>0&&(a=pr(t,s),a!==0&&(n>=0?i[n][1]+=t.substring(0,a):(i.splice(0,0,[st,t.substring(0,a)]),c++),t=t.substring(a),s=s.substring(a)),a=Me(t,s),a!==0&&(i[c][1]=t.substring(t.length-a)+i[c][1],t=t.substring(0,t.length-a),s=s.substring(0,s.length-a)));var h=e+g;s.length===0&&t.length===0?(i.splice(c-h,h),c=c-h):s.length===0?(i.splice(c-h,h,[ht,t]),c=c-h+1):t.length===0?(i.splice(c-h,h,[yt,s]),c=c-h+1):(i.splice(c-h,h,[yt,s],[ht,t]),c=c-h+2)}c!==0&&i[c-1][0]===st?(i[c-1][1]+=i[c][1],i.splice(c,1)):c++,e=0,g=0,s="",t="";break}}i[i.length-1][1]===""&&i.pop();var u=!1;for(c=1;c<i.length-1;)i[c-1][0]===st&&i[c+1][0]===st&&(i[c][1].substring(i[c][1].length-i[c-1][1].length)===i[c-1][1]?(i[c][1]=i[c-1][1]+i[c][1].substring(0,i[c][1].length-i[c-1][1].length),i[c+1][1]=i[c-1][1]+i[c+1][1],i.splice(c-1,1),u=!0):i[c][1].substring(0,i[c+1][1].length)==i[c+1][1]&&(i[c-1][1]+=i[c+1][1],i[c][1]=i[c][1].substring(i[c+1][1].length)+i[c+1][1],i.splice(c+1,1),u=!0)),c++;u&&hr(i,p)}function Sn(i){return i>=55296&&i<=56319}function An(i){return i>=56320&&i<=57343}function On(i){return An(i.charCodeAt(0))}function Tn(i){return Sn(i.charCodeAt(i.length-1))}function Qs(i){for(var p=[],c=0;c<i.length;c++)i[c][1].length>0&&p.push(i[c]);return p}function fr(i,p,c,g){return Tn(i)||On(g)?null:Qs([[st,i],[yt,p],[ht,c],[st,g]])}function Js(i,p,c){var g=typeof c=="number"?{index:c,length:0}:c.oldRange,e=typeof c=="number"?null:c.newRange,s=i.length,t=p.length;if(g.length===0&&(e===null||e.length===0)){var a=g.index,n=i.slice(0,a),o=i.slice(a),l=e?e.index:null;t:{var h=a+t-s;if(l!==null&&l!==h||h<0||h>t)break t;var u=p.slice(0,h),m=p.slice(h);if(m!==o)break t;var b=Math.min(a,h),x=n.slice(0,b),y=u.slice(0,b);if(x!==y)break t;var S=n.slice(b),A=u.slice(b);return fr(x,S,A,o)}t:{if(l!==null&&l!==a)break t;var j=a,u=p.slice(0,j),m=p.slice(j);if(u!==n)break t;var E=Math.min(s-j,t-j),_=o.slice(o.length-E),F=m.slice(m.length-E);if(_!==F)break t;var S=o.slice(0,o.length-E),A=m.slice(0,m.length-E);return fr(n,S,A,_)}}if(g.length>0&&e&&e.length===0)t:{var x=i.slice(0,g.index),_=i.slice(g.index+g.length),b=x.length,E=_.length;if(t<b+E)break t;var y=p.slice(0,b),F=p.slice(t-E);if(x!==y||_!==F)break t;var S=i.slice(b,s-E),A=p.slice(b,t-E);return fr(x,S,A,_)}return null}function ze(i,p,c,g){return Se(i,p,c,g,!0)}ze.INSERT=ht;ze.DELETE=yt;ze.EQUAL=st;wn.exports=ze});var En=bt(Ue=>{(function(i,p){if(typeof define=="function"&&define.amd)define(["exports"],p);else if(typeof Ue<"u")p(Ue);else{var c={exports:{}};p(c.exports),i.jstoxml=c.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ue,function(i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.toXML=i.default=void 0;function p(P){return s(P)||e(P)||g(P)||c()}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(P,O){if(P){if(typeof P=="string")return t(P,O);var D=Object.prototype.toString.call(P).slice(8,-1);if(D==="Object"&&P.constructor&&(D=P.constructor.name),D==="Map"||D==="Set")return Array.from(P);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return t(P,O)}}function e(P){if(typeof Symbol<"u"&&P[Symbol.iterator]!=null||P["@@iterator"]!=null)return Array.from(P)}function s(P){if(Array.isArray(P))return t(P)}function t(P,O){(O==null||O>P.length)&&(O=P.length);for(var D=0,Y=new Array(O);D<O;D++)Y[D]=P[D];return Y}function a(P,O){var D=Object.keys(P);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(P);O&&(Y=Y.filter(function(at){return Object.getOwnPropertyDescriptor(P,at).enumerable})),D.push.apply(D,Y)}return D}function n(P){for(var O=1;O<arguments.length;O++){var D=arguments[O]!=null?arguments[O]:{};O%2?a(Object(D),!0).forEach(function(Y){o(P,Y,D[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(D)):a(Object(D)).forEach(function(Y){Object.defineProperty(P,Y,Object.getOwnPropertyDescriptor(D,Y))})}return P}function o(P,O,D){return O in P?Object.defineProperty(P,O,{value:D,enumerable:!0,configurable:!0,writable:!0}):P[O]=D,P}function l(P){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},l(P)}var h="array",u="boolean",m="date",b="null",x="number",y="object",S="special-object",A="string",j=["_selfCloseTag","_attrs"],E=new RegExp(j.join("|"),"g"),_=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return O.repeat(D)},F=function(O){return Array.isArray(O)&&h||l(O)===y&&O!==null&&O._name&&S||O instanceof Date&&m||O===null&&b||l(O)},I=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof O!="string")return O;var Y=new RegExp("(".concat(Object.keys(D).join("|"),")(?!(\\w|#)*;)"),"g");return String(O).replace(Y,function(at,et){return D[et]||""})},z=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1?arguments[1]:void 0,Y=[];if(Array.isArray(O))Y=O.map(function(et){var mt=Object.keys(et)[0],Tt=et[mt],Mt=D?I(Tt,D):Tt,$t=Mt===!0?"":'="'.concat(Mt,'"');return"".concat(mt).concat($t)});else{var at=Object.keys(O);Y=at.map(function(et){var mt=D?I(O[et],D):O[et],Tt=O[et]===!0?"":'="'.concat(mt,'"');return"".concat(et).concat(Tt)})}return Y},M=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1?arguments[1]:void 0,Y=z(O,D);if(Y.length===0)return"";var at=Y.join(" ");return" ".concat(at)},H=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(O).map(function(D){return{_name:D,_content:O[D]}})},L=[A,x,u],X=function(O){return L.includes(F(O))},B=[].concat(L,[m,S]),$=function(O){return B.includes(F(O))},Q=function(O){return!O.match("<")},V='<?xml version="1.0" encoding="UTF-8"?>',it=function(O){var D=O.header,Y=O.indent,at=O.isOutputStart,et=D&&at;if(!et)return"";var mt=l(D)===u;return mt?V:D},G={"<":"&lt;",">":"&gt;","&":"&amp;"},q=function P(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=D.depth,at=Y===void 0?0:Y,et=D.indent,mt=D._isFirstItem,Tt=D._isOutputStart,Mt=Tt===void 0?!0:Tt,$t=D.header,Ht=D.attributesFilter,Kt=Ht===void 0?{}:Ht,re=D.filter,wt=re===void 0?{}:re,W=typeof Kt=="boolean"&&!Kt,Wt=W?{}:n(n(n({},G),{'"':"&quot;"}),Kt),xt=typeof wt=="boolean"&&!wt,Xt=xt?{}:n(n({},G),wt),ne=_(et,at),he=F(O),Vt=it({header:$t,indent:et,depth:at,isOutputStart:Mt}),T=Mt&&!Vt&&mt&&at===0,ft="";switch(he){case"special-object":{var K=O._name,Z=O._content;if(Z===null){ft=K;break}var St=Array.isArray(Z)&&Z.every(X);if(St){var de=Z.map(function(ct){return P({_name:K,_content:ct},n(n({},D),{},{depth:at,_isOutputStart:!1}))});return de.join("")}if(K.match(E))break;var jt=P(Z,n(n({},D),{},{depth:at+1,_isOutputStart:T})),At=F(jt),ut=Q(jt),It=et&&!T?`
`:"",rt="".concat(It).concat(ne);if(K==="_comment"){ft+="".concat(rt,"<!-- ").concat(Z," -->");break}var ae=At==="undefined"||jt==="",Dt=l(O._selfCloseTag)===u?ae&&O._selfCloseTag:ae,Ct=Dt?"/":"",se=M(O._attrs,Wt),zt="<".concat(K).concat(se).concat(Ct,">"),me=et&&!ut?`
`.concat(ne):"",ie=Dt?"":"".concat(jt).concat(me,"</").concat(K,">");ft+="".concat(rt).concat(zt).concat(ie);break}case"object":{var gt=Object.keys(O),Et=gt.map(function(ct,Yt){var ge=n(n({},D),{},{_isFirstItem:Yt===0,_isLastItem:Yt+1===gt.length,_isOutputStart:T}),Zt={_name:ct};if(F(O[ct])==="object"){j.forEach(function(be){var je=O[ct][be];typeof je<"u"&&(Zt[be]=je,delete O[ct][be])});var nt=typeof O[ct]._content<"u";if(nt&&Object.keys(O[ct]).length>1){var Qt=Object.assign({},O[ct]);delete Qt._content,Zt._content=[].concat(p(H(Qt)),[O[ct]._content])}}typeof Zt._content>"u"&&(Zt._content=O[ct]);var Ke=P(Zt,ge,ct);return Ke},D);ft=Et.join("");break}case"function":{var $e=O(D);ft=P($e,D);break}case"array":{var He=O.map(function(ct,Yt){var ge=n(n({},D),{},{_isFirstItem:Yt===0,_isLastItem:Yt+1===O.length,_isOutputStart:T});return P(ct,ge)});ft=He.join("");break}default:{ft=I(O,Xt);break}}return"".concat(Vt).concat(ft)};i.toXML=q;var ot={toXML:q};i.default=ot})});var Fn=bt((Oe,dr)=>{(function(p,c){typeof Oe=="object"&&typeof dr=="object"?dr.exports=c():typeof define=="function"&&define.amd?define([],c):typeof Oe=="object"?Oe["chord-symbol"]=c():p["chord-symbol"]=c()})(typeof self<"u"?self:Oe,function(){return(()=>{var i={8552:(e,s,t)=>{var a=t(852),n=t(5639),o=a(n,"DataView");e.exports=o},1989:(e,s,t)=>{var a=t(1789),n=t(401),o=t(7667),l=t(1327),h=t(1866);function u(m){var b=-1,x=m==null?0:m.length;for(this.clear();++b<x;){var y=m[b];this.set(y[0],y[1])}}u.prototype.clear=a,u.prototype.delete=n,u.prototype.get=o,u.prototype.has=l,u.prototype.set=h,e.exports=u},8407:(e,s,t)=>{var a=t(7040),n=t(4125),o=t(2117),l=t(7518),h=t(4705);function u(m){var b=-1,x=m==null?0:m.length;for(this.clear();++b<x;){var y=m[b];this.set(y[0],y[1])}}u.prototype.clear=a,u.prototype.delete=n,u.prototype.get=o,u.prototype.has=l,u.prototype.set=h,e.exports=u},7071:(e,s,t)=>{var a=t(852),n=t(5639),o=a(n,"Map");e.exports=o},3369:(e,s,t)=>{var a=t(4785),n=t(1285),o=t(6e3),l=t(9916),h=t(5265);function u(m){var b=-1,x=m==null?0:m.length;for(this.clear();++b<x;){var y=m[b];this.set(y[0],y[1])}}u.prototype.clear=a,u.prototype.delete=n,u.prototype.get=o,u.prototype.has=l,u.prototype.set=h,e.exports=u},3818:(e,s,t)=>{var a=t(852),n=t(5639),o=a(n,"Promise");e.exports=o},8525:(e,s,t)=>{var a=t(852),n=t(5639),o=a(n,"Set");e.exports=o},8668:(e,s,t)=>{var a=t(3369),n=t(619),o=t(2385);function l(h){var u=-1,m=h==null?0:h.length;for(this.__data__=new a;++u<m;)this.add(h[u])}l.prototype.add=l.prototype.push=n,l.prototype.has=o,e.exports=l},6384:(e,s,t)=>{var a=t(8407),n=t(7465),o=t(3779),l=t(7599),h=t(4758),u=t(4309);function m(b){var x=this.__data__=new a(b);this.size=x.size}m.prototype.clear=n,m.prototype.delete=o,m.prototype.get=l,m.prototype.has=h,m.prototype.set=u,e.exports=m},2705:(e,s,t)=>{var a=t(5639),n=a.Symbol;e.exports=n},1149:(e,s,t)=>{var a=t(5639),n=a.Uint8Array;e.exports=n},577:(e,s,t)=>{var a=t(852),n=t(5639),o=a(n,"WeakMap");e.exports=o},6874:e=>{function s(t,a,n){switch(n.length){case 0:return t.call(a);case 1:return t.call(a,n[0]);case 2:return t.call(a,n[0],n[1]);case 3:return t.call(a,n[0],n[1],n[2])}return t.apply(a,n)}e.exports=s},7412:e=>{function s(t,a){for(var n=-1,o=t==null?0:t.length;++n<o&&a(t[n],n,t)!==!1;);return t}e.exports=s},4963:e=>{function s(t,a){for(var n=-1,o=t==null?0:t.length,l=0,h=[];++n<o;){var u=t[n];a(u,n,t)&&(h[l++]=u)}return h}e.exports=s},7443:(e,s,t)=>{var a=t(2118);function n(o,l){var h=o==null?0:o.length;return!!h&&a(o,l,0)>-1}e.exports=n},1196:e=>{function s(t,a,n){for(var o=-1,l=t==null?0:t.length;++o<l;)if(n(a,t[o]))return!0;return!1}e.exports=s},4636:(e,s,t)=>{var a=t(2545),n=t(5694),o=t(1469),l=t(4144),h=t(5776),u=t(6719),m=Object.prototype,b=m.hasOwnProperty;function x(y,S){var A=o(y),j=!A&&n(y),E=!A&&!j&&l(y),_=!A&&!j&&!E&&u(y),F=A||j||E||_,I=F?a(y.length,String):[],z=I.length;for(var M in y)(S||b.call(y,M))&&!(F&&(M=="length"||E&&(M=="offset"||M=="parent")||_&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||h(M,z)))&&I.push(M);return I}e.exports=x},9932:e=>{function s(t,a){for(var n=-1,o=t==null?0:t.length,l=Array(o);++n<o;)l[n]=a(t[n],n,t);return l}e.exports=s},2488:e=>{function s(t,a){for(var n=-1,o=a.length,l=t.length;++n<o;)t[l+n]=a[n];return t}e.exports=s},2908:e=>{function s(t,a){for(var n=-1,o=t==null?0:t.length;++n<o;)if(a(t[n],n,t))return!0;return!1}e.exports=s},4865:(e,s,t)=>{var a=t(9465),n=t(7813),o=Object.prototype,l=o.hasOwnProperty;function h(u,m,b){var x=u[m];(!(l.call(u,m)&&n(x,b))||b===void 0&&!(m in u))&&a(u,m,b)}e.exports=h},8470:(e,s,t)=>{var a=t(7813);function n(o,l){for(var h=o.length;h--;)if(a(o[h][0],l))return h;return-1}e.exports=n},4037:(e,s,t)=>{var a=t(8363),n=t(3674);function o(l,h){return l&&a(h,n(h),l)}e.exports=o},3886:(e,s,t)=>{var a=t(8363),n=t(1704);function o(l,h){return l&&a(h,n(h),l)}e.exports=o},9465:(e,s,t)=>{var a=t(8777);function n(o,l,h){l=="__proto__"&&a?a(o,l,{configurable:!0,enumerable:!0,value:h,writable:!0}):o[l]=h}e.exports=n},5990:(e,s,t)=>{var a=t(6384),n=t(7412),o=t(4865),l=t(4037),h=t(3886),u=t(4626),m=t(278),b=t(8805),x=t(1911),y=t(8234),S=t(6904),A=t(4160),j=t(3824),E=t(9148),_=t(8517),F=t(1469),I=t(4144),z=t(6688),M=t(3218),H=t(2928),L=t(3674),X=t(1704),B=1,$=2,Q=4,V="[object Arguments]",it="[object Array]",G="[object Boolean]",q="[object Date]",ot="[object Error]",P="[object Function]",O="[object GeneratorFunction]",D="[object Map]",Y="[object Number]",at="[object Object]",et="[object RegExp]",mt="[object Set]",Tt="[object String]",Mt="[object Symbol]",$t="[object WeakMap]",Ht="[object ArrayBuffer]",Kt="[object DataView]",re="[object Float32Array]",wt="[object Float64Array]",W="[object Int8Array]",Wt="[object Int16Array]",xt="[object Int32Array]",Xt="[object Uint8Array]",ne="[object Uint8ClampedArray]",he="[object Uint16Array]",Vt="[object Uint32Array]",T={};T[V]=T[it]=T[Ht]=T[Kt]=T[G]=T[q]=T[re]=T[wt]=T[W]=T[Wt]=T[xt]=T[D]=T[Y]=T[at]=T[et]=T[mt]=T[Tt]=T[Mt]=T[Xt]=T[ne]=T[he]=T[Vt]=!0,T[ot]=T[P]=T[$t]=!1;function ft(K,Z,St,de,jt,At){var ut,It=Z&B,rt=Z&$,ae=Z&Q;if(St&&(ut=jt?St(K,de,jt,At):St(K)),ut!==void 0)return ut;if(!M(K))return K;var Dt=F(K);if(Dt){if(ut=j(K),!It)return m(K,ut)}else{var Ct=A(K),se=Ct==P||Ct==O;if(I(K))return u(K,It);if(Ct==at||Ct==V||se&&!jt){if(ut=rt||se?{}:_(K),!It)return rt?x(K,h(ut,K)):b(K,l(ut,K))}else{if(!T[Ct])return jt?K:{};ut=E(K,Ct,It)}}At||(At=new a);var zt=At.get(K);if(zt)return zt;At.set(K,ut),H(K)?K.forEach(function(gt){ut.add(ft(gt,Z,St,gt,K,At))}):z(K)&&K.forEach(function(gt,Et){ut.set(Et,ft(gt,Z,St,Et,K,At))});var me=ae?rt?S:y:rt?X:L,ie=Dt?void 0:me(K);return n(ie||K,function(gt,Et){ie&&(Et=gt,gt=K[Et]),o(ut,Et,ft(gt,Z,St,Et,K,At))}),ut}e.exports=ft},3118:(e,s,t)=>{var a=t(3218),n=Object.create,o=function(){function l(){}return function(h){if(!a(h))return{};if(n)return n(h);l.prototype=h;var u=new l;return l.prototype=void 0,u}}();e.exports=o},731:(e,s,t)=>{var a=t(8668),n=t(7443),o=t(1196),l=t(9932),h=t(1717),u=t(4757),m=200;function b(x,y,S,A){var j=-1,E=n,_=!0,F=x.length,I=[],z=y.length;if(!F)return I;S&&(y=l(y,h(S))),A?(E=o,_=!1):y.length>=m&&(E=u,_=!1,y=new a(y));t:for(;++j<F;){var M=x[j],H=S==null?M:S(M);if(M=A||M!==0?M:0,_&&H===H){for(var L=z;L--;)if(y[L]===H)continue t;I.push(M)}else E(y,H,A)||I.push(M)}return I}e.exports=b},1848:e=>{function s(t,a,n,o){for(var l=t.length,h=n+(o?1:-1);o?h--:++h<l;)if(a(t[h],h,t))return h;return-1}e.exports=s},1078:(e,s,t)=>{var a=t(2488),n=t(7285);function o(l,h,u,m,b){var x=-1,y=l.length;for(u||(u=n),b||(b=[]);++x<y;){var S=l[x];h>0&&u(S)?h>1?o(S,h-1,u,m,b):a(b,S):m||(b[b.length]=S)}return b}e.exports=o},8483:(e,s,t)=>{var a=t(5063),n=a();e.exports=n},7816:(e,s,t)=>{var a=t(8483),n=t(3674);function o(l,h){return l&&a(l,h,n)}e.exports=o},7786:(e,s,t)=>{var a=t(1811),n=t(327);function o(l,h){h=a(h,l);for(var u=0,m=h.length;l!=null&&u<m;)l=l[n(h[u++])];return u&&u==m?l:void 0}e.exports=o},8866:(e,s,t)=>{var a=t(2488),n=t(1469);function o(l,h,u){var m=h(l);return n(l)?m:a(m,u(l))}e.exports=o},4239:(e,s,t)=>{var a=t(2705),n=t(9607),o=t(2333),l="[object Null]",h="[object Undefined]",u=a?a.toStringTag:void 0;function m(b){return b==null?b===void 0?h:l:u&&u in Object(b)?n(b):o(b)}e.exports=m},13:e=>{function s(t,a){return t!=null&&a in Object(t)}e.exports=s},2118:(e,s,t)=>{var a=t(1848),n=t(2722),o=t(2351);function l(h,u,m){return u===u?o(h,u,m):a(h,n,m)}e.exports=l},8975:(e,s,t)=>{var a=t(7816);function n(o,l,h,u){return a(o,function(m,b,x){l(u,h(m),b,x)}),u}e.exports=n},9454:(e,s,t)=>{var a=t(4239),n=t(7005),o="[object Arguments]";function l(h){return n(h)&&a(h)==o}e.exports=l},939:(e,s,t)=>{var a=t(2492),n=t(7005);function o(l,h,u,m,b){return l===h?!0:l==null||h==null||!n(l)&&!n(h)?l!==l&&h!==h:a(l,h,u,m,o,b)}e.exports=o},2492:(e,s,t)=>{var a=t(6384),n=t(7114),o=t(8351),l=t(6096),h=t(4160),u=t(1469),m=t(4144),b=t(6719),x=1,y="[object Arguments]",S="[object Array]",A="[object Object]",j=Object.prototype,E=j.hasOwnProperty;function _(F,I,z,M,H,L){var X=u(F),B=u(I),$=X?S:h(F),Q=B?S:h(I);$=$==y?A:$,Q=Q==y?A:Q;var V=$==A,it=Q==A,G=$==Q;if(G&&m(F)){if(!m(I))return!1;X=!0,V=!1}if(G&&!V)return L||(L=new a),X||b(F)?n(F,I,z,M,H,L):o(F,I,$,z,M,H,L);if(!(z&x)){var q=V&&E.call(F,"__wrapped__"),ot=it&&E.call(I,"__wrapped__");if(q||ot){var P=q?F.value():F,O=ot?I.value():I;return L||(L=new a),H(P,O,z,M,L)}}return G?(L||(L=new a),l(F,I,z,M,H,L)):!1}e.exports=_},5588:(e,s,t)=>{var a=t(4160),n=t(7005),o="[object Map]";function l(h){return n(h)&&a(h)==o}e.exports=l},2958:(e,s,t)=>{var a=t(6384),n=t(939),o=1,l=2;function h(u,m,b,x){var y=b.length,S=y,A=!x;if(u==null)return!S;for(u=Object(u);y--;){var j=b[y];if(A&&j[2]?j[1]!==u[j[0]]:!(j[0]in u))return!1}for(;++y<S;){j=b[y];var E=j[0],_=u[E],F=j[1];if(A&&j[2]){if(_===void 0&&!(E in u))return!1}else{var I=new a;if(x)var z=x(_,F,E,u,m,I);if(!(z===void 0?n(F,_,o|l,x,I):z))return!1}}return!0}e.exports=h},2722:e=>{function s(t){return t!==t}e.exports=s},8458:(e,s,t)=>{var a=t(3560),n=t(5346),o=t(3218),l=t(346),h=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,m=Function.prototype,b=Object.prototype,x=m.toString,y=b.hasOwnProperty,S=RegExp("^"+x.call(y).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(j){if(!o(j)||n(j))return!1;var E=a(j)?S:u;return E.test(l(j))}e.exports=A},9221:(e,s,t)=>{var a=t(4160),n=t(7005),o="[object Set]";function l(h){return n(h)&&a(h)==o}e.exports=l},8749:(e,s,t)=>{var a=t(4239),n=t(1780),o=t(7005),l="[object Arguments]",h="[object Array]",u="[object Boolean]",m="[object Date]",b="[object Error]",x="[object Function]",y="[object Map]",S="[object Number]",A="[object Object]",j="[object RegExp]",E="[object Set]",_="[object String]",F="[object WeakMap]",I="[object ArrayBuffer]",z="[object DataView]",M="[object Float32Array]",H="[object Float64Array]",L="[object Int8Array]",X="[object Int16Array]",B="[object Int32Array]",$="[object Uint8Array]",Q="[object Uint8ClampedArray]",V="[object Uint16Array]",it="[object Uint32Array]",G={};G[M]=G[H]=G[L]=G[X]=G[B]=G[$]=G[Q]=G[V]=G[it]=!0,G[l]=G[h]=G[I]=G[u]=G[z]=G[m]=G[b]=G[x]=G[y]=G[S]=G[A]=G[j]=G[E]=G[_]=G[F]=!1;function q(ot){return o(ot)&&n(ot.length)&&!!G[a(ot)]}e.exports=q},7206:(e,s,t)=>{var a=t(1573),n=t(6432),o=t(6557),l=t(1469),h=t(9601);function u(m){return typeof m=="function"?m:m==null?o:typeof m=="object"?l(m)?n(m[0],m[1]):a(m):h(m)}e.exports=u},280:(e,s,t)=>{var a=t(5726),n=t(6916),o=Object.prototype,l=o.hasOwnProperty;function h(u){if(!a(u))return n(u);var m=[];for(var b in Object(u))l.call(u,b)&&b!="constructor"&&m.push(b);return m}e.exports=h},313:(e,s,t)=>{var a=t(3218),n=t(5726),o=t(3498),l=Object.prototype,h=l.hasOwnProperty;function u(m){if(!a(m))return o(m);var b=n(m),x=[];for(var y in m)y=="constructor"&&(b||!h.call(m,y))||x.push(y);return x}e.exports=u},1573:(e,s,t)=>{var a=t(2958),n=t(1499),o=t(2634);function l(h){var u=n(h);return u.length==1&&u[0][2]?o(u[0][0],u[0][1]):function(m){return m===h||a(m,h,u)}}e.exports=l},6432:(e,s,t)=>{var a=t(939),n=t(7361),o=t(9095),l=t(5403),h=t(9162),u=t(2634),m=t(327),b=1,x=2;function y(S,A){return l(S)&&h(A)?u(m(S),A):function(j){var E=n(j,S);return E===void 0&&E===A?o(j,S):a(A,E,b|x)}}e.exports=y},371:e=>{function s(t){return function(a){return a?.[t]}}e.exports=s},9152:(e,s,t)=>{var a=t(7786);function n(o){return function(l){return a(l,o)}}e.exports=n},5976:(e,s,t)=>{var a=t(6557),n=t(5357),o=t(61);function l(h,u){return o(n(h,u,a),h+"")}e.exports=l},6560:(e,s,t)=>{var a=t(5703),n=t(8777),o=t(6557),l=n?function(h,u){return n(h,"toString",{configurable:!0,enumerable:!1,value:a(u),writable:!0})}:o;e.exports=l},2545:e=>{function s(t,a){for(var n=-1,o=Array(t);++n<t;)o[n]=a(n);return o}e.exports=s},531:(e,s,t)=>{var a=t(2705),n=t(9932),o=t(1469),l=t(3448),h=1/0,u=a?a.prototype:void 0,m=u?u.toString:void 0;function b(x){if(typeof x=="string")return x;if(o(x))return n(x,b)+"";if(l(x))return m?m.call(x):"";var y=x+"";return y=="0"&&1/x==-h?"-0":y}e.exports=b},7561:(e,s,t)=>{var a=t(7990),n=/^\s+/;function o(l){return l&&l.slice(0,a(l)+1).replace(n,"")}e.exports=o},1717:e=>{function s(t){return function(a){return t(a)}}e.exports=s},5652:(e,s,t)=>{var a=t(8668),n=t(7443),o=t(1196),l=t(4757),h=t(3593),u=t(1814),m=200;function b(x,y,S){var A=-1,j=n,E=x.length,_=!0,F=[],I=F;if(S)_=!1,j=o;else if(E>=m){var z=y?null:h(x);if(z)return u(z);_=!1,j=l,I=new a}else I=y?[]:F;t:for(;++A<E;){var M=x[A],H=y?y(M):M;if(M=S||M!==0?M:0,_&&H===H){for(var L=I.length;L--;)if(I[L]===H)continue t;y&&I.push(H),F.push(M)}else j(I,H,S)||(I!==F&&I.push(H),F.push(M))}return F}e.exports=b},4757:e=>{function s(t,a){return t.has(a)}e.exports=s},1811:(e,s,t)=>{var a=t(1469),n=t(5403),o=t(5514),l=t(9833);function h(u,m){return a(u)?u:n(u,m)?[u]:o(l(u))}e.exports=h},4318:(e,s,t)=>{var a=t(1149);function n(o){var l=new o.constructor(o.byteLength);return new a(l).set(new a(o)),l}e.exports=n},4626:(e,s,t)=>{e=t.nmd(e);var a=t(5639),n=s&&!s.nodeType&&s,o=n&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===n,h=l?a.Buffer:void 0,u=h?h.allocUnsafe:void 0;function m(b,x){if(x)return b.slice();var y=b.length,S=u?u(y):new b.constructor(y);return b.copy(S),S}e.exports=m},7157:(e,s,t)=>{var a=t(4318);function n(o,l){var h=l?a(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.byteLength)}e.exports=n},3147:e=>{var s=/\w*$/;function t(a){var n=new a.constructor(a.source,s.exec(a));return n.lastIndex=a.lastIndex,n}e.exports=t},419:(e,s,t)=>{var a=t(2705),n=a?a.prototype:void 0,o=n?n.valueOf:void 0;function l(h){return o?Object(o.call(h)):{}}e.exports=l},7133:(e,s,t)=>{var a=t(4318);function n(o,l){var h=l?a(o.buffer):o.buffer;return new o.constructor(h,o.byteOffset,o.length)}e.exports=n},278:e=>{function s(t,a){var n=-1,o=t.length;for(a||(a=Array(o));++n<o;)a[n]=t[n];return a}e.exports=s},8363:(e,s,t)=>{var a=t(4865),n=t(9465);function o(l,h,u,m){var b=!u;u||(u={});for(var x=-1,y=h.length;++x<y;){var S=h[x],A=m?m(u[S],l[S],S,u,l):void 0;A===void 0&&(A=l[S]),b?n(u,S,A):a(u,S,A)}return u}e.exports=o},8805:(e,s,t)=>{var a=t(8363),n=t(9551);function o(l,h){return a(l,n(l),h)}e.exports=o},1911:(e,s,t)=>{var a=t(8363),n=t(1442);function o(l,h){return a(l,n(l),h)}e.exports=o},4429:(e,s,t)=>{var a=t(5639),n=a["__core-js_shared__"];e.exports=n},5063:e=>{function s(t){return function(a,n,o){for(var l=-1,h=Object(a),u=o(a),m=u.length;m--;){var b=u[t?m:++l];if(n(h[b],b,h)===!1)break}return a}}e.exports=s},7740:(e,s,t)=>{var a=t(7206),n=t(8612),o=t(3674);function l(h){return function(u,m,b){var x=Object(u);if(!n(u)){var y=a(m,3);u=o(u),m=function(A){return y(x[A],A,x)}}var S=h(u,m,b);return S>-1?x[y?u[S]:S]:void 0}}e.exports=l},7779:(e,s,t)=>{var a=t(8975);function n(o,l){return function(h,u){return a(h,o,l(u),{})}}e.exports=n},3593:(e,s,t)=>{var a=t(8525),n=t(308),o=t(1814),l=1/0,h=a&&1/o(new a([,-0]))[1]==l?function(u){return new a(u)}:n;e.exports=h},8777:(e,s,t)=>{var a=t(852),n=function(){try{var o=a(Object,"defineProperty");return o({},"",{}),o}catch{}}();e.exports=n},7114:(e,s,t)=>{var a=t(8668),n=t(2908),o=t(4757),l=1,h=2;function u(m,b,x,y,S,A){var j=x&l,E=m.length,_=b.length;if(E!=_&&!(j&&_>E))return!1;var F=A.get(m),I=A.get(b);if(F&&I)return F==b&&I==m;var z=-1,M=!0,H=x&h?new a:void 0;for(A.set(m,b),A.set(b,m);++z<E;){var L=m[z],X=b[z];if(y)var B=j?y(X,L,z,b,m,A):y(L,X,z,m,b,A);if(B!==void 0){if(B)continue;M=!1;break}if(H){if(!n(b,function($,Q){if(!o(H,Q)&&(L===$||S(L,$,x,y,A)))return H.push(Q)})){M=!1;break}}else if(!(L===X||S(L,X,x,y,A))){M=!1;break}}return A.delete(m),A.delete(b),M}e.exports=u},8351:(e,s,t)=>{var a=t(2705),n=t(1149),o=t(7813),l=t(7114),h=t(8776),u=t(1814),m=1,b=2,x="[object Boolean]",y="[object Date]",S="[object Error]",A="[object Map]",j="[object Number]",E="[object RegExp]",_="[object Set]",F="[object String]",I="[object Symbol]",z="[object ArrayBuffer]",M="[object DataView]",H=a?a.prototype:void 0,L=H?H.valueOf:void 0;function X(B,$,Q,V,it,G,q){switch(Q){case M:if(B.byteLength!=$.byteLength||B.byteOffset!=$.byteOffset)return!1;B=B.buffer,$=$.buffer;case z:return!(B.byteLength!=$.byteLength||!G(new n(B),new n($)));case x:case y:case j:return o(+B,+$);case S:return B.name==$.name&&B.message==$.message;case E:case F:return B==$+"";case A:var ot=h;case _:var P=V&m;if(ot||(ot=u),B.size!=$.size&&!P)return!1;var O=q.get(B);if(O)return O==$;V|=b,q.set(B,$);var D=l(ot(B),ot($),V,it,G,q);return q.delete(B),D;case I:if(L)return L.call(B)==L.call($)}return!1}e.exports=X},6096:(e,s,t)=>{var a=t(8234),n=1,o=Object.prototype,l=o.hasOwnProperty;function h(u,m,b,x,y,S){var A=b&n,j=a(u),E=j.length,_=a(m),F=_.length;if(E!=F&&!A)return!1;for(var I=E;I--;){var z=j[I];if(!(A?z in m:l.call(m,z)))return!1}var M=S.get(u),H=S.get(m);if(M&&H)return M==m&&H==u;var L=!0;S.set(u,m),S.set(m,u);for(var X=A;++I<E;){z=j[I];var B=u[z],$=m[z];if(x)var Q=A?x($,B,z,m,u,S):x(B,$,z,u,m,S);if(!(Q===void 0?B===$||y(B,$,b,x,S):Q)){L=!1;break}X||(X=z=="constructor")}if(L&&!X){var V=u.constructor,it=m.constructor;V!=it&&"constructor"in u&&"constructor"in m&&!(typeof V=="function"&&V instanceof V&&typeof it=="function"&&it instanceof it)&&(L=!1)}return S.delete(u),S.delete(m),L}e.exports=h},1957:(e,s,t)=>{var a=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g;e.exports=a},8234:(e,s,t)=>{var a=t(8866),n=t(9551),o=t(3674);function l(h){return a(h,o,n)}e.exports=l},6904:(e,s,t)=>{var a=t(8866),n=t(1442),o=t(1704);function l(h){return a(h,o,n)}e.exports=l},5050:(e,s,t)=>{var a=t(7019);function n(o,l){var h=o.__data__;return a(l)?h[typeof l=="string"?"string":"hash"]:h.map}e.exports=n},1499:(e,s,t)=>{var a=t(9162),n=t(3674);function o(l){for(var h=n(l),u=h.length;u--;){var m=h[u],b=l[m];h[u]=[m,b,a(b)]}return h}e.exports=o},852:(e,s,t)=>{var a=t(8458),n=t(7801);function o(l,h){var u=n(l,h);return a(u)?u:void 0}e.exports=o},5924:(e,s,t)=>{var a=t(5569),n=a(Object.getPrototypeOf,Object);e.exports=n},9607:(e,s,t)=>{var a=t(2705),n=Object.prototype,o=n.hasOwnProperty,l=n.toString,h=a?a.toStringTag:void 0;function u(m){var b=o.call(m,h),x=m[h];try{m[h]=void 0;var y=!0}catch{}var S=l.call(m);return y&&(b?m[h]=x:delete m[h]),S}e.exports=u},9551:(e,s,t)=>{var a=t(4963),n=t(479),o=Object.prototype,l=o.propertyIsEnumerable,h=Object.getOwnPropertySymbols,u=h?function(m){return m==null?[]:(m=Object(m),a(h(m),function(b){return l.call(m,b)}))}:n;e.exports=u},1442:(e,s,t)=>{var a=t(2488),n=t(5924),o=t(9551),l=t(479),h=Object.getOwnPropertySymbols,u=h?function(m){for(var b=[];m;)a(b,o(m)),m=n(m);return b}:l;e.exports=u},4160:(e,s,t)=>{var a=t(8552),n=t(7071),o=t(3818),l=t(8525),h=t(577),u=t(4239),m=t(346),b="[object Map]",x="[object Object]",y="[object Promise]",S="[object Set]",A="[object WeakMap]",j="[object DataView]",E=m(a),_=m(n),F=m(o),I=m(l),z=m(h),M=u;(a&&M(new a(new ArrayBuffer(1)))!=j||n&&M(new n)!=b||o&&M(o.resolve())!=y||l&&M(new l)!=S||h&&M(new h)!=A)&&(M=function(H){var L=u(H),X=L==x?H.constructor:void 0,B=X?m(X):"";if(B)switch(B){case E:return j;case _:return b;case F:return y;case I:return S;case z:return A}return L}),e.exports=M},7801:e=>{function s(t,a){return t?.[a]}e.exports=s},222:(e,s,t)=>{var a=t(1811),n=t(5694),o=t(1469),l=t(5776),h=t(1780),u=t(327);function m(b,x,y){x=a(x,b);for(var S=-1,A=x.length,j=!1;++S<A;){var E=u(x[S]);if(!(j=b!=null&&y(b,E)))break;b=b[E]}return j||++S!=A?j:(A=b==null?0:b.length,!!A&&h(A)&&l(E,A)&&(o(b)||n(b)))}e.exports=m},1789:(e,s,t)=>{var a=t(4536);function n(){this.__data__=a?a(null):{},this.size=0}e.exports=n},401:e=>{function s(t){var a=this.has(t)&&delete this.__data__[t];return this.size-=a?1:0,a}e.exports=s},7667:(e,s,t)=>{var a=t(4536),n="__lodash_hash_undefined__",o=Object.prototype,l=o.hasOwnProperty;function h(u){var m=this.__data__;if(a){var b=m[u];return b===n?void 0:b}return l.call(m,u)?m[u]:void 0}e.exports=h},1327:(e,s,t)=>{var a=t(4536),n=Object.prototype,o=n.hasOwnProperty;function l(h){var u=this.__data__;return a?u[h]!==void 0:o.call(u,h)}e.exports=l},1866:(e,s,t)=>{var a=t(4536),n="__lodash_hash_undefined__";function o(l,h){var u=this.__data__;return this.size+=this.has(l)?0:1,u[l]=a&&h===void 0?n:h,this}e.exports=o},3824:e=>{var s=Object.prototype,t=s.hasOwnProperty;function a(n){var o=n.length,l=new n.constructor(o);return o&&typeof n[0]=="string"&&t.call(n,"index")&&(l.index=n.index,l.input=n.input),l}e.exports=a},9148:(e,s,t)=>{var a=t(4318),n=t(7157),o=t(3147),l=t(419),h=t(7133),u="[object Boolean]",m="[object Date]",b="[object Map]",x="[object Number]",y="[object RegExp]",S="[object Set]",A="[object String]",j="[object Symbol]",E="[object ArrayBuffer]",_="[object DataView]",F="[object Float32Array]",I="[object Float64Array]",z="[object Int8Array]",M="[object Int16Array]",H="[object Int32Array]",L="[object Uint8Array]",X="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]";function Q(V,it,G){var q=V.constructor;switch(it){case E:return a(V);case u:case m:return new q(+V);case _:return n(V,G);case F:case I:case z:case M:case H:case L:case X:case B:case $:return h(V,G);case b:return new q;case x:case A:return new q(V);case y:return o(V);case S:return new q;case j:return l(V)}}e.exports=Q},8517:(e,s,t)=>{var a=t(3118),n=t(5924),o=t(5726);function l(h){return typeof h.constructor=="function"&&!o(h)?a(n(h)):{}}e.exports=l},7285:(e,s,t)=>{var a=t(2705),n=t(5694),o=t(1469),l=a?a.isConcatSpreadable:void 0;function h(u){return o(u)||n(u)||!!(l&&u&&u[l])}e.exports=h},5776:e=>{var s=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function a(n,o){var l=typeof n;return o=o??s,!!o&&(l=="number"||l!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<o}e.exports=a},5403:(e,s,t)=>{var a=t(1469),n=t(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;function h(u,m){if(a(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||n(u)?!0:l.test(u)||!o.test(u)||m!=null&&u in Object(m)}e.exports=h},7019:e=>{function s(t){var a=typeof t;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?t!=="__proto__":t===null}e.exports=s},5346:(e,s,t)=>{var a=t(4429),n=function(){var l=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}();function o(l){return!!n&&n in l}e.exports=o},5726:e=>{var s=Object.prototype;function t(a){var n=a&&a.constructor,o=typeof n=="function"&&n.prototype||s;return a===o}e.exports=t},9162:(e,s,t)=>{var a=t(3218);function n(o){return o===o&&!a(o)}e.exports=n},7040:e=>{function s(){this.__data__=[],this.size=0}e.exports=s},4125:(e,s,t)=>{var a=t(8470),n=Array.prototype,o=n.splice;function l(h){var u=this.__data__,m=a(u,h);if(m<0)return!1;var b=u.length-1;return m==b?u.pop():o.call(u,m,1),--this.size,!0}e.exports=l},2117:(e,s,t)=>{var a=t(8470);function n(o){var l=this.__data__,h=a(l,o);return h<0?void 0:l[h][1]}e.exports=n},7518:(e,s,t)=>{var a=t(8470);function n(o){return a(this.__data__,o)>-1}e.exports=n},4705:(e,s,t)=>{var a=t(8470);function n(o,l){var h=this.__data__,u=a(h,o);return u<0?(++this.size,h.push([o,l])):h[u][1]=l,this}e.exports=n},4785:(e,s,t)=>{var a=t(1989),n=t(8407),o=t(7071);function l(){this.size=0,this.__data__={hash:new a,map:new(o||n),string:new a}}e.exports=l},1285:(e,s,t)=>{var a=t(5050);function n(o){var l=a(this,o).delete(o);return this.size-=l?1:0,l}e.exports=n},6e3:(e,s,t)=>{var a=t(5050);function n(o){return a(this,o).get(o)}e.exports=n},9916:(e,s,t)=>{var a=t(5050);function n(o){return a(this,o).has(o)}e.exports=n},5265:(e,s,t)=>{var a=t(5050);function n(o,l){var h=a(this,o),u=h.size;return h.set(o,l),this.size+=h.size==u?0:1,this}e.exports=n},8776:e=>{function s(t){var a=-1,n=Array(t.size);return t.forEach(function(o,l){n[++a]=[l,o]}),n}e.exports=s},2634:e=>{function s(t,a){return function(n){return n==null?!1:n[t]===a&&(a!==void 0||t in Object(n))}}e.exports=s},4523:(e,s,t)=>{var a=t(8306),n=500;function o(l){var h=a(l,function(m){return u.size===n&&u.clear(),m}),u=h.cache;return h}e.exports=o},4536:(e,s,t)=>{var a=t(852),n=a(Object,"create");e.exports=n},6916:(e,s,t)=>{var a=t(5569),n=a(Object.keys,Object);e.exports=n},3498:e=>{function s(t){var a=[];if(t!=null)for(var n in Object(t))a.push(n);return a}e.exports=s},1167:(e,s,t)=>{e=t.nmd(e);var a=t(1957),n=s&&!s.nodeType&&s,o=n&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===n,h=l&&a.process,u=function(){try{var m=o&&o.require&&o.require("util").types;return m||h&&h.binding&&h.binding("util")}catch{}}();e.exports=u},2333:e=>{var s=Object.prototype,t=s.toString;function a(n){return t.call(n)}e.exports=a},5569:e=>{function s(t,a){return function(n){return t(a(n))}}e.exports=s},5357:(e,s,t)=>{var a=t(6874),n=Math.max;function o(l,h,u){return h=n(h===void 0?l.length-1:h,0),function(){for(var m=arguments,b=-1,x=n(m.length-h,0),y=Array(x);++b<x;)y[b]=m[h+b];b=-1;for(var S=Array(h+1);++b<h;)S[b]=m[b];return S[h]=u(y),a(l,this,S)}}e.exports=o},5639:(e,s,t)=>{var a=t(1957),n=typeof self=="object"&&self&&self.Object===Object&&self,o=a||n||Function("return this")();e.exports=o},619:e=>{var s="__lodash_hash_undefined__";function t(a){return this.__data__.set(a,s),this}e.exports=t},2385:e=>{function s(t){return this.__data__.has(t)}e.exports=s},1814:e=>{function s(t){var a=-1,n=Array(t.size);return t.forEach(function(o){n[++a]=o}),n}e.exports=s},61:(e,s,t)=>{var a=t(6560),n=t(1275),o=n(a);e.exports=o},1275:e=>{var s=800,t=16,a=Date.now;function n(o){var l=0,h=0;return function(){var u=a(),m=t-(u-h);if(h=u,m>0){if(++l>=s)return arguments[0]}else l=0;return o.apply(void 0,arguments)}}e.exports=n},7465:(e,s,t)=>{var a=t(8407);function n(){this.__data__=new a,this.size=0}e.exports=n},3779:e=>{function s(t){var a=this.__data__,n=a.delete(t);return this.size=a.size,n}e.exports=s},7599:e=>{function s(t){return this.__data__.get(t)}e.exports=s},4758:e=>{function s(t){return this.__data__.has(t)}e.exports=s},4309:(e,s,t)=>{var a=t(8407),n=t(7071),o=t(3369),l=200;function h(u,m){var b=this.__data__;if(b instanceof a){var x=b.__data__;if(!n||x.length<l-1)return x.push([u,m]),this.size=++b.size,this;b=this.__data__=new o(x)}return b.set(u,m),this.size=b.size,this}e.exports=h},2351:e=>{function s(t,a,n){for(var o=n-1,l=t.length;++o<l;)if(t[o]===a)return o;return-1}e.exports=s},5514:(e,s,t)=>{var a=t(4523),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,l=a(function(h){var u=[];return h.charCodeAt(0)===46&&u.push(""),h.replace(n,function(m,b,x,y){u.push(x?y.replace(o,"$1"):b||m)}),u});e.exports=l},327:(e,s,t)=>{var a=t(3448),n=1/0;function o(l){if(typeof l=="string"||a(l))return l;var h=l+"";return h=="0"&&1/l==-n?"-0":h}e.exports=o},346:e=>{var s=Function.prototype,t=s.toString;function a(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}e.exports=a},7990:e=>{var s=/\s/;function t(a){for(var n=a.length;n--&&s.test(a.charAt(n)););return n}e.exports=t},6678:(e,s,t)=>{var a=t(5990),n=4;function o(l){return a(l,n)}e.exports=o},361:(e,s,t)=>{var a=t(5990),n=1,o=4;function l(h){return a(h,n|o)}e.exports=l},5703:e=>{function s(t){return function(){return t}}e.exports=s},1966:(e,s,t)=>{var a=t(731),n=t(1078),o=t(5976),l=t(9246),h=o(function(u,m){return l(u)?a(u,n(m,1,l,!0)):[]});e.exports=h},7813:e=>{function s(t,a){return t===a||t!==t&&a!==a}e.exports=s},3311:(e,s,t)=>{var a=t(7740),n=t(998),o=a(n);e.exports=o},998:(e,s,t)=>{var a=t(1848),n=t(7206),o=t(554),l=Math.max;function h(u,m,b){var x=u==null?0:u.length;if(!x)return-1;var y=b==null?0:o(b);return y<0&&(y=l(x+y,0)),a(u,n(m,3),y)}e.exports=h},7361:(e,s,t)=>{var a=t(7786);function n(o,l,h){var u=o==null?void 0:a(o,l);return u===void 0?h:u}e.exports=n},9095:(e,s,t)=>{var a=t(13),n=t(222);function o(l,h){return l!=null&&n(l,h,a)}e.exports=o},6557:e=>{function s(t){return t}e.exports=s},3137:(e,s,t)=>{var a=t(5703),n=t(7779),o=t(6557),l=Object.prototype,h=l.toString,u=n(function(m,b,x){b!=null&&typeof b.toString!="function"&&(b=h.call(b)),m[b]=x},a(o));e.exports=u},5694:(e,s,t)=>{var a=t(9454),n=t(7005),o=Object.prototype,l=o.hasOwnProperty,h=o.propertyIsEnumerable,u=a(function(){return arguments}())?a:function(m){return n(m)&&l.call(m,"callee")&&!h.call(m,"callee")};e.exports=u},1469:e=>{var s=Array.isArray;e.exports=s},8612:(e,s,t)=>{var a=t(3560),n=t(1780);function o(l){return l!=null&&n(l.length)&&!a(l)}e.exports=o},9246:(e,s,t)=>{var a=t(8612),n=t(7005);function o(l){return n(l)&&a(l)}e.exports=o},4144:(e,s,t)=>{e=t.nmd(e);var a=t(5639),n=t(5062),o=s&&!s.nodeType&&s,l=o&&!0&&e&&!e.nodeType&&e,h=l&&l.exports===o,u=h?a.Buffer:void 0,m=u?u.isBuffer:void 0,b=m||n;e.exports=b},8446:(e,s,t)=>{var a=t(939);function n(o,l){return a(o,l)}e.exports=n},3560:(e,s,t)=>{var a=t(4239),n=t(3218),o="[object AsyncFunction]",l="[object Function]",h="[object GeneratorFunction]",u="[object Proxy]";function m(b){if(!n(b))return!1;var x=a(b);return x==l||x==h||x==o||x==u}e.exports=m},1780:e=>{var s=9007199254740991;function t(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=s}e.exports=t},6688:(e,s,t)=>{var a=t(5588),n=t(1717),o=t(1167),l=o&&o.isMap,h=l?n(l):a;e.exports=h},3218:e=>{function s(t){var a=typeof t;return t!=null&&(a=="object"||a=="function")}e.exports=s},7005:e=>{function s(t){return t!=null&&typeof t=="object"}e.exports=s},2928:(e,s,t)=>{var a=t(9221),n=t(1717),o=t(1167),l=o&&o.isSet,h=l?n(l):a;e.exports=h},3448:(e,s,t)=>{var a=t(4239),n=t(7005),o="[object Symbol]";function l(h){return typeof h=="symbol"||n(h)&&a(h)==o}e.exports=l},6719:(e,s,t)=>{var a=t(8749),n=t(1717),o=t(1167),l=o&&o.isTypedArray,h=l?n(l):a;e.exports=h},3674:(e,s,t)=>{var a=t(4636),n=t(280),o=t(8612);function l(h){return o(h)?a(h):n(h)}e.exports=l},1704:(e,s,t)=>{var a=t(4636),n=t(313),o=t(8612);function l(h){return o(h)?a(h,!0):n(h)}e.exports=l},8306:(e,s,t)=>{var a=t(3369),n="Expected a function";function o(l,h){if(typeof l!="function"||h!=null&&typeof h!="function")throw new TypeError(n);var u=function(){var m=arguments,b=h?h.apply(this,m):m[0],x=u.cache;if(x.has(b))return x.get(b);var y=l.apply(this,m);return u.cache=x.set(b,y)||x,y};return u.cache=new(o.Cache||a),u}o.Cache=a,e.exports=o},308:e=>{function s(){}e.exports=s},9601:(e,s,t)=>{var a=t(371),n=t(9152),o=t(5403),l=t(327);function h(u){return o(u)?a(l(u)):n(u)}e.exports=h},479:e=>{function s(){return[]}e.exports=s},5062:e=>{function s(){return!1}e.exports=s},8601:(e,s,t)=>{var a=t(4841),n=1/0,o=17976931348623157e292;function l(h){if(!h)return h===0?h:0;if(h=a(h),h===n||h===-n){var u=h<0?-1:1;return u*o}return h===h?h:0}e.exports=l},554:(e,s,t)=>{var a=t(8601);function n(o){var l=a(o),h=l%1;return l===l?h?l-h:l:0}e.exports=n},4841:(e,s,t)=>{var a=t(7561),n=t(3218),o=t(3448),l=NaN,h=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,m=/^0o[0-7]+$/i,b=parseInt;function x(y){if(typeof y=="number")return y;if(o(y))return l;if(n(y)){var S=typeof y.valueOf=="function"?y.valueOf():y;y=n(S)?S+"":S}if(typeof y!="string")return y===0?y:+y;y=a(y);var A=u.test(y);return A||m.test(y)?b(y.slice(2),A?2:8):h.test(y)?l:+y}e.exports=x},9833:(e,s,t)=>{var a=t(531);function n(o){return o==null?"":a(o)}e.exports=n},4908:(e,s,t)=>{var a=t(5652);function n(o){return o&&o.length?a(o):[]}e.exports=n},2569:(e,s,t)=>{var a=t(731),n=t(5976),o=t(9246),l=n(function(h,u){return o(h)?a(h,u):[]});e.exports=l}},p={};function c(e){var s=p[e];if(s!==void 0)return s.exports;var t=p[e]={id:e,loaded:!1,exports:{}};return i[e](t,t.exports,c),t.loaded=!0,t.exports}c.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return c.d(s,{a:s}),s},c.d=(e,s)=>{for(var t in s)c.o(s,t)&&!c.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},c.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),c.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),c.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var g={};return(()=>{"use strict";c.r(g),c.d(g,{chordParserFactory:()=>Er,chordRendererFactory:()=>gs});function e(r,f){return r.reduce(function(d,v){return d?v(d):null},f)}var s=c(361),t=c.n(s),a=function(f){if(!Array.isArray(f))throw new TypeError("customFilters should be given as an array");if(f.some(function(d){return typeof d!="function"}))throw new TypeError("The given filter is not a function");return!0};let n=a;function o(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(r);f&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,v)}return d}function l(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?o(Object(d),!0).forEach(function(v){h(r,v,d[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):o(Object(d)).forEach(function(v){Object.defineProperty(r,v,Object.getOwnPropertyDescriptor(d,v))})}return r}function h(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var u={AFlat:"Ab",A:"A",ASharp:"A#",BFlat:"Bb",B:"B",C:"C",CSharp:"C#",DFlat:"Db",D:"D",DSharp:"D#",EFlat:"Eb",E:"E",F:"F",FSharp:"F#",GFlat:"Gb",G:"G",GSharp:"G#"},m={Ab:u.AFlat,A:u.A,"A#":u.ASharp,Bb:u.BFlat,B:u.B,"B#":u.C,Cb:u.B,C:u.C,"C#":u.CSharp,Db:u.DFlat,D:u.D,"D#":u.DSharp,Eb:u.EFlat,E:u.E,"E#":u.F,Fb:u.E,F:u.F,"F#":u.FSharp,Gb:u.GFlat,G:u.G,"G#":u.GSharp},b={Lab:u.AFlat,La:u.A,"La#":u.ASharp,Sib:u.BFlat,Si:u.B,"Si#":u.C,Dob:u.B,Do:u.C,"Do#":u.CSharp,Reb:u.DFlat,R\u00E9b:u.DFlat,Re:u.D,R\u00E9:u.D,"Re#":u.DSharp,"R\xE9#":u.DSharp,Mib:u.EFlat,Mi:u.E,"Mi#":u.F,Fab:u.E,Fa:u.F,"Fa#":u.FSharp,Solb:u.GFlat,Sol:u.G,"Sol#":u.GSharp},x={As:u.AFlat,A:u.A,Ais:u.ASharp,Hes:u.BFlat,H:u.B,His:u.C,Ces:u.B,C:u.C,Cis:u.CSharp,Des:u.DFlat,D:u.D,Dis:u.DSharp,Es:u.EFlat,E:u.E,Eis:u.F,Fes:u.E,F:u.F,Fis:u.FSharp,Ges:u.GFlat,G:u.G,Gis:u.GSharp};function y(r){var f;return Object.keys(r).reduce(function(d,v){return v.match(/.[b|#]$/)&&(f=v.replace("#","\u266F").replace("b","\u266D"),d[f]=r[v]),d},{})}var S=l(l({},m),y(m)),A=l(l({},b),y(b)),j=l({},x),E=l(l(l({},S),A),j),_=Object.keys(E).sort(function(r,f){return f.length-r.length}),F=Object.keys(S).sort(function(r,f){return f.length-r.length}),I=Object.keys(A).sort(function(r,f){return f.length-r.length}),z=Object.keys(j).sort(function(r,f){return f.length-r.length}),M=[{name:"english",notes:F},{name:"german",notes:z},{name:"latin",notes:I}];function H(r){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},H(r)}function L(r,f){for(var d=0;d<f.length;d++){var v=f[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(r,v.key,v)}}function X(r,f,d){return f&&L(r.prototype,f),d&&L(r,d),Object.defineProperty(r,"prototype",{writable:!1}),r}function B(r,f){if(!(r instanceof f))throw new TypeError("Cannot call a class as a function")}function $(r,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(f&&f.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),f&&O(r,f)}function Q(r){var f=ot();return function(){var v=D(r),C;if(f){var R=D(this).constructor;C=Reflect.construct(v,arguments,R)}else C=v.apply(this,arguments);return V(this,C)}}function V(r,f){if(f&&(H(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(r)}function it(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function G(r){var f=typeof Map=="function"?new Map:void 0;return G=function(v){if(v===null||!P(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f<"u"){if(f.has(v))return f.get(v);f.set(v,C)}function C(){return q(v,arguments,D(this).constructor)}return C.prototype=Object.create(v.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O(C,v)},G(r)}function q(r,f,d){return ot()?q=Reflect.construct:q=function(C,R,U){var J=[null];J.push.apply(J,R);var dt=Function.bind.apply(C,J),Ft=new dt;return U&&O(Ft,U.prototype),Ft},q.apply(null,arguments)}function ot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function O(r,f){return O=Object.setPrototypeOf||function(v,C){return v.__proto__=C,v},O(r,f)}function D(r){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(d){return d.__proto__||Object.getPrototypeOf(d)},D(r)}var Y=function(r){$(d,r);var f=Q(d);function d(){var v;return B(this,d),v=f.call(this,"The given symbol is not a valid string"),v.name="InvalidInput",v}return X(d)}(G(Error)),at=function(r){$(d,r);var f=Q(d);function d(){var v;B(this,d);var C="An unexpected error happened. Maybe a custom filter returned null instead of throwing an exception?";return v=f.call(this,C),v.name="UnexpectedError",v}return X(d)}(G(Error)),et=function(r){$(d,r);var f=Q(d);function d(v,C,R){var U;return B(this,d),U=f.call(this,v),U.name=R,U.chord=C,U}return X(d)}(G(Error)),mt=function(r){$(d,r);var f=Q(d);function d(v){B(this,d);var C='"'.concat(v.input.symbol,'" does not seems to be a chord');return f.call(this,C,v,"NoSymbolFound")}return X(d)}(et),Tt=function(r){$(d,r);var f=Q(d);function d(v,C){B(this,d);var R='The chord descriptor "'.concat(v.input.descriptor,'" contains unknown or duplicated modifiers: "').concat(C,'"');return f.call(this,R,v,"InvalidModifier")}return X(d)}(et),Mt=function(r){$(d,r);var f=Q(d);function d(v,C){B(this,d);var R='"'.concat(v.input.symbol,'" describes a chord with an invalid intervals combo: ')+C.join(" and ");return f.call(this,R,v,"InvalidIntervals")}return X(d)}(et),$t=c(1469),Ht=c.n($t),Kt=c(8446),re=c.n(Kt);function wt(r,f){var d=Ht()(f)?f:[f];return re()(r,d)}function W(r,f){return Xt(r,f,"oneOf")}function Wt(r,f){return Xt(r,f,"all")}function xt(r,f){return Xt(r,f,"none")}function Xt(r,f,d){var v=Ht()(f)?f:[f],C=d==="oneOf"?"some":"every";return v[C](function(R){return d==="none"?!r.includes(R):r.includes(R)})}var ne=[["2","3"],["2","9"],["3","b3"],["4","11"],["5","b5"],["5","#5"],["b6","#5"],["b6","6"],["b6","13"],["6","13"],["b7","bb7"],["7","b7"],["9","b9"],["9","#9"],["11","#11"],["13","b13"]];function he(r){var f=r.normalized.intervals,d=ne.find(function(v){return Wt(f,v)});if(d)throw new Mt(r,d);return r}function Vt(r){var f=r.formatted,d=f.rootNote,v=f.bassNote,C=f.descriptor,R=f.chordChanges,U=d;return C&&(U+=C),R&&R.length&&(U+="("+R.join(",")+")"),v&&(U+="/"+v),r.formatted.symbol=U,r}var T={ma:"major",ma6:"major6",ma7:"major7",dom7:"dominant7",mi:"minor",mi6:"minor6",mi7:"minor7",miMa7:"minorMajor7",aug:"augmented",dim:"diminished",dim7:"diminished7",power:"power",bass:"bass"},ft=[T.ma,T.ma6,T.ma7,T.dom7,T.aug],K=[T.mi,T.mi6,T.mi7,T.miMa7,T.dim,T.dim7],Z;function St(r){return ut(r)||At(r)||jt(r)||de()}function de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(r,f){if(r){if(typeof r=="string")return It(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return It(r,f)}}function At(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function ut(r){if(Array.isArray(r))return It(r)}function It(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,v=new Array(f);d<f;d++)v[d]=r[d];return v}function rt(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var ae=(Z={},rt(Z,T.ma,function(){return""}),rt(Z,T.ma6,function(r){return r.normalized.intervals.includes("9")?"69":"6"}),rt(Z,T.ma7,function(r){return"ma"+zt(r)}),rt(Z,T.dom7,function(r){return r.normalized.intents.alt?"7alt":zt(r)}),rt(Z,T.mi,function(){return"mi"}),rt(Z,T.mi6,function(r){return r.normalized.intervals.includes("9")?"mi69":"mi6"}),rt(Z,T.mi7,function(r){return"mi"+zt(r)}),rt(Z,T.miMa7,function(r){return"miMa"+zt(r)}),rt(Z,T.aug,function(){return"+"}),rt(Z,T.dim,function(){return"dim"}),rt(Z,T.dim7,function(){return"dim7"}),rt(Z,T.power,function(){return"5"}),rt(Z,T.bass,function(){return" bass"}),Z),Dt={add:"add",add7:"Ma7",omit:"omit",sus:"sus"};function Ct(r){return r.formatted={rootNote:r.normalized.rootNote,bassNote:r.normalized.bassNote,descriptor:se(r),chordChanges:me(r)},r}function se(r){var f=ae[r.normalized.quality](r);return r.normalized.isSuspended&&(f+=Dt.sus),f}function zt(r){var f=r.normalized.extensions,d=f[f.length-1];return d==="11"&&r.normalized.intents.major&&(d=xt(r.normalized.alterations,["b9","#9"])?"9":"7"),d||"7"}function me(r){var f=Et(r.normalized.omits);if(ie(r))return f;var d=gt(r.normalized.quality,r.normalized.adds);return[].concat(St(r.normalized.alterations),St(d),St(f))}function ie(r){return r.normalized.intents.alt&&r.normalized.quality===T.dom7}function gt(r,f){return f.filter(function(d){return!([T.ma6,T.mi6].includes(r)&&d==="9")}).map(function(d,v){var C="";return v===0&&(C+=Dt.add,["b","#"].includes(d[0])&&(C+=" ")),C+=d==="7"?Dt.add7:d,C})}function Et(r){return r.map(function(f,d){var v="";return d===0&&(v+=Dt.omit),v+=f==="b3"?"3":f,v})}function $e(r){var f=[He,ct,Yt,ge];return r.input.descriptor&&(r.input.parsableDescriptor=e(f,r.input.descriptor)),r}function He(r){return r.replace(/[A-LN-Za-z]+/g,function(f){return f.toLowerCase()}).replace("oMit","omit").replace("diM","dim").replace("augMented","augmented")}function ct(r){return r.replace(/ /g,"")}function Yt(r){return r.replace(/(7?dim)(alt|add)/g,"$1 $2").replace(/([m|M])(alt|add)/g,"$1 $2").replace(/i(no[35])/g,"i $1").replace(/([b#]9)6/g,"$1 6").replace(/(9\/?6)/g," $1")}function ge(r){var f,d,v;return r.replace(/\((.*?)\)/g,function(C,R){return f=[],d="",R.split(",").forEach(function(U){v=!0,U.startsWith("add")?d="add":U.startsWith("omit")?d="omit":U.startsWith("no")?d="no":v=!1,v?f.push(U):f.push(d+U)})," "+f.join(" ")+" "})}function Zt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;return{input:{symbol:f},normalized:{},formatted:{},parserConfiguration:t()(r)}}var nt;function Qt(r){return Mn(r)||je(r)||be(r)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function be(r,f){if(r){if(typeof r=="string")return We(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return We(r,f)}}function je(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Mn(r){if(Array.isArray(r))return We(r)}function We(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,v=new Array(f);d<f;d++)v[d]=r[d];return v}function lt(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var zn=[u.A,u.ASharp,u.B,u.C,u.CSharp,u.D,u.DSharp,u.E,u.F,u.FSharp,u.G,u.GSharp],Ln=[u.A,u.BFlat,u.B,u.C,u.DFlat,u.D,u.EFlat,u.E,u.F,u.GFlat,u.G,u.AFlat],Gn=(nt={},lt(nt,u.C,{maj:"flat",min:"flat"}),lt(nt,u.CSharp,{maj:"sharp",min:"sharp"}),lt(nt,u.DFlat,{maj:"flat",min:"flat"}),lt(nt,u.D,{maj:"sharp",min:"flat"}),lt(nt,u.DSharp,{maj:"sharp",min:"sharp"}),lt(nt,u.EFlat,{maj:"flat",min:"flat"}),lt(nt,u.E,{maj:"sharp",min:"sharp"}),lt(nt,u.F,{maj:"flat",min:"flat"}),lt(nt,u.FSharp,{maj:"sharp",min:"sharp"}),lt(nt,u.GFlat,{maj:"flat",min:"flat"}),lt(nt,u.G,{maj:"sharp",min:"flat"}),lt(nt,u.GSharp,{maj:"sharp",min:"sharp"}),lt(nt,u.AFlat,{maj:"flat",min:"flat"}),lt(nt,u.A,{maj:"sharp",min:"flat"}),lt(nt,u.ASharp,{maj:"sharp",min:"sharp"}),lt(nt,u.BFlat,{maj:"flat",min:"flat"}),lt(nt,u.B,{maj:"sharp",min:"sharp"}),nt);function Xe(r){var f=r.normalized.rootNote,d=r.normalized.semitones,v=r.normalized.quality,C=ft.includes(v)?"maj":"min",R=Gn[f][C]==="sharp"?zn:Ln,U=R.indexOf(f),J=[].concat(Qt(R.slice(U)),Qt(R.slice(0,U)),Qt(R.slice(U)),Qt(R.slice(0,U))),dt=d.map(function(Ft){return J[Ft]});return r.normalized.notes=dt,r}function Un(r){return r.normalized.rootNote=E[r.input.rootNote],r.input.bassNote&&(r.normalized.bassNote=E[r.input.bassNote]),r}var Bn=c(6678),Ve=c.n(Bn),$n=c(3311),Hn=c.n($n),Kn=c(4908),mr=c.n(Kn),Wn=c(2569),gr=c.n(Wn);function br(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(r);f&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,v)}return d}function oe(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?br(Object(d),!0).forEach(function(v){Ot(r,v,d[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):br(Object(d)).forEach(function(v){Object.defineProperty(r,v,Object.getOwnPropertyDescriptor(d,v))})}return r}function Ot(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}function vr(r){return Zn(r)||Yn(r)||Vn(r)||Xn()}function Xn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vn(r,f){if(r){if(typeof r=="string")return Ye(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Ye(r,f)}}function Yn(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Zn(r){if(Array.isArray(r))return Ye(r)}function Ye(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,v=new Array(f);d<f;d++)v[d]=r[d];return v}function yr(r){var f=Ve()(r.normalized.intervals),d={quality:"",isSuspended:!1,extensions:[],alterations:[],adds:[],omits:[]};if(Qn(f))d.quality=T.power;else if(Jn(f))d.quality=T.bass;else{var v=qn(f,r.normalized.intents.major),C=kn(f,r.normalized.intents.major),R=ta(f,r,C,v),U=R.qualityIntervals,J=R.quality,dt=sa(f,J),Ft=["1"].concat(vr(U),vr(dt)),Jt=fa(f,Ft,J),Pt=Jt.adds,ve=Jt.alterations;d=oe(oe({},d),{},{quality:J,isSuspended:C,extensions:dt,alterations:ve,adds:Pt,omits:v})}return oe(oe({},r),{},{normalized:oe(oe({},r.normalized),d)})}function Qn(r){return wt(r,["1","5"])}function Jn(r){return wt(r,["1"])}function kn(r,f){return r.includes("4")||r.includes("11")&&f&&!r.includes("3")}function qn(r,f){var d=[];return(xt(r,["b3","3","4","11"])||!f&&xt(r,["b3","4"]))&&d.push(f?"3":"b3"),xt(r,["b5","5","#5","b13"])&&d.push("5"),d}function ta(r,f,d,v){var C=ea(r,f,d,v),R=[{qualityIntervals:["b3"],quality:T.mi},{qualityIntervals:["b3","6"],quality:T.mi6},{qualityIntervals:["b3","7"],quality:T.miMa7},{qualityIntervals:["b3","b7"],quality:T.mi7},{qualityIntervals:["3"],quality:T.ma},{qualityIntervals:["3","6"],quality:T.ma6},{qualityIntervals:["3","7"],quality:T.ma7},{qualityIntervals:["3","b7"],quality:T.dom7},{qualityIntervals:["3","#5"],quality:T.aug},{qualityIntervals:["b3","b5"],quality:T.dim},{qualityIntervals:["b3","b5","bb7"],quality:T.dim7}].sort(function(U,J){return J.qualityIntervals.length-U.qualityIntervals.length});return Hn()(R,function(U){return Wt(C,U.qualityIntervals)})}function ea(r,f,d,v){var C=[ra.bind(null,v),na.bind(null,d,f.normalized.intents.major),aa.bind(null,f.normalized.intents.alt),mr()];return e(C,Ve()(r))}function ra(r,f){var d=Ve()(f);return r.includes("3")?d.push("3"):r.includes("b3")&&d.push("b3"),d}function na(r,f,d){if(r){var v=gr()(d,"4");return v.push(f?"3":"b3"),v}return d}function aa(r,f){if(r){var d=gr()(f,"b5","#5");return d.push("5"),d}return f}function sa(r,f){var d=[];return ia(f)&&(oa(r,f)?d.push("9","11","13"):ua(r,f)?d.push("9","13"):la(r)?d.push("9","11"):ca(r)&&d.push("9")),d}function ia(r){return[T.ma7,T.dom7,T.mi7,T.miMa7].includes(r)}function xr(r){return[T.mi7,T.miMa7].includes(r)}function oa(r,f){return xr(f)&&W(r,"13")&&W(r,["11","#11"])&&W(r,["b9","9","#9"])}function ua(r,f){return!xr(f)&&W(r,"13")&&W(r,["b9","9","#9"])}function la(r){return W(r,"11")&&W(r,["b9","9","#9"])}function ca(r){return r.includes("9")}function fa(r,f,d){var v=[],C=[];return r.filter(function(R){return R!=="5"&&R!=="4"}).forEach(function(R){f.includes(R)||(pa(d,R)?C.push(R):v.push(R))}),ha(r)&&v.push("3"),{adds:Sr(v),alterations:Sr(C)}}function pa(r,f){var d,v=(d={},Ot(d,T.ma,["b5","#5","#11","b13"]),Ot(d,T.ma6,["b5","#5","#11","b13"]),Ot(d,T.ma7,["b5","#5","#11","b13"]),Ot(d,T.dom7,["b5","#5","b9","#9","#11","b13"]),Ot(d,T.mi,["b5","#5","#11","b13"]),Ot(d,T.mi6,["b5","#5","#11","b13"]),Ot(d,T.mi7,["b5","#5","#11","b13"]),Ot(d,T.miMa7,["b5","#5","#11","b13"]),Ot(d,T.aug,[]),Ot(d,T.dim,[]),Ot(d,T.dim7,[]),d);return v[r].includes(f)}function ha(r){return Wt(r,["3","4"])}function Sr(r){return r.sort(function(f,d){var v=Number.parseInt(f.replace(/[b#]/,"")),C=Number.parseInt(d.replace(/[b#]/,""));return v-C})}function da(r,f){var d=f.input.symbol,v=r.join("|"),C=new RegExp("^("+v+")(.*?)(/("+v+"))?$"),R=d.match(C);if(R&&R[1])return f.input.rootNote=R[1],R[2]&&(f.input.descriptor=R[2]),R[4]&&(f.input.bassNote=R[4]),f;throw new mt(f)}function Ar(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(r);f&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,v)}return d}function Ce(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?Ar(Object(d),!0).forEach(function(v){ma(r,v,d[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):Ar(Object(d)).forEach(function(v){Object.defineProperty(r,v,Object.getOwnPropertyDescriptor(d,v))})}return r}function ma(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var w={ma:"ma",mi:"mi",dim:"dim",halfDim:"halfDim",aug:"aug",seventh:"seventh",sus:"sus",sus2:"sus2",ninth:"ninth",eleventh:"eleventh",thirteenth:"thirteenth",fifthFlat:"b5",fifthSharp:"#5",ninthFlat:"b9",ninthSharp:"#9",eleventhSharp:"#11",thirteenthFlat:"b13",add3:"add3",add4:"add4",addb6:"addb6",add6:"add6",add69:"add69",add7:"add7",add9:"add9",add11:"add11",add13:"add13",bass:"bass",omit3:"omit3",omit5:"omit5",power:"power",alt:"alt"},Ze={"^":[w.ma,w.add7],\u0394:[w.ma,w.add7],M:w.ma,Ma:w.ma,Maj:w.ma,Major:w.ma,ma:w.ma,maj:w.ma,major:w.ma},ga=Tr(Ze,w.add7,function(r){return r+"7"}),ba=Tr(Ze,w.add7,function(r){return"add"+r+"7"}),Or=Ce(Ce(Ce(Ce({},Ze),ga),{},{"-":w.mi,m:w.mi,Mi:w.mi,Min:w.mi,Minor:w.mi,mi:w.mi,min:w.mi,minor:w.mi,"\xB0":w.dim,o:w.dim,0:w.dim,dim:w.dim,"dim.":w.dim,diminished:w.dim,\u00D8:w.halfDim,\u00F8:w.halfDim,h:w.halfDim,"+":w.aug,aug:w.aug,augmented:w.aug,7:w.seventh,4:w.sus,sus:w.sus,sus4:w.sus,suspended:w.sus,suspended4:w.sus,sus2:w.sus2,suspended2:w.sus2,9:w.ninth,11:w.eleventh,13:w.thirteenth,b3:w.mi,b5:w.fifthFlat,"\u266D5":w.fifthFlat,"#5":w.fifthSharp,"\u266F5":w.fifthSharp,b9:w.ninthFlat,"\u266D9":w.ninthFlat,addb9:w.ninthFlat,"add\u266D9":w.ninthFlat,"#9":w.ninthSharp,"\u266F9":w.ninthSharp,"add#9":w.ninthSharp,"add\u266F9":w.ninthSharp,"#11":w.eleventhSharp,"\u266F11":w.eleventhSharp,"add#11":w.eleventhSharp,b13:w.thirteenthFlat,"\u266D13":w.thirteenthFlat,addb13:w.thirteenthFlat,"add\u266D13":w.thirteenthFlat},ba),{},{2:w.add9,add2:w.add9,add3:w.add3,add4:w.add4,addb6:w.addb6,b6:w.addb6,6:w.add6,add6:w.add6,"6/9":w.add69,69:w.add69,96:w.add69,"9/6":w.add69,add9:w.add9,add11:w.add11,add13:w.add13,bass:w.bass,omit3:w.omit3,no3:w.omit3,omit5:w.omit5,no5:w.omit5,5:w.power,alt:w.alt,"alt.":w.alt,altered:w.alt});function Tr(r,f,d){return Object.keys(r).map(d).reduce(function(v,C){return v[C]=f,v},{})}var va=Object.keys(Or).sort(function(r,f){return f.length-r.length});let N=w,Ee={1:0,2:2,b3:3,3:4,4:5,b5:6,5:7,"#5":8,b6:8,6:9,bb7:9,b7:10,7:11,b9:13,9:14,"#9":15,11:17,"#11":18,b13:20,13:21};function Gt(r){return Aa(r)||Sa(r)||xa(r)||ya()}function ya(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xa(r,f){if(r){if(typeof r=="string")return Qe(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Qe(r,f)}}function Sa(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Aa(r){if(Array.isArray(r))return Qe(r)}function Qe(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,v=new Array(f);d<f;d++)v[d]=r[d];return v}function Oa(r,f){var d=[];return f.input.parsableDescriptor&&(d=Ta(f)),f.input.modifiers=d,f.normalized.intervals=wa(d,r),f.normalized.semitones=_a(f.normalized.intervals),f.normalized.intents=Ma(d),f}function Ta(r){var f=r.input.parsableDescriptor,d=[],v=new RegExp(va.map(Ra).join("|"),"g"),C=f.match(v),R=f,U;if(C&&C.forEach(function(J){U=Or[J],Array.isArray(U)||(U=[U]),U.forEach(function(dt){d.includes(dt)||(d.push(dt),R=R.replace(J,""))})}),d.length===0)throw new mt(r);if(R.trim().length>0)throw new Tt(r,R);return d}function wa(r,f){return r.includes(N.power)?["1","5"]:r.includes(N.bass)?["1"]:mr()(["1"].concat(Gt(ja(r)),Gt(Ca(r)),Gt(Ea(r,f)),Gt(Fa(r)),Gt(Ia(r)),Gt(Da(r,f)),Gt(Pa(r,f)),Gt(Na(r,f)))).sort(function(d,v){return Ee[d]-Ee[v]})}function ja(r){var f=[];return r.includes(N.omit3)?[]:(W(r,[N.sus,N.sus2])||(Je(r)?r.includes(N.eleventh)||f.push("3"):f.push("b3")),r.includes(N.add3)&&f.push("3"),f)}function Ca(r){var f=[];return W(r,[N.sus,N.add4])&&f.push("4"),f}function Ea(r,f){var d=[];return r.includes(N.omit5)?[]:((W(r,[N.dim,N.halfDim,N.fifthFlat])||ue(r,f,"b5"))&&d.push("b5"),(W(r,[N.aug,N.fifthSharp])||ue(r,f,"#5"))&&d.push("#5"),!d.length&&!r.includes(N.thirteenthFlat)&&d.push("5"),d)}function Fa(r){var f=[];return W(r,[N.addb6])&&f.push("b6"),W(r,[N.add6,N.add69])&&!jr(r)&&!W(r,[N.halfDim])&&f.push("6"),f}function Ia(r){var f=[];return W(r,[N.alt])&&f.push("b7"),W(r,[N.seventh,N.halfDim])?r.includes(N.dim)?f.push("bb7"):r.includes(N.halfDim)?f.push("b7"):f.push(wr(r)):W(r,[N.ninth,N.eleventh,N.thirteenth])&&f.push(wr(r)),r.includes(N.add7)&&f.push("7"),f}function wr(r){return r.includes(N.ma)?"7":"b7"}function Da(r,f){var d=[];return W(r,[N.add69,N.ninth,N.eleventh,N.thirteenth])&&xt(r,[N.ninthFlat,N.ninthSharp])&&d.push("9"),W(r,[N.sus2,N.add9])&&d.push("9"),(W(r,[N.ninthFlat])||ue(r,f,"b9"))&&d.push("b9"),(W(r,[N.ninthSharp])||ue(r,f,"#9"))&&d.push("#9"),d}function Pa(r,f){var d=[];return(W(r,[N.thirteenth])&&!Je(r)||W(r,[N.eleventh,N.add11]))&&d.push("11"),(W(r,[N.eleventhSharp])||ue(r,f,"#11"))&&d.push("#11"),d}function Na(r,f){var d=[];return(W(r,[N.add13,N.thirteenth])||W(r,[N.add6,N.add69])&&jr(r)||W(r,[N.add6,N.add69])&&W(r,[N.halfDim]))&&d.push("13"),(W(r,[N.thirteenthFlat])||ue(r,f,"b13"))&&d.push("b13"),d}function ue(r,f,d){return r.includes(N.alt)&&f.includes(d)}function Je(r){return xt(r,[N.mi,N.dim,N.dim7,N.halfDim])}function jr(r){return W(r,[N.seventh,N.ninth,N.eleventh,N.thirteenth])}function Ra(r){return r.replace(/[.\-*+?^${}()|[\]\\]/g,"\\$&")}function _a(r){return r.map(function(f){return Ee[f]}).sort(function(f,d){return f-d})}function Ma(r){return{major:Je(r),eleventh:r.includes(N.eleventh),alt:r.includes(N.alt)}}function za(r){return Ba(r)||Ua(r)||Ga(r)||La()}function La(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ga(r,f){if(r){if(typeof r=="string")return ke(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return ke(r,f)}}function Ua(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Ba(r){if(Array.isArray(r))return ke(r)}function ke(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,v=new Array(f);d<f;d++)v[d]=r[d];return v}function $a(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=["b5","#5","b9","#9","#11","b13"],d=["english","german","latin"],v=r.notationSystems,C=v===void 0?t()(d):v,R=r.altIntervals,U=R===void 0?t()(f):R,J=r.customFilters,dt=J===void 0?[]:J;return Ha(U,f),Ka(C,d),n(dt),Ft;function Ft(Jt){var Pt=[];if(!Wa(Jt)){var ve=new Y;Pt.push(qe(ve))}var ye=t()(M).filter(function(Nt){return C.includes(Nt.name)}),Ut,xe,Bt;if(!Pt.length)for(;ye.length&&!Ut;){Bt=ye.shift(),xe=[Zt.bind(null,r),da.bind(null,Bt.notes),$e,Oa.bind(null,U),he,Un,yr,Ct,Vt,Xe].concat(za(dt));try{Ut=e(xe,Jt),Ut?Ut.input.notationSystem=Bt.name:Pt.push(Xa(Bt.name))}catch(Nt){Pt.push(qe(Nt,Bt.name))}}return Ut||{error:Pt}}}function Ha(r,f){Cr("altIntervals",r,f,!0)}function Ka(r,f){Cr("notationSystems",r,f)}function Cr(r,f,d,v){if(!Array.isArray(f))throw new TypeError("'".concat(r,"' should be an array"));if(!v&&f.length===0)throw new TypeError("'".concat(r,"' cannot be empty"));f.forEach(function(C){if(!d.includes(C))throw new TypeError("'".concat(C,"' is not a valid value for ").concat(r))})}function Wa(r){return typeof r=="string"&&r.length>0}function Xa(r){var f=new at;return qe(f,r)}function qe(r,f){return{type:r.name,chord:r.chord,message:r.message,notationSystem:f}}let Er=$a;function Fr(r,f){var d=Object.keys(r);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(r);f&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(r,C).enumerable})),d.push.apply(d,v)}return d}function Fe(r){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?Fr(Object(d),!0).forEach(function(v){Va(r,v,d[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(d)):Fr(Object(d)).forEach(function(v){Object.defineProperty(r,v,Object.getOwnPropertyDescriptor(d,v))})}return r}function Va(r,f,d){return f in r?Object.defineProperty(r,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[f]=d,r}var Lt={sus2:"sus2",add2:"2",omit:"no",ma:"M",mi:"m",dim:"\xB0",aug7:"7+",eleventh:"11"};function Ya(r){var f,d=r.formatted.chordChanges;return Za(r)?(f=Lt.sus2,d=[]):Qa(r)?(f=Lt.add2,d=[]):Ja(r)?(f=Lt.aug7,d=[]):(f=r.formatted.descriptor.replace("mi",Lt.mi).replace(/[m|M]a/,Lt.ma).replace("dim",Lt.dim),ka(r)&&(f=f.replace(/7sus|9sus/,Lt.eleventh))),d=d.map(function(v){return v.replace(/[m|M]a/,Lt.ma).replace("omit",Lt.omit)}),Fe(Fe({},r),{},{formatted:Fe(Fe({},r.formatted),{},{descriptor:f,chordChanges:d})})}function Za(r){return wt(r.normalized.intervals,["1","5","9"])}function Qa(r){return wt(r.normalized.intervals,["1","3","5","9"])}function Ja(r){return wt(r.normalized.intervals,["1","3","#5","b7"])}function ka(r){return r.normalized.intents.eleventh}var qa=c(1966),ts=c.n(qa);function es(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"none",f=arguments.length>1?arguments[1]:void 0;if(r==="none")return f;var d={max:["4","b5","#5","6","bb7","b7","7","b9","9","#9","11","#11","b13","13"],core:["4","b9","9","#9","11","#11","b13","13"]},v=ts()(f.normalized.intervals,d[r]);xt(v,["b3","3"])&&v.push(f.normalized.intents.major?"3":"b3"),xt(v,["b5","5","#5"])&&v.push("5"),f.normalized.intervals=v,f.normalized.semitones=v.map(function(R){return Ee[R]}),f.normalized.intents.eleventh=!1,f.normalized.intents.alt=!1,r==="max"&&delete f.normalized.bassNote;var C=[yr,Ct,Xe];return e(C,f)}var rs=c(3137),ns=c.n(rs),Ir=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Dr={"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},as=ns()(Dr);function ss(r,f,d){var v=d.normalized,C=v.rootNote,R=v.bassNote,U=Nr(C);if(d.normalized.rootNote=Pr(U,r,f),d.formatted.rootNote=d.normalized.rootNote,R){var J=Nr(R);d.normalized.bassNote=Pr(J,r,f),d.formatted.bassNote=d.normalized.bassNote}return Xe(d)}function Pr(r,f,d){var v=Ir.indexOf(r),C=v+f,R=Math.floor(C/12),U=C-R*12,J=Ir[U];return d&&Dr[J]||J}function Nr(r){return as[r]||r}var tr={german:{Ab:"As",A:"A","A#":"Ais",Bb:"Hes",B:"H",C:"C","C#":"Cis",Db:"Des",D:"D","D#":"Dis",Eb:"Es",E:"E",F:"F","F#":"Fis",Gb:"Ges",G:"G","G#":"Gis"},latin:{Ab:"Lab",A:"La","A#":"La#",Bb:"Sib",B:"Si",C:"Do","C#":"Do#",Db:"Reb",D:"Re","D#":"Re#",Eb:"Mib",E:"Mi",F:"Fa","F#":"Fa#",Gb:"Solb",G:"Sol","G#":"Sol#"}},is=Object.keys(tr);function os(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"english",f=arguments.length>1?arguments[1]:void 0,d=r==="auto"?f.input.notationSystem:r;return d==="english"?f:is.includes(d)?(f.formatted.rootNote=tr[d][f.formatted.rootNote],f.formatted.bassNote&&(f.formatted.bassNote=tr[d][f.formatted.bassNote]),f):null}function Rr(r){return r&&r.formatted&&r.formatted.symbol?r.formatted.symbol:null}function us(r){delete r.parserConfiguration.notationSystems;var f=t()(r),d=Rr(r),v=Er(r.parserConfiguration),C=v(d);return f.input=C.input,f}function er(r){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},er(r)}function ls(r){return hs(r)||ps(r)||fs(r)||cs()}function cs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(r,f){if(r){if(typeof r=="string")return rr(r,f);var d=Object.prototype.toString.call(r).slice(8,-1);if(d==="Object"&&r.constructor&&(d=r.constructor.name),d==="Map"||d==="Set")return Array.from(r);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return rr(r,f)}}function ps(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function hs(r){if(Array.isArray(r))return rr(r)}function rr(r,f){(f==null||f>r.length)&&(f=r.length);for(var d=0,v=new Array(f);d<f;d++)v[d]=r[d];return v}function ds(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=r.useShortNamings,d=f===void 0?!1:f,v=r.simplify,C=v===void 0?"none":v,R=r.transposeValue,U=R===void 0?0:R,J=r.harmonizeAccidentals,dt=J===void 0?!1:J,Ft=r.useFlats,Jt=Ft===void 0?!1:Ft,Pt=r.printer,ve=Pt===void 0?"text":Pt,ye=r.notationSystem,Ut=ye===void 0?"english":ye,xe=r.customFilters,Bt=xe===void 0?[]:xe;n(Bt);var Nt=[];return["max","core"].includes(C)&&Nt.push(es.bind(null,C)),(dt||U!==0)&&Nt.push(ss.bind(null,U,Jt)),d&&Nt.push(Ya),Nt.push.apply(Nt,[os.bind(null,Ut),Vt].concat(ls(Bt))),bs;function bs(_r){if(!ms(_r))return null;var Mr=e(Nt,t()(_r));return ve==="raw"?us(Mr):Rr(Mr)}}var ms=function(f){return f&&er(f)==="object"&&!f.error&&f.input};let gs=ds})(),g})()})});var _n=Ie(mn(),1);var Cn=Ie(jn(),1),Le=class{constructor(p){let c=/.*?(irealb(?:ook)?):\/\/([^"]*)/.exec(p),e=decodeURIComponent(c[2]).split("===");e.length>1&&(this.name=e.pop()),this.songs=e.map(s=>{try{return new Ae(s,c[1]==="irealbook")}catch(t){let a=s.split("="),n=Ae.parseTitle(a[0].trim());return console.error(`[ireal-musicxml] [${n}] ${t}`),null}}).filter(s=>s!==null).reduce((s,t)=>{if(s.length>0){let a=(0,Cn.default)(s[s.length-1].title,t.title);if(a[0][0]===0&&a.every(n=>n[0]===0||n[1].match(/^\d+$/)))return s[s.length-1].cells=s[s.length-1].cells.concat(t.cells),s}return s.push(t),s},[])}},Ge=class{constructor(){this.annots=[],this.comments=[],this.bars="",this.spacer=0,this.chord=null}},ee=class{constructor(p,c="",g=null,e=null){this.note=p,this.modifiers=c,this.over=g,this.alternate=e}},Ae=class i{constructor(p,c=!1){if(this.cells=[],this.musicXml="",!p){this.title="",this.composer="",this.style="",this.key="",this.transpose=0,this.groove="",this.bpm=0,this.repeats=0;return}let g=p.split("=");if(c)this.title=i.parseTitle(g[0].trim()),this.composer=i.parseComposer(g[1].trim()),this.style=g[2].trim(),this.key=g[3],this.cells=this.parse(g[5]);else{this.title=i.parseTitle(g[0].trim()),this.composer=i.parseComposer(g[1].trim()),this.style=g[3].trim(),this.key=g[4],this.transpose=+g[5]||0,this.groove=g[7],this.bpm=+g[8],this.repeats=+g[9]||3;let e=g[6].split("1r34LbKcu7");this.cells=this.parse(ks(e[1]))}}static chordRegex=/^([A-G][b#]?)((?:sus|alt|add|[+\-^\dhob#])*)(\*.+?\*)*(\/[A-G][#b]?)?(\(.*?\))?/;static chordRegex2=/^([ Wp])()()(\/[A-G][#b]?)?(\(.*?\))?/;static regExps=[/^\*[a-zA-Z]/,/^T\d\d/,/^N./,/^<.*?>/,i.chordRegex,i.chordRegex2];parse(p){let c=p.trim(),g=[];for(;c;){let a=!1;for(let n=0;n<i.regExps.length;n++){let o=i.regExps[n].exec(c);if(o){a=!0,o.length<=2?(g.push(o[0]),c=c.substr(o[0].length)):(g.push(o),c=c.substr(o[0].length));break}}a||(c[0]!==","&&g.push(c[0]),c=c.substr(1))}let e=[],s=this.newCell(e),t=null;for(let a=0;a<g.length;a++){let n=g[a];switch(n instanceof Array&&(s.chord=this.parseChord(n),n=" "),n[0]){case"{":case"[":t&&(t.bars+=")",t=null),s.bars=n,n=null;break;case"|":t&&(t.bars+=")",t=null),s.bars="(",n=null;break;case"]":case"}":case"Z":t&&(t.bars+=n,t=null),n=null;break;case"n":s.chord=new ee(n[0]);break;case",":n=null;break;case"S":case"T":case"Q":case"N":case"U":case"s":case"l":case"f":case"*":s.annots.push(n),n=null;break;case"Y":s.spacer++,n=null,t=null;break;case"r":case"x":case"W":s.chord=new ee(n);break;case"<":n=n.substr(1,n.length-2),s.comments.push(n),n=null;break;default:}n&&a<g.length-1&&(t=s,s=this.newCell(e))}return e}static parseTitle(p){return p.replace(/(.*)(, )(A|The)$/g,"$3 $1")}static parseComposer(p){let c=p.split(/(\s+)/);return c.length==3?c[2]+c[1]+c[0]:p}parseChord(p){var c=p[1]||" ",g=p[2]||"",e=p[3]||"";e&&(g+=e.substr(1,e.length-2));var s=p[4]||"";s[0]==="/"&&(s=s.substr(1));var t=p[5]||null;if(t&&(p=i.chordRegex.exec(t.substr(1,t.length-2)),p?t=this.parseChord(p):t=null),c===" "&&!t&&!s)return null;if(s){var a=s[1]==="#"||s[1]==="b"?2:1;s=new ee(s.substr(0,a),s.substr(a),null,null)}else s=null;return new ee(c,g,s,t)}newCell(p){var c=new Ge;return p.push(c),c}};function ks(i){let p="",c;for(;i.length>51;)c=i.substring(0,50),i=i.substring(50),p=p+qs(c);return p=p+i,p=p.replace(/Kcl/g,"| x").replace(/LZ/g," |").replace(/XyQ/g,"   "),p}function qs(i){let p=i.split("");for(let c=0;c<5;c++)p[49-c]=i[c],p[c]=i[49-c];for(let c=10;c<24;c++)p[49-c]=i[c],p[c]=i[49-c];return p.join("")}var Nn=Ie(En(),1),Rn=Ie(Fn(),1);var Te={name:"ireal-musicxml",version:"2.0.4",description:"iReal Pro to MusicXML converter.",author:"Karim Ratib <karim.ratib@gmail.com> (https://github.com/infojunkie)",license:"GPL-3.0-only",repository:{type:"git",url:"https://github.com/infojunkie/ireal-musicxml"},homepage:"https://github.com/infojunkie/ireal-musicxml",type:"module",types:"./build/ireal-musicxml.d.ts",files:["LICENSE.txt","build/*","src/*"],bin:{"ireal-musicxml":"./src/cli/cli.js"},exports:{import:"./build/ireal-musicxml.js",require:"./build/ireal-musicxml.cjs"},scripts:{build:"npm run build:esm && npm run build:cjs && npm run build:d.ts","build:d.ts":"cp src/types/* build/","build:esm":"esbuild src/lib/index.js --bundle --format=esm --minify --sourcemap --outfile=build/ireal-musicxml.js","build:cjs":"esbuild src/lib/index.js --bundle --platform=node --packages=external --minify --sourcemap --outfile=build/ireal-musicxml.cjs",test:"npm run build && npm run test:lint && npm run test:spec && npm run test:ts","test:spec":'node --test --test-name-pattern="${TEST:-.*}"',"test:ts":"node --test --loader=ts-node/esm --require ts-node/register test/*.spec.ts","test:lint":"eslint src --fix"},devDependencies:{"@types/node":"^22.7.7","@xmldom/xmldom":"^0.8.0",esbuild:"0.24.0",eslint:"^9.13.0",resolve:"^1.22.8","sanitize-filename":"^1.6.3","ts-node":"^10.9.2",typescript:"^4.9.5","validate-with-xmllint":"^1.2.0","xpath.js":"^1.1.0"},dependencies:{"chord-symbol":"^3.0.0","fast-diff":"^1.2.0",jstoxml:"^2.0.6",promise:"^8.1.0"}};var we=class{static name=Te.name;static version=Te.version;static author=Te.author;static description=Te.description};var{chordParserFactory:ei,chordRendererFactory:ri}=Rn.default,tt=class{static Debug=0;static Info=1;static Warn=2;static Error=3;static None=4},In="4.0",Dn=7,Pn=40,Be=class i{static defaultOptions={divisions:768,notation:"rhythmic",step:"B",octave:4,notehead:"slash",noteheadSize:"large",date:!0,clef:!1,keySignature:!1,pageWidth:210,pageHeight:297,pageMargin:15,logLevel:tt.Warn};static sequenceAttributes=["divisions","key","time","staves","part-symbol","instruments","clef","staff-details","transpose","directive","measure-style"];static sequenceNote=["cue","pitch","rest","unpitched","duration","tie","voice","type","dot","accidental","time-modification","stem","notehead","notehead-text","staff","beam","notations","lyric","play"];static sequenceNotations=["accidental-mark","arpeggiate","articulations","dynamics","fermata","glissando","non-arpeggiate","ornaments","other-notation","slide","slur","technical","tied","tuplet"];static sequenceBarline=["bar-style","footnote","level","wavy-line","segno","coda","fermata","ending","repeat"];static mapAlter={"#":1,b:-1};static mapFifthsToAlters={sharp:["F","C","G","D","A","E","B"],flat:["B","E","A","D","G","C","F"]};static mapRepeats={"D.C. al Coda":i.prototype.convertDaCapo,"D.C. al Fine":i.prototype.convertDaCapo,"D.C. al 1st End.":i.prototype.convertDaCapo,"D.C. al 2nd End.":i.prototype.convertDaCapo,"D.C. al 3rd End.":i.prototype.convertDaCapo,"D.S. al Coda":i.prototype.convertDalSegno,"D.S. al Fine":i.prototype.convertDalSegno,"D.S. al 1st End.":i.prototype.convertDalSegno,"D.S. al 2nd End.":i.prototype.convertDalSegno,"D.S. al 3rd End.":i.prototype.convertDalSegno,Fine:i.prototype.convertFine,"3x":i.prototype.convertRepeatNx,"4x":i.prototype.convertRepeatNx,"5x":i.prototype.convertRepeatNx,"6x":i.prototype.convertRepeatNx,"7x":i.prototype.convertRepeatNx,"8x":i.prototype.convertRepeatNx};static mapTime={24:{beats:2,beatType:4,beatUnit:1},34:{beats:3,beatType:4,beatUnit:.5},44:{beats:4,beatType:4,beatUnit:1},54:{beats:5,beatType:4,beatUnit:1},64:{beats:6,beatType:4,beatUnit:1},74:{beats:7,beatType:4,beatUnit:1},38:{beats:3,beatType:8,beatUnit:1},58:{beats:5,beatType:8,beatUnit:1},68:{beats:6,beatType:8,beatUnit:1},78:{beats:7,beatType:8,beatUnit:1},98:{beats:9,beatType:8,beatUnit:1},12:{beats:12,beatType:8,beatUnit:3},22:{beats:2,beatType:2,beatUnit:1},32:{beats:3,beatType:2,beatUnit:.5}};static convert(p,c={}){let g=Object.assign({},this.defaultOptions,c);return new i(p,g).convert()}constructor(p,c){this.song=p,this.options=c,this.time={beats:4,beatType:4,beatUnit:1},this.fifths=null,this.measure=null,this.barRepeat=0,this.codas=[],this.repeats=0,this.shortChord=!1,this.emptyCells=0,this.emptyCellNewSystem=!1,this.cellWidth=(this.options.pageWidth-2*this.options.pageMargin)/16,this.parseChord=ei({altIntervals:["b5","b9"]}),this.renderChord=ri({useShortNamings:!0,printer:"raw"})}convert(){return Nn.default.toXML(this.convertSong(),{header:`
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE score-partwise PUBLIC "-//Recordare//DTD MusicXML ${In} Partwise//EN" "http://www.musicxml.org/dtds/partwise.dtd">
      `.trim(),indent:"  "})}convertSong(){return{_name:"score-partwise",_attrs:{version:In},_content:[{work:{"work-title":this.song.title}},{identification:[{_name:"creator",_attrs:{type:"composer"},_content:this.song.composer},{encoding:[{software:`@infojunkie/ireal-musicxml ${we.version}`},{...this.options.date&&{"encoding-date":i.convertDate(new Date)}},{_name:"supports",_attrs:{element:"accidental",type:"no"}},{_name:"supports",_attrs:{element:"transpose",type:"no"}},{_name:"supports",_attrs:{attribute:"new-page",element:"print",type:"yes",value:"yes"}},{_name:"supports",_attrs:{attribute:"new-system",element:"print",type:"yes",value:"yes"}}]}]},{defaults:{scaling:{millimeters:Dn,tenths:Pn},"page-layout":{"page-height":i._mmToTenths(this.options.pageHeight),"page-width":i._mmToTenths(this.options.pageWidth),"page-margins":{"left-margin":i._mmToTenths(this.options.pageMargin,4),"right-margin":i._mmToTenths(this.options.pageMargin,4),"top-margin":i._mmToTenths(this.options.pageMargin,4),"bottom-margin":i._mmToTenths(this.options.pageMargin,4)}}}},{"part-list":{_name:"score-part",_attrs:{id:"P1"},_content:{_name:"part-name",_attrs:{"print-object":"no"},_content:"Lead Sheet"}}},{_name:"part",_attrs:{id:"P1"},_content:this.convertMeasures()}]}}static convertDate(p){return new Date(p.getTime()-p.getTimezoneOffset()*6e4).toISOString().split("T")[0]}static Measure=class{constructor(p){this.body={_name:"measure",_attrs:{number:p},_content:[]},this.attributes=[],this.chords=[],this.barlines=[],this.barEnding=null}number(){return this.body._attrs.number}assemble(){return this.attributes.length&&this.body._content.push({attributes:i.reorderSequence(this,this.attributes,i.sequenceAttributes)}),this.chords.forEach(p=>{this.body._content.push({harmony:p.harmony},...p.notes.map(c=>({note:c})))}),this.barlines[0]._content=i.reorderSequence(this,this.barlines[0]._content,i.sequenceBarline),this.body._content.splice(1,0,this.barlines[0]),this.barlines[1]._content=i.reorderSequence(this,this.barlines[1]._content,i.sequenceBarline),this.body._content.push(this.barlines[1]),this.body}};static Chord=class{constructor(p,c,g){this.harmony=p,this.notes=c,this.ireal=g,this.spaces=0,this.fermata=!1,this.short=!1}clone(){let p=new i.Chord(structuredClone(this.harmony),structuredClone(this.notes),structuredClone(this.ireal));return p.spaces=this.spaces,p.fermata=this.fermata,p.short=this.short,p}beats(){return this.short?1:1+this.spaces}};convertMeasures(){let p=e=>e>0&&e%16===0,c=this.song.cells.reduce((e,s,t)=>{if((s.bars.match(/\(|\{|\[/)||!this.measure&&(s.chord||s.annots.length||s.comments.length))&&(this.measure&&(this._log(tt.Warn,"Starting a new measure over existing measure. Closing current measure first."),this.measure.barlines.push(this.convertBarline("","right")),this.adjustChordsDuration(this.measure)&&e.push(this.measure)),this.measure=new i.Measure(e.length+1,this.options),e.length||(this.measure.attributes.push({divisions:this.options.divisions},{_name:"clef",_attrs:[{"print-object":this.options.clef?"yes":"no"}],_content:[{sign:"G"},{line:2}]},{"staff-details":{"staff-lines":0}},{"measure-style":[{_name:"slash",_attrs:{type:"start","use-stems":this.options.notation==="rhythmic"?"yes":"no"}}]},this.convertKey()),this.song.bpm&&this.measure.body._content.push(this.convertTempo(this.song.bpm)),this.measure.body._content.push(this.convertStyleAndGroove(this.song.style,this.song.groove))),this.measure.barlines.push(this.convertBarline(s.bars,"left",p(t)||this.emptyCellNewSystem?"regular":void 0)),this.barRepeat&&(this.measure.chords=e[e.length-this.barRepeat-1].chords.map(a=>a.clone()))),!this.measure)return(s.chord||s.annots.length||s.comments.length||s.bars&&s.bars!==")")&&this._log(tt.Warn,`Found non-empty orphan cell ${JSON.stringify(s)}`,e[e.length-1]),this.emptyCells++,p(t)&&(this.emptyCellNewSystem=!0),e;if((p(t)||this.emptyCellNewSystem)&&this.measure.body._content.splice(0,0,{_name:"print",_attrs:{"new-system":"yes"},_content:{...this.emptyCellNewSystem&&{"system-layout":{"system-margins":[{"left-margin":i._mmToTenths(this.cellWidth*this.emptyCells)},{"right-margin":"0.00"}]}}}}),!this.emptyCellNewSystem&&this.emptyCells>0&&(this.measure.body._content[0]?._name==="print"&&this.measure.body._content[0]._attrs?.["new-system"]==="yes"?e[e.length-1].body._content.splice(0,0,{_name:"print",_content:{"system-layout":{"system-margins":[{"left-margin":"0.00"},{"right-margin":i._mmToTenths(this.cellWidth*this.emptyCells)}]}}}):this.measure.body._content.splice(0,0,{_name:"print",_content:{"measure-layout":{"measure-distance":i._mmToTenths(this.cellWidth*this.emptyCells)}}})),this.emptyCellNewSystem=!1,this.emptyCells=0,s.chord)switch(s.chord.note){case"x":{this.barRepeat=1,this.measure.chords=e[e.length-this.barRepeat].chords.map(a=>a.clone());break}case"r":{this.barRepeat=2,this.measure.chords=e[e.length-this.barRepeat].chords.map(a=>a.clone());break}case"p":if(this.measure.chords.length){this.measure.chords[this.measure.chords.length-1].spaces++;break}case"W":{let a=this.measure;if(a.chords.length||(a=e.slice().reverse().find(n=>n.chords.length),a||this._log(tt.Error,`Cannot find any measure with chords prior to ${JSON.stringify(s.chord)}`)),a){let n=a.chords[a.chords.length-1].ireal;n.over=s.chord.over,n.alternate=s.chord.alternate,this.measure.chords.push(this.convertChord(n))}break}case" ":{this._log(tt.Warn,`Unhandled empty/alternate chord ${JSON.stringify(s.chord)}`);break}default:this.measure.chords.push(this.convertChord(s.chord)),this.measure.chords[this.measure.chords.length-1].short=this.shortChord}else this.barRepeat||this.measure.chords.length&&this.measure.chords[this.measure.chords.length-1].spaces++;return s.annots.forEach(a=>{switch(a[0]){case"*":{let n=a.slice(1);this.measure.body._content.push(this.convertSection(n));break}case"T":{let n=a.slice(1);this.measure.attributes.push(this.convertTime(n));break}case"S":{this.measure.body._content.push(this.convertSegno());break}case"N":{let n=parseInt(a.slice(1));if(n<1&&(n=e.slice().reverse().find(l=>!!l.barEnding)?.barEnding??1),this.measure.barlines[0]._content.push(this.convertEnding(n,"start")),n>1){e[e.length-1].barlines[1]._content.push(this.convertEnding(n-1,"stop"));let o=e.slice().reverse().find(l=>l.barEnding===n-1);if(!o)this._log(tt.Error,`Cannot find ending ${n-1} in right barline of any measure`);else{let l=o.barlines[1]._content.findIndex(h=>!!h&&h._name==="ending");l===-1&&this._log(tt.Error,`Cannot find ending ${n-1} in right barline`,o),delete o.barlines[1]._content[l]}}this.measure.barEnding=n;break}case"Q":{this.measure.body._content.push(this.convertToCoda()),this.codas.push(this.measure);break}case"l":{this.measure.chords.length&&(this.measure.chords[this.measure.chords.length-1].short=!1),this.shortChord=!1;break}case"s":{this.measure.chords.length&&(this.measure.chords[this.measure.chords.length-1].short=!0),this.shortChord=!0;break}case"f":{this.measure.chords[this.measure.chords.length-1].fermata=!0;break}case"U":{this.measure.body._content.push(this.convertFine("END"));break}default:this._log(tt.Warn,`Unhandled annotation "${a}"`)}}),s.comments.map(a=>a.trim()).forEach(a=>{let n=this._map(i.mapRepeats,a);n?this.measure.body._content.push(n.call(this,a)):this.measure.body._content.push(this.convertComment(a))}),s.bars.match(/\)|\}|\]|Z/)&&this.measure.chords.length&&(this.measure.barlines.push(this.convertBarline(s.bars,"right")),this.measure.barEnding&&this.measure.barlines[1]._content.push(this.convertEnding(this.measure.barEnding,"discontinue")),this.adjustChordsDuration(this.measure)&&e.push(this.measure),this.measure=null,this.barRepeat&&this.barRepeat--),e},[]),g=this.song.cells.length%16-this.emptyCells;if(g>0&&c.length>0&&c[c.length-1].body._content.splice(0,0,{_name:"print",_content:{"system-layout":{"system-margins":[{"left-margin":"0.00"},{"right-margin":i._mmToTenths(this.cellWidth*g)}]}}}),this.codas.length){let e=this.codas[this.codas.length-1],s=e.body._content.findIndex(t=>t._name==="direction"&&Array.isArray(t._content)&&t._content.some(a=>a._name==="sound"&&Object.keys(a._attrs).includes("tocoda")));s===-1&&this._log(tt.Warn,"Cannot find sound direction",e),e.body._content[s]=this.convertCoda()}return c.map(e=>e.assemble())}static reorderSequence(p,c,g){return c.filter(e=>Object.keys(e).length).sort((e,s)=>{let t=Object.keys(e)[0];t==="_name"&&(t=e[t]);let a=Object.keys(s)[0];a==="_name"&&(a=s[a]);let n=g.indexOf(t),o=g.indexOf(a);return n===-1&&this._log(tt.Warn,`Unrecognized element "${t}"`,p),o===-1&&this._log(tt.Warn,`Unrecognized element "${a}"`,p),n-o})}convertRepeatNx(p){let c=null;(c=p.match(/(\d+)x/))!==null&&(this.repeats=c[1])}convertFine(p){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:p}},{_name:"sound",_attrs:{fine:"yes"}}]}}convertDaCapo(p){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:p}},{_name:"sound",_attrs:{dacapo:"yes"}}]}}convertDalSegno(p){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:p}},{_name:"sound",_attrs:{dalsegno:"yes"}}]}}convertComment(p){return{_name:"direction",_attrs:{placement:p[0]==="*"?"above":"below"},_content:{"direction-type":{words:p[0]==="*"?p.slice(3):p}}}}convertEnding(p,c){return{_name:"ending",_attrs:{number:p,type:c},_content:`${p}.`}}convertBarline(p,c,g=void 0){let e=c==="left"?"none":"regular",s=null;return p.match(/\[|\]/)?e="light-light":p.match(/Z/)?e="light-heavy":p.match(/\{|\}/)&&(e=c==="left"?"heavy-light":"light-heavy",s=c==="left"?"forward":"backward"),s==="forward"&&(this.repeats=2),{_name:"barline",_attrs:{location:c},_content:[{"bar-style":g??e},{...s&&{_name:"repeat",_attrs:{direction:s,...s==="backward"&&{times:this.repeats}}}}]}}convertSection(p){return p==="i"&&(p="Intro"),{_name:"direction",_attrs:{placement:"above"},_content:{"direction-type":{rehearsal:p}}}}convertSegno(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"segno"}},{_name:"sound",_attrs:{segno:"segno"}}]}}convertCoda(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"coda"}},{_name:"sound",_attrs:{coda:"coda"}}]}}convertToCoda(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{words:"To Coda"}},{_name:"sound",_attrs:{tocoda:"coda"}}]}}convertTempo(p){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{_name:"metronome",_attrs:{parentheses:"no"},_content:[{"beat-unit":this.calculateChordDuration(1)[0].type},{"per-minute":p}]}]},{_name:"sound",_attrs:{tempo:p}}]}}convertTime(p){return this.time=this._map(i.mapTime,p,{beats:parseInt(p[0]),beatType:parseInt(p[1]),beatUnit:1},`Unexpected time signature ${p}`),{time:[{beats:this.time.beats},{"beat-type":this.time.beatType}]}}adjustChordsDuration(p){if(p.chords.length>this.time.beats)return this._log(tt.Error,`Too many chords (${p.chords.length} out of ${this.time.beats})`,p),!0;let c=p.chords.reduce((g,e)=>g+e.beats()*this.time.beatUnit,0);if(!c)return this._log(tt.Warn,"No chord found. Skipping current measure.",p),!1;if(c>this.time.beats){let g=0;for(;c>this.time.beats;)p.chords[g].spaces>0&&(p.chords[g].spaces--,c-=this.time.beatUnit),g=(g+1)%p.chords.length}else{let g=0,e=!1;for(;c<this.time.beats;)if(p.chords[g].short||(p.chords[g].spaces++,c+=this.time.beatUnit,e=!0),g=(g+1)%p.chords.length,g===0&&!e){this._log(tt.Warn,"Cannot add more beats to the current measure.",p);break}}return p.chords=p.chords.map(g=>(g.notes=this.calculateChordDuration(g.beats()*this.time.beatUnit).map((e,s,t)=>this.convertChordNote(e,s===t.length-1?g.fermata:!1,this.options.notation==="rhythmic"&&t.length>1?s>0?"stop":"start":null)),g)),!0}calculateChordDuration(p){let c={1:[{t:"eighth",d:0,b:1}],2:[{t:"quarter",d:0,b:2}],3:[{t:"quarter",d:1,b:3}],4:[{t:"half",d:0,b:4}],5:[{t:"quarter",d:1,b:3},{t:"quarter",d:0,b:2}],6:[{t:"half",d:1,b:6}],7:[{t:"half",d:2,b:7}],8:[{t:"whole",d:0,b:8}],9:[{t:"half",d:1,b:6},{t:"quarter",d:1,b:3}],10:[{t:"half",d:1,b:6},{t:"half",d:0,b:4}],11:[{t:"half",d:2,b:7},{t:"half",d:0,b:4}],12:[{t:"whole",d:1,b:12}],13:[{t:"half",d:2,b:7},{t:"half",d:1,b:6}],14:[{t:"whole",d:2,b:14}],15:[{t:"whole",d:0,b:8},{t:"half",d:2,b:7}]};if(this.options.notation==="slash"){let g=8/this.time.beatType;return Array(p).fill(this._map(c,g,[],`Unexpected beat count 1 for time signature ${this.time.beats}/${this.time.beatType}`).map(e=>({duration:e.b*this.options.divisions/2,type:e.t,dots:e.d}))[0])}else{let g=p*8/this.time.beatType;return this._map(c,g,[],`Unexpected beat count ${p} for time signature ${this.time.beats}/${this.time.beatType}`).map(e=>({duration:e.b*this.options.divisions/2,type:e.t,dots:e.d}))}}convertChordNote(p,c=!1,g=null){let e=i.mapFifthsToAlters[this.fifths>=0?"sharp":"flat"].slice(0,Math.abs(this.fifths)),s={_name:"pitch",_content:[{step:this.options.step},{alter:e.includes(this.options.step)?this.fifths>0?1:-1:0},{octave:this.options.octave}]},t=[];return c&&t.push({_name:"fermata"}),g&&t.push({_name:"tied",_attrs:{type:g}}),i.reorderSequence(this.measure,[s,{_name:"cue"},{_name:"notehead",_content:this.options.notehead,_attrs:[{"font-size":this.options.noteheadSize}]},{duration:p.duration},{voice:1},{_name:"type",_attrs:{size:"full"},_content:p.type},{...t.length&&{notations:i.reorderSequence(this.measure,t,i.sequenceNotations)}}].concat(Array(p.dots).fill({_name:"dot"})),i.sequenceNote)}convertChordDegree(p,c,g){return{_name:"degree",_attrs:{"print-object":"no"},_content:[{"degree-value":p},{"degree-alter":g},{"degree-type":c}]}}convertChordSymbol(p){let c=this.renderChord(this.parseChord(`${p.note}${p.modifiers}`));if(!c)return this._log(tt.Warn,`Unrecognized chord "${p.note}${p.modifiers}"`),{rootStep:null,rootAlter:null,chordKind:null,chordDegrees:[],chordText:null};let g=c.input.rootNote[0],e=this._map(i.mapAlter,c.input.rootNote[1]||null,null,`Unrecognized accidental in chord "${c.input.rootNote}"`),s=c.formatted.descriptor+c.formatted.chordChanges.join(""),t={major:"major",major6:"major-sixth",major7:"major-seventh",dominant7:"dominant",minor:"minor",minor6:"minor-sixth",minor7:"minor-seventh",minorMajor7:"major-minor",augmented:"augmented",diminished:"diminished",diminished7:"diminished-seventh",power:"power"},a=this._map(t,c.normalized.quality,"",`Unrecognized chord quality "${c.normalized.quality}"`);if(c.normalized.extensions.length){let o=Math.max(...c.normalized.extensions.map(h=>parseInt(h))).toString(),l={9:"-ninth",11:"-11th",13:"-13th"};a=a.split("-")[0]+this._map(l,o,"",`Unhandled extension ${o}`),a==="dominant-11th"&&(c.normalized.isSuspended=!1)}[{intervals:["1","4","5"],kind:"suspended-fourth",strict:!0},{intervals:["1","5","9"],kind:"suspended-second",strict:!0},{intervals:["1","b3","b5","b7"],kind:"half-diminished",strict:!0},{intervals:["1","3","#5","b7"],kind:"augmented-seventh",strict:!1}].some(o=>{if((!o.strict||c.normalized.intervals.length===o.intervals.length)&&o.intervals.every((l,h)=>l===c.normalized.intervals[h]))return a=o.kind,o.intervals.forEach(l=>{c.normalized.alterations=c.normalized.alterations.filter(h=>h===l),c.normalized.adds=c.normalized.adds.filter(h=>h===l),c.normalized.omits=c.normalized.omits.filter(h=>h===l)}),c.normalized.intervals.forEach(l=>{o.intervals.includes(l)||c.normalized.adds.push(l)}),!0});let n=[];return c.normalized.isSuspended&&!a.includes("suspended")&&(c.normalized.adds.push("4"),c.normalized.adds.includes("3")||c.normalized.omits.push("3")),c.normalized.alterations.forEach(o=>{let l=o.slice(1);n.push(this.convertChordDegree(l,l==="5"||c.normalized.extensions.includes(l)?"alter":"add",this._map(i.mapAlter,o[0],0,`Unrecognized alter symbol in "${o}"`)))}),c.normalized.adds.forEach(o=>{let l=Object.keys(i.mapAlter).includes(o[0])?o[0]:null,h=l?o.slice(1):o;n.push(this.convertChordDegree(h,"add",this._map(i.mapAlter,l,0,`Unrecognized alter symbol in "${o}"`)))}),c.normalized.omits.forEach(o=>{let l=Object.keys(i.mapAlter).includes(o[0])?o[0]:null,h=l?o.slice(1):o;n.push(this.convertChordDegree(h,"subtract",this._map(i.mapAlter,l,0,`Unrecognized alter symbol in "${o}"`)))}),{rootStep:g,rootAlter:e,chordKind:a,chordDegrees:n,chordText:s}}convertChord(p){let c=null;if(p.note==="n")c=[{root:[{_name:"root-step",_attrs:{text:""},_content:this.options.step}]},{_name:"kind",_attrs:{text:"N.C."},_content:"none"}];else{let{rootStep:g,rootAlter:e,chordKind:s,chordDegrees:t,chordText:a}=this.convertChordSymbol(p),n=p.over?[{"bass-step":p.over.note[0]},{...p.over.note[1]&&{"bass-alter":this._map(i.mapAlter,p.over.note[1],null,`Unrecognized accidental in bass note "${p.over.note}"`)}}]:null;c=[{root:[{"root-step":g},{...e&&{"root-alter":e}}]},{_name:"kind",_attrs:{text:a,"use-symbols":"no"},_content:s},{...n&&{bass:n}}].concat(t)}return p.alternate&&this._log(tt.Warn,`Unhandled alternate chord ${JSON.stringify(p.alternate)}`),new i.Chord(c,this.calculateChordDuration(1).map(g=>this.convertChordNote(g)),p)}convertKey(){let p={C:0,G:1,D:2,A:3,E:4,B:5,"F#":6,"C#":7,F:-1,Bb:-2,Eb:-3,Ab:-4,Db:-5,Gb:-6,Cb:-7,"A-":0,"E-":1,"B-":2,"F#-":3,"C#-":4,"G#-":5,"D#-":6,"A#-":7,"D-":-1,"G-":-2,"C-":-3,"F-":-4,"Bb-":-5,"Eb-":-6,"Ab-":-7};return this.fifths=this._map(p,this.song.key,0,`Unrecognized key signature "${this.song.key}"`),{_name:"key",_attrs:[{"print-object":this.options.keySignature?"yes":"no"}],_content:[{fifths:this.fifths},{mode:this.song.key.slice(-1)==="-"?"minor":"major"}]}}convertStyleAndGroove(p,c){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{words:p}]},{sound:[{play:[{_name:"other-play",_attrs:{type:"groove"},_content:c||p}]}]}]}}_log(p,c,g=this.measure){if(p<this.options.logLevel)return;let e=`[ireal-musicxml] [${this.song.title}${g?"#"+g.number():""}] ${c}`,s="warn";switch(p){case tt.Debug:s="debug";break;case tt.Info:s="info";break;case tt.Warn:s="warn";break;case tt.Error:s="error";break}console[s](e)}_map(p,c,g,e,s=tt.Warn,t=this.measure){return c?c in p?p[c]:(e&&this._log(s,e,t),g||null):g}static _mmToTenths(p,c=2){let g=p*Pn/Dn,e=Math.pow(10,c);return Math.round(g*e)/e}};function ni(i,p={}){let c=new Le(i);return c.songs.forEach(g=>{g.musicXml=Be.convert(g,p)}),c}async function Ei(i,p={}){return new _n.default(c=>c(ni(i,p)))}export{Ge as Cell,ee as Chord,Be as Converter,tt as LogLevel,Le as Playlist,Ae as Song,we as Version,Ei as convert,ni as convertSync};
//# sourceMappingURL=ireal-musicxml.js.map
