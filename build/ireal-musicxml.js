(()=>{var sh=Object.create;var ni=Object.defineProperty;var oh=Object.getOwnPropertyDescriptor;var uh=Object.getOwnPropertyNames;var lh=Object.getPrototypeOf,ch=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ph=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of uh(t))!ch.call(e,i)&&i!==r&&ni(e,i,{get:()=>t[i],enumerable:!(n=oh(t,i))||n.enumerable});return e};var $=(e,t,r)=>(r=e!=null?sh(lh(e)):{},ph(t||!e||!e.__esModule?ni(r,"default",{value:e,enumerable:!0}):r,e));var _r=l((iT,li)=>{"use strict";li.exports=yr;function yr(e){te.length||(yt(),si=!0),te[te.length]=e}var te=[],si=!1,yt,ee=0,fh=1024;function ii(){for(;ee<te.length;){var e=ee;if(ee=ee+1,te[e].call(),ee>fh){for(var t=0,r=te.length-ee;t<r;t++)te[t]=te[t+ee];te.length-=ee,ee=0}}te.length=0,ee=0,si=!1}var ai=typeof global<"u"?global:self,oi=ai.MutationObserver||ai.WebKitMutationObserver;typeof oi=="function"?yt=hh(ii):yt=ui(ii);yr.requestFlush=yt;function hh(e){var t=1,r=new oi(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}function ui(e){return function(){var r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),e()}}}yr.makeRequestCallFromTimer=ui});var pe=l((aT,fi)=>{"use strict";var mh=_r();function qt(){}var Ae=null,we={};function dh(e){try{return e.then}catch(t){return Ae=t,we}}function gh(e,t){try{return e(t)}catch(r){return Ae=r,we}}function bh(e,t,r){try{e(t,r)}catch(n){return Ae=n,we}}fi.exports=V;function V(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("Promise constructor's argument is not a function");this._x=0,this._y=0,this._z=null,this._A=null,e!==qt&&pi(e,this)}V._B=null;V._C=null;V._D=qt;V.prototype.then=function(e,t){if(this.constructor!==V)return vh(this,e,t);var r=new V(qt);return _t(this,new ci(e,t,r)),r};function vh(e,t,r){return new e.constructor(function(n,i){var a=new V(qt);a.then(n,i),_t(e,new ci(t,r,a))})}function _t(e,t){for(;e._y===3;)e=e._z;if(V._B&&V._B(e),e._y===0){if(e._x===0){e._x=1,e._A=t;return}if(e._x===1){e._x=2,e._A=[e._A,t];return}e._A.push(t);return}yh(e,t)}function yh(e,t){mh(function(){var r=e._y===1?t.onFulfilled:t.onRejected;if(r===null){e._y===1?qr(t.promise,e._z):xe(t.promise,e._z);return}var n=gh(r,e._z);n===we?xe(t.promise,Ae):qr(t.promise,n)})}function qr(e,t){if(t===e)return xe(e,new TypeError("A promise cannot be resolved with itself."));if(t&&(typeof t=="object"||typeof t=="function")){var r=dh(t);if(r===we)return xe(e,Ae);if(r===e.then&&t instanceof V){e._y=3,e._z=t,Sr(e);return}else if(typeof r=="function"){pi(r.bind(t),e);return}}e._y=1,e._z=t,Sr(e)}function xe(e,t){e._y=2,e._z=t,V._C&&V._C(e,t),Sr(e)}function Sr(e){if(e._x===1&&(_t(e,e._A),e._A=null),e._x===2){for(var t=0;t<e._A.length;t++)_t(e,e._A[t]);e._A=null}}function ci(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function pi(e,t){var r=!1,n=bh(e,function(i){r||(r=!0,qr(t,i))},function(i){r||(r=!0,xe(t,i))});!r&&n===we&&(r=!0,xe(t,Ae))}});var di=l((sT,mi)=>{"use strict";var hi=pe();mi.exports=hi;hi.prototype.done=function(e,t){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,function(n){setTimeout(function(){throw n},0)})}});var bi=l((oT,gi)=>{"use strict";var St=pe();gi.exports=St;St.prototype.finally=function(e){return this.then(function(t){return St.resolve(e()).then(function(){return t})},function(t){return St.resolve(e()).then(function(){throw t})})}});var qi=l((uT,_i)=>{"use strict";var D=pe();_i.exports=D;var _h=fe(!0),qh=fe(!1),Sh=fe(null),xh=fe(void 0),Ah=fe(0),wh=fe("");function fe(e){var t=new D(D._D);return t._y=1,t._z=e,t}D.resolve=function(e){if(e instanceof D)return e;if(e===null)return Sh;if(e===void 0)return xh;if(e===!0)return _h;if(e===!1)return qh;if(e===0)return Ah;if(e==="")return wh;if(typeof e=="object"||typeof e=="function")try{var t=e.then;if(typeof t=="function")return new D(t.bind(e))}catch(r){return new D(function(n,i){i(r)})}return fe(e)};var Te=function(e){return typeof Array.from=="function"?(Te=Array.from,Array.from(e)):(Te=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(e))};D.all=function(e){var t=Te(e);return new D(function(r,n){if(t.length===0)return r([]);var i=t.length;function a(u,o){if(o&&(typeof o=="object"||typeof o=="function"))if(o instanceof D&&o.then===D.prototype.then){for(;o._y===3;)o=o._z;if(o._y===1)return a(u,o._z);o._y===2&&n(o._z),o.then(function(f){a(u,f)},n);return}else{var c=o.then;if(typeof c=="function"){var p=new D(c.bind(o));p.then(function(f){a(u,f)},n);return}}t[u]=o,--i===0&&r(t)}for(var s=0;s<t.length;s++)a(s,t[s])})};function xr(e){return{status:"fulfilled",value:e}}function vi(e){return{status:"rejected",reason:e}}function Th(e){if(e&&(typeof e=="object"||typeof e=="function")){if(e instanceof D&&e.then===D.prototype.then)return e.then(xr,vi);var t=e.then;if(typeof t=="function")return new D(t.bind(e)).then(xr,vi)}return xr(e)}D.allSettled=function(e){return D.all(Te(e).map(Th))};D.reject=function(e){return new D(function(t,r){r(e)})};D.race=function(e){return new D(function(t,r){Te(e).forEach(function(n){D.resolve(n).then(t,r)})})};D.prototype.catch=function(e){return this.then(null,e)};function yi(e){if(typeof AggregateError=="function")return new AggregateError(e,"All promises were rejected");var t=new Error("All promises were rejected");return t.name="AggregateError",t.errors=e,t}D.any=function(t){return new D(function(r,n){var i=Te(t),a=!1,s=[];function u(c){a||(a=!0,r(c))}function o(c){s.push(c),s.length===i.length&&n(yi(s))}i.length===0?n(yi(s)):i.forEach(function(c){D.resolve(c).then(u,o)})})}});var wi=l((lT,Ai)=>{"use strict";var Si=_r(),xt=[],Ar=[],Ih=Si.makeRequestCallFromTimer(Oh);function Oh(){if(Ar.length)throw Ar.shift()}Ai.exports=wr;function wr(e){var t;xt.length?t=xt.pop():t=new xi,t.task=e,Si(t)}function xi(){this.task=null}xi.prototype.call=function(){try{this.task.call()}catch(e){wr.onerror?wr.onerror(e):(Ar.push(e),Ih())}finally{this.task=null,xt[xt.length]=this}}});var Oi=l((cT,Ii)=>{"use strict";var he=pe(),Tr=wi();Ii.exports=he;he.denodeify=function(e,t){return typeof t=="number"&&t!==1/0?Ch(e,t):Eh(e)};var Ti="function (err, res) {if (err) { rj(err); } else { rs(res); }}";function Ch(e,t){for(var r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([Ti]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(he,e)}function Eh(e){for(var t=Math.max(e.length-1,3),r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+Ti+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(a,s){return"case "+s+":res = fn.call("+["self"].concat(r.slice(0,s)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(he,e)}he.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),r=typeof t[t.length-1]=="function"?t.pop():null,n=this;try{return e.apply(this,arguments).nodeify(r,n)}catch(i){if(r===null||typeof r>"u")return new he(function(a,s){s(i)});Tr(function(){r.call(n,i)})}}};he.prototype.nodeify=function(e,t){if(typeof e!="function")return this;this.then(function(r){Tr(function(){e.call(t,null,r)})},function(r){Tr(function(){e.call(t,r)})})}});var Ei=l((pT,Ci)=>{"use strict";var B=pe();Ci.exports=B;B.enableSynchronous=function(){B.prototype.isPending=function(){return this.getState()==0},B.prototype.isFulfilled=function(){return this.getState()==1},B.prototype.isRejected=function(){return this.getState()==2},B.prototype.getValue=function(){if(this._y===3)return this._z.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._z},B.prototype.getReason=function(){if(this._y===3)return this._z.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._z},B.prototype.getState=function(){return this._y===3?this._z.getState():this._y===-1||this._y===-2?0:this._y}};B.disableSynchronous=function(){B.prototype.isPending=void 0,B.prototype.isFulfilled=void 0,B.prototype.isRejected=void 0,B.prototype.getValue=void 0,B.prototype.getReason=void 0,B.prototype.getState=void 0}});var Fi=l((fT,ji)=>{"use strict";ji.exports=pe();di();bi();qi();Oi();Ei()});var Pi=l((hT,Di)=>{"use strict";Di.exports=Fi()});var Ki=l((mT,ki)=>{var W=-1,U=1,z=0;function ke(e,t,r,n,i){if(e===t)return e?[[z,e]]:[];if(r!=null){var a=Lh(e,t,r);if(a)return a}var s=Or(e,t),u=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=At(e,t);var o=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var c=jh(e,t);return u&&c.unshift([z,u]),o&&c.push([z,o]),Cr(c,i),n&&Ph(c),c}function jh(e,t){var r;if(!e)return[[U,t]];if(!t)return[[W,e]];var n=e.length>t.length?e:t,i=e.length>t.length?t:e,a=n.indexOf(i);if(a!==-1)return r=[[U,n.substring(0,a)],[z,i],[U,n.substring(a+i.length)]],e.length>t.length&&(r[0][0]=r[2][0]=W),r;if(i.length===1)return[[W,e],[U,t]];var s=Dh(e,t);if(s){var u=s[0],o=s[1],c=s[2],p=s[3],f=s[4],v=ke(u,c),q=ke(o,p);return v.concat([[z,f]],q)}return Fh(e,t)}function Fh(e,t){for(var r=e.length,n=t.length,i=Math.ceil((r+n)/2),a=i,s=2*i,u=new Array(s),o=new Array(s),c=0;c<s;c++)u[c]=-1,o[c]=-1;u[a+1]=0,o[a+1]=0;for(var p=r-n,f=p%2!==0,v=0,q=0,S=0,w=0,A=0;A<i;A++){for(var x=-A+v;x<=A-q;x+=2){var I=a+x,O;x===-A||x!==A&&u[I-1]<u[I+1]?O=u[I+1]:O=u[I-1]+1;for(var E=O-x;O<r&&E<n&&e.charAt(O)===t.charAt(E);)O++,E++;if(u[I]=O,O>r)q+=2;else if(E>n)v+=2;else if(f){var j=a+p-x;if(j>=0&&j<s&&o[j]!==-1){var F=r-o[j];if(O>=F)return Ni(e,t,O,E)}}}for(var L=-A+S;L<=A-w;L+=2){var j=a+L,F;L===-A||L!==A&&o[j-1]<o[j+1]?F=o[j+1]:F=o[j-1]+1;for(var H=F-L;F<r&&H<n&&e.charAt(r-F-1)===t.charAt(n-H-1);)F++,H++;if(o[j]=F,F>r)w+=2;else if(H>n)S+=2;else if(!f){var I=a+p-L;if(I>=0&&I<s&&u[I]!==-1){var O=u[I],E=a+O-I;if(F=r-F,O>=F)return Ni(e,t,O,E)}}}}return[[W,e],[U,t]]}function Ni(e,t,r,n){var i=e.substring(0,r),a=t.substring(0,n),s=e.substring(r),u=t.substring(n),o=ke(i,a),c=ke(s,u);return o.concat(c)}function Or(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,a=0;r<i;)e.substring(a,i)==t.substring(a,i)?(r=i,a=r):n=i,i=Math.floor((n-r)/2+r);return $i(e.charCodeAt(i-1))&&i--,i}function Ri(e,t){var r=e.length,n=t.length;if(r==0||n==0)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var i=Math.min(r,n);if(e==t)return i;for(var a=0,s=1;;){var u=e.substring(i-s),o=t.indexOf(u);if(o==-1)return a;s+=o,(o==0||e.substring(i-s)==t.substring(0,s))&&(a=s,s++)}}function At(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,a=0;r<i;)e.substring(e.length-i,e.length-a)==t.substring(t.length-i,t.length-a)?(r=i,a=r):n=i,i=Math.floor((n-r)/2+r);return Gi(e.charCodeAt(e.length-i))&&i--,i}function Dh(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||n.length*2<r.length)return null;function i(q,S,w){for(var A=q.substring(w,w+Math.floor(q.length/4)),x=-1,I="",O,E,j,F;(x=S.indexOf(A,x+1))!==-1;){var L=Or(q.substring(w),S.substring(x)),H=At(q.substring(0,w),S.substring(0,x));I.length<H+L&&(I=S.substring(x-H,x)+S.substring(x,x+L),O=q.substring(0,w-H),E=q.substring(w+L),j=S.substring(0,x-H),F=S.substring(x+L))}return I.length*2>=q.length?[O,E,j,F,I]:null}var a=i(r,n,Math.ceil(r.length/4)),s=i(r,n,Math.ceil(r.length/2)),u;if(!a&&!s)return null;s?a?u=a[4].length>s[4].length?a:s:u=s:u=a;var o,c,p,f;e.length>t.length?(o=u[0],c=u[1],p=u[2],f=u[3]):(p=u[0],f=u[1],o=u[2],c=u[3]);var v=u[4];return[o,c,p,f,v]}function Ph(e){for(var t=!1,r=[],n=0,i=null,a=0,s=0,u=0,o=0,c=0;a<e.length;)e[a][0]==z?(r[n++]=a,s=o,u=c,o=0,c=0,i=e[a][1]):(e[a][0]==U?o+=e[a][1].length:c+=e[a][1].length,i&&i.length<=Math.max(s,u)&&i.length<=Math.max(o,c)&&(e.splice(r[n-1],0,[W,i]),e[r[n-1]+1][0]=U,n--,n--,a=n>0?r[n-1]:-1,s=0,u=0,o=0,c=0,i=null,t=!0)),a++;for(t&&Cr(e),Mh(e),a=1;a<e.length;){if(e[a-1][0]==W&&e[a][0]==U){var p=e[a-1][1],f=e[a][1],v=Ri(p,f),q=Ri(f,p);v>=q?(v>=p.length/2||v>=f.length/2)&&(e.splice(a,0,[z,f.substring(0,v)]),e[a-1][1]=p.substring(0,p.length-v),e[a+1][1]=f.substring(v),a++):(q>=p.length/2||q>=f.length/2)&&(e.splice(a,0,[z,p.substring(0,q)]),e[a-1][0]=U,e[a-1][1]=f.substring(0,f.length-q),e[a+1][0]=W,e[a+1][1]=p.substring(q),a++),a++}a++}}var Mi=/[^a-zA-Z0-9]/,zi=/\s/,Li=/[\r\n]/,Nh=/\n\r?\n$/,Rh=/^\r?\n\r?\n/;function Mh(e){function t(q,S){if(!q||!S)return 6;var w=q.charAt(q.length-1),A=S.charAt(0),x=w.match(Mi),I=A.match(Mi),O=x&&w.match(zi),E=I&&A.match(zi),j=O&&w.match(Li),F=E&&A.match(Li),L=j&&q.match(Nh),H=F&&S.match(Rh);return L||H?5:j||F?4:x&&!O&&E?3:O||E?2:x||I?1:0}for(var r=1;r<e.length-1;){if(e[r-1][0]==z&&e[r+1][0]==z){var n=e[r-1][1],i=e[r][1],a=e[r+1][1],s=At(n,i);if(s){var u=i.substring(i.length-s);n=n.substring(0,n.length-s),i=u+i.substring(0,i.length-s),a=u+a}for(var o=n,c=i,p=a,f=t(n,i)+t(i,a);i.charAt(0)===a.charAt(0);){n+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var v=t(n,i)+t(i,a);v>=f&&(f=v,o=n,c=i,p=a)}e[r-1][1]!=o&&(o?e[r-1][1]=o:(e.splice(r-1,1),r--),e[r][1]=c,p?e[r+1][1]=p:(e.splice(r+1,1),r--))}r++}}function Cr(e,t){e.push([z,""]);for(var r=0,n=0,i=0,a="",s="",u;r<e.length;){if(r<e.length-1&&!e[r][1]){e.splice(r,1);continue}switch(e[r][0]){case U:i++,s+=e[r][1],r++;break;case W:n++,a+=e[r][1],r++;break;case z:var o=r-i-n-1;if(t){if(o>=0&&Ui(e[o][1])){var c=e[o][1].slice(-1);if(e[o][1]=e[o][1].slice(0,-1),a=c+a,s=c+s,!e[o][1]){e.splice(o,1),r--;var p=o-1;e[p]&&e[p][0]===U&&(i++,s=e[p][1]+s,p--),e[p]&&e[p][0]===W&&(n++,a=e[p][1]+a,p--),o=p}}if(Bi(e[r][1])){var c=e[r][1].charAt(0);e[r][1]=e[r][1].slice(1),a+=c,s+=c}}if(r<e.length-1&&!e[r][1]){e.splice(r,1);break}if(a.length>0||s.length>0){a.length>0&&s.length>0&&(u=Or(s,a),u!==0&&(o>=0?e[o][1]+=s.substring(0,u):(e.splice(0,0,[z,s.substring(0,u)]),r++),s=s.substring(u),a=a.substring(u)),u=At(s,a),u!==0&&(e[r][1]=s.substring(s.length-u)+e[r][1],s=s.substring(0,s.length-u),a=a.substring(0,a.length-u)));var f=i+n;a.length===0&&s.length===0?(e.splice(r-f,f),r=r-f):a.length===0?(e.splice(r-f,f,[U,s]),r=r-f+1):s.length===0?(e.splice(r-f,f,[W,a]),r=r-f+1):(e.splice(r-f,f,[W,a],[U,s]),r=r-f+2)}r!==0&&e[r-1][0]===z?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,i=0,n=0,a="",s="";break}}e[e.length-1][1]===""&&e.pop();var v=!1;for(r=1;r<e.length-1;)e[r-1][0]===z&&e[r+1][0]===z&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),v=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),v=!0)),r++;v&&Cr(e,t)}function $i(e){return e>=55296&&e<=56319}function Gi(e){return e>=56320&&e<=57343}function Bi(e){return Gi(e.charCodeAt(0))}function Ui(e){return $i(e.charCodeAt(e.length-1))}function zh(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}function Ir(e,t,r,n){return Ui(e)||Bi(n)?null:zh([[z,e],[W,t],[U,r],[z,n]])}function Lh(e,t,r){var n=typeof r=="number"?{index:r,length:0}:r.oldRange,i=typeof r=="number"?null:r.newRange,a=e.length,s=t.length;if(n.length===0&&(i===null||i.length===0)){var u=n.index,o=e.slice(0,u),c=e.slice(u),p=i?i.index:null;e:{var f=u+s-a;if(p!==null&&p!==f||f<0||f>s)break e;var v=t.slice(0,f),q=t.slice(f);if(q!==c)break e;var S=Math.min(u,f),w=o.slice(0,S),A=v.slice(0,S);if(w!==A)break e;var x=o.slice(S),I=v.slice(S);return Ir(w,x,I,c)}e:{if(p!==null&&p!==u)break e;var O=u,v=t.slice(0,O),q=t.slice(O);if(v!==o)break e;var E=Math.min(a-O,s-O),j=c.slice(c.length-E),F=q.slice(q.length-E);if(j!==F)break e;var x=c.slice(0,c.length-E),I=q.slice(0,q.length-E);return Ir(o,x,I,j)}}if(n.length>0&&i&&i.length===0)e:{var w=e.slice(0,n.index),j=e.slice(n.index+n.length),S=w.length,E=j.length;if(s<S+E)break e;var A=t.slice(0,S),F=t.slice(s-E);if(w!==A||j!==F)break e;var x=e.slice(S,a-E),I=t.slice(S,s-E);return Ir(w,x,I,j)}return null}function wt(e,t,r,n){return ke(e,t,r,n,!0)}wt.INSERT=U;wt.DELETE=W;wt.EQUAL=z;ki.exports=wt});var Vi=l(Ot=>{(function(e,t){if(typeof define=="function"&&define.amd)define(["exports"],t);else if(typeof Ot<"u")t(Ot);else{var r={exports:{}};t(r.exports),e.jstoxml=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ot,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toXML=e.default=void 0;function t(_){return a(_)||i(_)||n(_)||r()}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(_,d){if(_){if(typeof _=="string")return s(_,d);var y=Object.prototype.toString.call(_).slice(8,-1);if(y==="Object"&&_.constructor&&(y=_.constructor.name),y==="Map"||y==="Set")return Array.from(_);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return s(_,d)}}function i(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function a(_){if(Array.isArray(_))return s(_)}function s(_,d){(d==null||d>_.length)&&(d=_.length);for(var y=0,N=new Array(d);y<d;y++)N[y]=_[y];return N}function u(_,d){var y=Object.keys(_);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(_);d&&(N=N.filter(function(k){return Object.getOwnPropertyDescriptor(_,k).enumerable})),y.push.apply(y,N)}return y}function o(_){for(var d=1;d<arguments.length;d++){var y=arguments[d]!=null?arguments[d]:{};d%2?u(Object(y),!0).forEach(function(N){c(_,N,y[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(y)):u(Object(y)).forEach(function(N){Object.defineProperty(_,N,Object.getOwnPropertyDescriptor(y,N))})}return _}function c(_,d,y){return d in _?Object.defineProperty(_,d,{value:y,enumerable:!0,configurable:!0,writable:!0}):_[d]=y,_}function p(_){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},p(_)}var f="array",v="boolean",q="date",S="null",w="number",A="object",x="special-object",I="string",O=["_selfCloseTag","_attrs"],E=new RegExp(O.join("|"),"g"),j=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return d.repeat(y)},F=function(d){return Array.isArray(d)&&f||p(d)===A&&d!==null&&d._name&&x||d instanceof Date&&q||d===null&&S||p(d)},L=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof d!="string")return d;var N=new RegExp("(".concat(Object.keys(y).join("|"),")(?!(\\w|#)*;)"),"g");return String(d).replace(N,function(k,G){return y[G]||""})},H=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=arguments.length>1?arguments[1]:void 0,N=[];if(Array.isArray(d))N=d.map(function(G){var ne=Object.keys(G)[0],ce=G[ne],Ge=y?L(ce,y):ce,mr=Ge===!0?"":'="'.concat(Ge,'"');return"".concat(ne).concat(mr)});else{var k=Object.keys(d);N=k.map(function(G){var ne=y?L(d[G],y):d[G],ce=d[G]===!0?"":'="'.concat(ne,'"');return"".concat(G).concat(ce)})}return N},Ff=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=arguments.length>1?arguments[1]:void 0,N=H(d,y);if(N.length===0)return"";var k=N.join(" ");return" ".concat(k)},Df=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(d).map(function(y){return{_name:y,_content:d[y]}})},kn=[I,w,v],Pf=function(d){return kn.includes(F(d))},Nf=[].concat(kn,[q,x]),rT=function(d){return Nf.includes(F(d))},Rf=function(d){return!d.match("<")},Mf='<?xml version="1.0" encoding="UTF-8"?>',zf=function(d){var y=d.header,N=d.indent,k=d.isOutputStart,G=y&&k;if(!G)return"";var ne=p(y)===v;return ne?Mf:y},Kn={"<":"&lt;",">":"&gt;","&":"&amp;"},Hn=function _(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=y.depth,k=N===void 0?0:N,G=y.indent,ne=y._isFirstItem,ce=y._isOutputStart,Ge=ce===void 0?!0:ce,mr=y.header,Vn=y.attributesFilter,dr=Vn===void 0?{}:Vn,Wn=y.filter,gr=Wn===void 0?{}:Wn,$f=typeof dr=="boolean"&&!dr,Gf=$f?{}:o(o(o({},Kn),{'"':"&quot;"}),dr),Bf=typeof gr=="boolean"&&!gr,Uf=Bf?{}:o(o({},Kn),gr),Xn=j(G,k),kf=F(d),Yn=zf({header:mr,indent:G,depth:k,isOutputStart:Ge}),bt=Ge&&!Yn&&ne&&k===0,ie="";switch(kf){case"special-object":{var qe=d._name,Se=d._content;if(Se===null){ie=qe;break}var Kf=Array.isArray(Se)&&Se.every(Pf);if(Kf){var Hf=Se.map(function(K){return _({_name:qe,_content:K},o(o({},y),{},{depth:k,_isOutputStart:!1}))});return Hf.join("")}if(qe.match(E))break;var vt=_(Se,o(o({},y),{},{depth:k+1,_isOutputStart:bt})),Vf=F(vt),Wf=Rf(vt),Xf=G&&!bt?`
`:"",Qn="".concat(Xf).concat(Xn);if(qe==="_comment"){ie+="".concat(Qn,"<!-- ").concat(Se," -->");break}var Zn=Vf==="undefined"||vt==="",Jn=p(d._selfCloseTag)===v?Zn&&d._selfCloseTag:Zn,Yf=Jn?"/":"",Qf=Ff(d._attrs,Gf),Zf="<".concat(qe).concat(Qf).concat(Yf,">"),Jf=G&&!Wf?`
`.concat(Xn):"",eh=Jn?"":"".concat(vt).concat(Jf,"</").concat(qe,">");ie+="".concat(Qn).concat(Zf).concat(eh);break}case"object":{var ei=Object.keys(d),th=ei.map(function(K,Be){var br=o(o({},y),{},{_isFirstItem:Be===0,_isLastItem:Be+1===ei.length,_isOutputStart:bt}),Ue={_name:K};if(F(d[K])==="object"){O.forEach(function(vr){var ri=d[K][vr];typeof ri<"u"&&(Ue[vr]=ri,delete d[K][vr])});var ih=typeof d[K]._content<"u";if(ih&&Object.keys(d[K]).length>1){var ti=Object.assign({},d[K]);delete ti._content,Ue._content=[].concat(t(Df(ti)),[d[K]._content])}}typeof Ue._content>"u"&&(Ue._content=d[K]);var ah=_(Ue,br,K);return ah},y);ie=th.join("");break}case"function":{var rh=d(y);ie=_(rh,y);break}case"array":{var nh=d.map(function(K,Be){var br=o(o({},y),{},{_isFirstItem:Be===0,_isLastItem:Be+1===d.length,_isOutputStart:bt});return _(K,br)});ie=nh.join("");break}default:{ie=L(d,Uf);break}}return"".concat(Yn).concat(ie)};e.toXML=Hn;var Lf={toXML:Hn};e.default=Lf})});var Xi=l((vT,Wi)=>{function Bh(){this.__data__=[],this.size=0}Wi.exports=Bh});var Ct=l((yT,Yi)=>{function Uh(e,t){return e===t||e!==e&&t!==t}Yi.exports=Uh});var He=l((_T,Qi)=>{var kh=Ct();function Kh(e,t){for(var r=e.length;r--;)if(kh(e[r][0],t))return r;return-1}Qi.exports=Kh});var Ji=l((qT,Zi)=>{var Hh=He(),Vh=Array.prototype,Wh=Vh.splice;function Xh(e){var t=this.__data__,r=Hh(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Wh.call(t,r,1),--this.size,!0}Zi.exports=Xh});var ta=l((ST,ea)=>{var Yh=He();function Qh(e){var t=this.__data__,r=Yh(t,e);return r<0?void 0:t[r][1]}ea.exports=Qh});var na=l((xT,ra)=>{var Zh=He();function Jh(e){return Zh(this.__data__,e)>-1}ra.exports=Jh});var aa=l((AT,ia)=>{var em=He();function tm(e,t){var r=this.__data__,n=em(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}ia.exports=tm});var Ve=l((wT,sa)=>{var rm=Xi(),nm=Ji(),im=ta(),am=na(),sm=aa();function Ie(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ie.prototype.clear=rm;Ie.prototype.delete=nm;Ie.prototype.get=im;Ie.prototype.has=am;Ie.prototype.set=sm;sa.exports=Ie});var ua=l((TT,oa)=>{var om=Ve();function um(){this.__data__=new om,this.size=0}oa.exports=um});var ca=l((IT,la)=>{function lm(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}la.exports=lm});var fa=l((OT,pa)=>{function cm(e){return this.__data__.get(e)}pa.exports=cm});var ma=l((CT,ha)=>{function pm(e){return this.__data__.has(e)}ha.exports=pm});var Er=l((ET,da)=>{var fm=typeof global=="object"&&global&&global.Object===Object&&global;da.exports=fm});var Z=l((jT,ga)=>{var hm=Er(),mm=typeof self=="object"&&self&&self.Object===Object&&self,dm=hm||mm||Function("return this")();ga.exports=dm});var de=l((FT,ba)=>{var gm=Z(),bm=gm.Symbol;ba.exports=bm});var qa=l((DT,_a)=>{var va=de(),ya=Object.prototype,vm=ya.hasOwnProperty,ym=ya.toString,We=va?va.toStringTag:void 0;function _m(e){var t=vm.call(e,We),r=e[We];try{e[We]=void 0;var n=!0}catch{}var i=ym.call(e);return n&&(t?e[We]=r:delete e[We]),i}_a.exports=_m});var xa=l((PT,Sa)=>{var qm=Object.prototype,Sm=qm.toString;function xm(e){return Sm.call(e)}Sa.exports=xm});var ae=l((NT,Ta)=>{var Aa=de(),Am=qa(),wm=xa(),Tm="[object Null]",Im="[object Undefined]",wa=Aa?Aa.toStringTag:void 0;function Om(e){return e==null?e===void 0?Im:Tm:wa&&wa in Object(e)?Am(e):wm(e)}Ta.exports=Om});var se=l((RT,Ia)=>{function Cm(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}Ia.exports=Cm});var jr=l((MT,Oa)=>{var Em=ae(),jm=se(),Fm="[object AsyncFunction]",Dm="[object Function]",Pm="[object GeneratorFunction]",Nm="[object Proxy]";function Rm(e){if(!jm(e))return!1;var t=Em(e);return t==Dm||t==Pm||t==Fm||t==Nm}Oa.exports=Rm});var Ea=l((zT,Ca)=>{var Mm=Z(),zm=Mm["__core-js_shared__"];Ca.exports=zm});var Da=l((LT,Fa)=>{var Fr=Ea(),ja=function(){var e=/[^.]+$/.exec(Fr&&Fr.keys&&Fr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Lm(e){return!!ja&&ja in e}Fa.exports=Lm});var Dr=l(($T,Pa)=>{var $m=Function.prototype,Gm=$m.toString;function Bm(e){if(e!=null){try{return Gm.call(e)}catch{}try{return e+""}catch{}}return""}Pa.exports=Bm});var Ra=l((GT,Na)=>{var Um=jr(),km=Da(),Km=se(),Hm=Dr(),Vm=/[\\^$.*+?()[\]{}|]/g,Wm=/^\[object .+?Constructor\]$/,Xm=Function.prototype,Ym=Object.prototype,Qm=Xm.toString,Zm=Ym.hasOwnProperty,Jm=RegExp("^"+Qm.call(Zm).replace(Vm,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ed(e){if(!Km(e)||km(e))return!1;var t=Um(e)?Jm:Wm;return t.test(Hm(e))}Na.exports=ed});var za=l((BT,Ma)=>{function td(e,t){return e?.[t]}Ma.exports=td});var oe=l((UT,La)=>{var rd=Ra(),nd=za();function id(e,t){var r=nd(e,t);return rd(r)?r:void 0}La.exports=id});var Et=l((kT,$a)=>{var ad=oe(),sd=Z(),od=ad(sd,"Map");$a.exports=od});var Xe=l((KT,Ga)=>{var ud=oe(),ld=ud(Object,"create");Ga.exports=ld});var ka=l((HT,Ua)=>{var Ba=Xe();function cd(){this.__data__=Ba?Ba(null):{},this.size=0}Ua.exports=cd});var Ha=l((VT,Ka)=>{function pd(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}Ka.exports=pd});var Wa=l((WT,Va)=>{var fd=Xe(),hd="__lodash_hash_undefined__",md=Object.prototype,dd=md.hasOwnProperty;function gd(e){var t=this.__data__;if(fd){var r=t[e];return r===hd?void 0:r}return dd.call(t,e)?t[e]:void 0}Va.exports=gd});var Ya=l((XT,Xa)=>{var bd=Xe(),vd=Object.prototype,yd=vd.hasOwnProperty;function _d(e){var t=this.__data__;return bd?t[e]!==void 0:yd.call(t,e)}Xa.exports=_d});var Za=l((YT,Qa)=>{var qd=Xe(),Sd="__lodash_hash_undefined__";function xd(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=qd&&t===void 0?Sd:t,this}Qa.exports=xd});var es=l((QT,Ja)=>{var Ad=ka(),wd=Ha(),Td=Wa(),Id=Ya(),Od=Za();function Oe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Oe.prototype.clear=Ad;Oe.prototype.delete=wd;Oe.prototype.get=Td;Oe.prototype.has=Id;Oe.prototype.set=Od;Ja.exports=Oe});var ns=l((ZT,rs)=>{var ts=es(),Cd=Ve(),Ed=Et();function jd(){this.size=0,this.__data__={hash:new ts,map:new(Ed||Cd),string:new ts}}rs.exports=jd});var as=l((JT,is)=>{function Fd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}is.exports=Fd});var Ye=l((eI,ss)=>{var Dd=as();function Pd(e,t){var r=e.__data__;return Dd(t)?r[typeof t=="string"?"string":"hash"]:r.map}ss.exports=Pd});var us=l((tI,os)=>{var Nd=Ye();function Rd(e){var t=Nd(this,e).delete(e);return this.size-=t?1:0,t}os.exports=Rd});var cs=l((rI,ls)=>{var Md=Ye();function zd(e){return Md(this,e).get(e)}ls.exports=zd});var fs=l((nI,ps)=>{var Ld=Ye();function $d(e){return Ld(this,e).has(e)}ps.exports=$d});var ms=l((iI,hs)=>{var Gd=Ye();function Bd(e,t){var r=Gd(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}hs.exports=Bd});var jt=l((aI,ds)=>{var Ud=ns(),kd=us(),Kd=cs(),Hd=fs(),Vd=ms();function Ce(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=Ud;Ce.prototype.delete=kd;Ce.prototype.get=Kd;Ce.prototype.has=Hd;Ce.prototype.set=Vd;ds.exports=Ce});var bs=l((sI,gs)=>{var Wd=Ve(),Xd=Et(),Yd=jt(),Qd=200;function Zd(e,t){var r=this.__data__;if(r instanceof Wd){var n=r.__data__;if(!Xd||n.length<Qd-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Yd(n)}return r.set(e,t),this.size=r.size,this}gs.exports=Zd});var Ft=l((oI,vs)=>{var Jd=Ve(),eg=ua(),tg=ca(),rg=fa(),ng=ma(),ig=bs();function Ee(e){var t=this.__data__=new Jd(e);this.size=t.size}Ee.prototype.clear=eg;Ee.prototype.delete=tg;Ee.prototype.get=rg;Ee.prototype.has=ng;Ee.prototype.set=ig;vs.exports=Ee});var _s=l((uI,ys)=>{function ag(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}ys.exports=ag});var Pr=l((lI,qs)=>{var sg=oe(),og=function(){try{var e=sg(Object,"defineProperty");return e({},"",{}),e}catch{}}();qs.exports=og});var Nr=l((cI,xs)=>{var Ss=Pr();function ug(e,t,r){t=="__proto__"&&Ss?Ss(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}xs.exports=ug});var Rr=l((pI,As)=>{var lg=Nr(),cg=Ct(),pg=Object.prototype,fg=pg.hasOwnProperty;function hg(e,t,r){var n=e[t];(!(fg.call(e,t)&&cg(n,r))||r===void 0&&!(t in e))&&lg(e,t,r)}As.exports=hg});var je=l((fI,ws)=>{var mg=Rr(),dg=Nr();function gg(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var u=t[a],o=n?n(r[u],e[u],u,r,e):void 0;o===void 0&&(o=e[u]),i?dg(r,u,o):mg(r,u,o)}return r}ws.exports=gg});var Is=l((hI,Ts)=>{function bg(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}Ts.exports=bg});var J=l((mI,Os)=>{function vg(e){return e!=null&&typeof e=="object"}Os.exports=vg});var Es=l((dI,Cs)=>{var yg=ae(),_g=J(),qg="[object Arguments]";function Sg(e){return _g(e)&&yg(e)==qg}Cs.exports=Sg});var Dt=l((gI,Ds)=>{var js=Es(),xg=J(),Fs=Object.prototype,Ag=Fs.hasOwnProperty,wg=Fs.propertyIsEnumerable,Tg=js(function(){return arguments}())?js:function(e){return xg(e)&&Ag.call(e,"callee")&&!wg.call(e,"callee")};Ds.exports=Tg});var X=l((bI,Ps)=>{var Ig=Array.isArray;Ps.exports=Ig});var Rs=l((vI,Ns)=>{function Og(){return!1}Ns.exports=Og});var Pt=l((Qe,Fe)=>{var Cg=Z(),Eg=Rs(),Ls=typeof Qe=="object"&&Qe&&!Qe.nodeType&&Qe,Ms=Ls&&typeof Fe=="object"&&Fe&&!Fe.nodeType&&Fe,jg=Ms&&Ms.exports===Ls,zs=jg?Cg.Buffer:void 0,Fg=zs?zs.isBuffer:void 0,Dg=Fg||Eg;Fe.exports=Dg});var Mr=l((yI,$s)=>{var Pg=9007199254740991,Ng=/^(?:0|[1-9]\d*)$/;function Rg(e,t){var r=typeof e;return t=t??Pg,!!t&&(r=="number"||r!="symbol"&&Ng.test(e))&&e>-1&&e%1==0&&e<t}$s.exports=Rg});var Nt=l((_I,Gs)=>{var Mg=9007199254740991;function zg(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Mg}Gs.exports=zg});var Us=l((qI,Bs)=>{var Lg=ae(),$g=Nt(),Gg=J(),Bg="[object Arguments]",Ug="[object Array]",kg="[object Boolean]",Kg="[object Date]",Hg="[object Error]",Vg="[object Function]",Wg="[object Map]",Xg="[object Number]",Yg="[object Object]",Qg="[object RegExp]",Zg="[object Set]",Jg="[object String]",eb="[object WeakMap]",tb="[object ArrayBuffer]",rb="[object DataView]",nb="[object Float32Array]",ib="[object Float64Array]",ab="[object Int8Array]",sb="[object Int16Array]",ob="[object Int32Array]",ub="[object Uint8Array]",lb="[object Uint8ClampedArray]",cb="[object Uint16Array]",pb="[object Uint32Array]",R={};R[nb]=R[ib]=R[ab]=R[sb]=R[ob]=R[ub]=R[lb]=R[cb]=R[pb]=!0;R[Bg]=R[Ug]=R[tb]=R[kg]=R[rb]=R[Kg]=R[Hg]=R[Vg]=R[Wg]=R[Xg]=R[Yg]=R[Qg]=R[Zg]=R[Jg]=R[eb]=!1;function fb(e){return Gg(e)&&$g(e.length)&&!!R[Lg(e)]}Bs.exports=fb});var Ze=l((SI,ks)=>{function hb(e){return function(t){return e(t)}}ks.exports=hb});var Rt=l((Je,De)=>{var mb=Er(),Ks=typeof Je=="object"&&Je&&!Je.nodeType&&Je,et=Ks&&typeof De=="object"&&De&&!De.nodeType&&De,db=et&&et.exports===Ks,zr=db&&mb.process,gb=function(){try{var e=et&&et.require&&et.require("util").types;return e||zr&&zr.binding&&zr.binding("util")}catch{}}();De.exports=gb});var Lr=l((xI,Ws)=>{var bb=Us(),vb=Ze(),Hs=Rt(),Vs=Hs&&Hs.isTypedArray,yb=Vs?vb(Vs):bb;Ws.exports=yb});var $r=l((AI,Xs)=>{var _b=Is(),qb=Dt(),Sb=X(),xb=Pt(),Ab=Mr(),wb=Lr(),Tb=Object.prototype,Ib=Tb.hasOwnProperty;function Ob(e,t){var r=Sb(e),n=!r&&qb(e),i=!r&&!n&&xb(e),a=!r&&!n&&!i&&wb(e),s=r||n||i||a,u=s?_b(e.length,String):[],o=u.length;for(var c in e)(t||Ib.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ab(c,o)))&&u.push(c);return u}Xs.exports=Ob});var Mt=l((wI,Ys)=>{var Cb=Object.prototype;function Eb(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Cb;return e===r}Ys.exports=Eb});var Gr=l((TI,Qs)=>{function jb(e,t){return function(r){return e(t(r))}}Qs.exports=jb});var Js=l((II,Zs)=>{var Fb=Gr(),Db=Fb(Object.keys,Object);Zs.exports=Db});var to=l((OI,eo)=>{var Pb=Mt(),Nb=Js(),Rb=Object.prototype,Mb=Rb.hasOwnProperty;function zb(e){if(!Pb(e))return Nb(e);var t=[];for(var r in Object(e))Mb.call(e,r)&&r!="constructor"&&t.push(r);return t}eo.exports=zb});var tt=l((CI,ro)=>{var Lb=jr(),$b=Nt();function Gb(e){return e!=null&&$b(e.length)&&!Lb(e)}ro.exports=Gb});var ge=l((EI,no)=>{var Bb=$r(),Ub=to(),kb=tt();function Kb(e){return kb(e)?Bb(e):Ub(e)}no.exports=Kb});var ao=l((jI,io)=>{var Hb=je(),Vb=ge();function Wb(e,t){return e&&Hb(t,Vb(t),e)}io.exports=Wb});var oo=l((FI,so)=>{function Xb(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}so.exports=Xb});var lo=l((DI,uo)=>{var Yb=se(),Qb=Mt(),Zb=oo(),Jb=Object.prototype,ev=Jb.hasOwnProperty;function tv(e){if(!Yb(e))return Zb(e);var t=Qb(e),r=[];for(var n in e)n=="constructor"&&(t||!ev.call(e,n))||r.push(n);return r}uo.exports=tv});var zt=l((PI,co)=>{var rv=$r(),nv=lo(),iv=tt();function av(e){return iv(e)?rv(e,!0):nv(e)}co.exports=av});var fo=l((NI,po)=>{var sv=je(),ov=zt();function uv(e,t){return e&&sv(t,ov(t),e)}po.exports=uv});var vo=l((rt,Pe)=>{var lv=Z(),bo=typeof rt=="object"&&rt&&!rt.nodeType&&rt,ho=bo&&typeof Pe=="object"&&Pe&&!Pe.nodeType&&Pe,cv=ho&&ho.exports===bo,mo=cv?lv.Buffer:void 0,go=mo?mo.allocUnsafe:void 0;function pv(e,t){if(t)return e.slice();var r=e.length,n=go?go(r):new e.constructor(r);return e.copy(n),n}Pe.exports=pv});var _o=l((RI,yo)=>{function fv(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}yo.exports=fv});var So=l((MI,qo)=>{function hv(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}qo.exports=hv});var Br=l((zI,xo)=>{function mv(){return[]}xo.exports=mv});var Lt=l((LI,wo)=>{var dv=So(),gv=Br(),bv=Object.prototype,vv=bv.propertyIsEnumerable,Ao=Object.getOwnPropertySymbols,yv=Ao?function(e){return e==null?[]:(e=Object(e),dv(Ao(e),function(t){return vv.call(e,t)}))}:gv;wo.exports=yv});var Io=l(($I,To)=>{var _v=je(),qv=Lt();function Sv(e,t){return _v(e,qv(e),t)}To.exports=Sv});var $t=l((GI,Oo)=>{function xv(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}Oo.exports=xv});var Gt=l((BI,Co)=>{var Av=Gr(),wv=Av(Object.getPrototypeOf,Object);Co.exports=wv});var Ur=l((UI,Eo)=>{var Tv=$t(),Iv=Gt(),Ov=Lt(),Cv=Br(),Ev=Object.getOwnPropertySymbols,jv=Ev?function(e){for(var t=[];e;)Tv(t,Ov(e)),e=Iv(e);return t}:Cv;Eo.exports=jv});var Fo=l((kI,jo)=>{var Fv=je(),Dv=Ur();function Pv(e,t){return Fv(e,Dv(e),t)}jo.exports=Pv});var kr=l((KI,Do)=>{var Nv=$t(),Rv=X();function Mv(e,t,r){var n=t(e);return Rv(e)?n:Nv(n,r(e))}Do.exports=Mv});var Kr=l((HI,Po)=>{var zv=kr(),Lv=Lt(),$v=ge();function Gv(e){return zv(e,$v,Lv)}Po.exports=Gv});var Hr=l((VI,No)=>{var Bv=kr(),Uv=Ur(),kv=zt();function Kv(e){return Bv(e,kv,Uv)}No.exports=Kv});var Mo=l((WI,Ro)=>{var Hv=oe(),Vv=Z(),Wv=Hv(Vv,"DataView");Ro.exports=Wv});var Lo=l((XI,zo)=>{var Xv=oe(),Yv=Z(),Qv=Xv(Yv,"Promise");zo.exports=Qv});var Vr=l((YI,$o)=>{var Zv=oe(),Jv=Z(),ey=Zv(Jv,"Set");$o.exports=ey});var Bo=l((QI,Go)=>{var ty=oe(),ry=Z(),ny=ty(ry,"WeakMap");Go.exports=ny});var nt=l((ZI,Xo)=>{var Wr=Mo(),Xr=Et(),Yr=Lo(),Qr=Vr(),Zr=Bo(),Wo=ae(),Ne=Dr(),Uo="[object Map]",iy="[object Object]",ko="[object Promise]",Ko="[object Set]",Ho="[object WeakMap]",Vo="[object DataView]",ay=Ne(Wr),sy=Ne(Xr),oy=Ne(Yr),uy=Ne(Qr),ly=Ne(Zr),be=Wo;(Wr&&be(new Wr(new ArrayBuffer(1)))!=Vo||Xr&&be(new Xr)!=Uo||Yr&&be(Yr.resolve())!=ko||Qr&&be(new Qr)!=Ko||Zr&&be(new Zr)!=Ho)&&(be=function(e){var t=Wo(e),r=t==iy?e.constructor:void 0,n=r?Ne(r):"";if(n)switch(n){case ay:return Vo;case sy:return Uo;case oy:return ko;case uy:return Ko;case ly:return Ho}return t});Xo.exports=be});var Qo=l((JI,Yo)=>{var cy=Object.prototype,py=cy.hasOwnProperty;function fy(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&py.call(e,"index")&&(r.index=e.index,r.input=e.input),r}Yo.exports=fy});var Jr=l((eO,Zo)=>{var hy=Z(),my=hy.Uint8Array;Zo.exports=my});var Bt=l((tO,eu)=>{var Jo=Jr();function dy(e){var t=new e.constructor(e.byteLength);return new Jo(t).set(new Jo(e)),t}eu.exports=dy});var ru=l((rO,tu)=>{var gy=Bt();function by(e,t){var r=t?gy(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}tu.exports=by});var iu=l((nO,nu)=>{var vy=/\w*$/;function yy(e){var t=new e.constructor(e.source,vy.exec(e));return t.lastIndex=e.lastIndex,t}nu.exports=yy});var lu=l((iO,uu)=>{var au=de(),su=au?au.prototype:void 0,ou=su?su.valueOf:void 0;function _y(e){return ou?Object(ou.call(e)):{}}uu.exports=_y});var pu=l((aO,cu)=>{var qy=Bt();function Sy(e,t){var r=t?qy(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}cu.exports=Sy});var hu=l((sO,fu)=>{var xy=Bt(),Ay=ru(),wy=iu(),Ty=lu(),Iy=pu(),Oy="[object Boolean]",Cy="[object Date]",Ey="[object Map]",jy="[object Number]",Fy="[object RegExp]",Dy="[object Set]",Py="[object String]",Ny="[object Symbol]",Ry="[object ArrayBuffer]",My="[object DataView]",zy="[object Float32Array]",Ly="[object Float64Array]",$y="[object Int8Array]",Gy="[object Int16Array]",By="[object Int32Array]",Uy="[object Uint8Array]",ky="[object Uint8ClampedArray]",Ky="[object Uint16Array]",Hy="[object Uint32Array]";function Vy(e,t,r){var n=e.constructor;switch(t){case Ry:return xy(e);case Oy:case Cy:return new n(+e);case My:return Ay(e,r);case zy:case Ly:case $y:case Gy:case By:case Uy:case ky:case Ky:case Hy:return Iy(e,r);case Ey:return new n;case jy:case Py:return new n(e);case Fy:return wy(e);case Dy:return new n;case Ny:return Ty(e)}}fu.exports=Vy});var gu=l((oO,du)=>{var Wy=se(),mu=Object.create,Xy=function(){function e(){}return function(t){if(!Wy(t))return{};if(mu)return mu(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();du.exports=Xy});var vu=l((uO,bu)=>{var Yy=gu(),Qy=Gt(),Zy=Mt();function Jy(e){return typeof e.constructor=="function"&&!Zy(e)?Yy(Qy(e)):{}}bu.exports=Jy});var _u=l((lO,yu)=>{var e1=nt(),t1=J(),r1="[object Map]";function n1(e){return t1(e)&&e1(e)==r1}yu.exports=n1});var Au=l((cO,xu)=>{var i1=_u(),a1=Ze(),qu=Rt(),Su=qu&&qu.isMap,s1=Su?a1(Su):i1;xu.exports=s1});var Tu=l((pO,wu)=>{var o1=nt(),u1=J(),l1="[object Set]";function c1(e){return u1(e)&&o1(e)==l1}wu.exports=c1});var Eu=l((fO,Cu)=>{var p1=Tu(),f1=Ze(),Iu=Rt(),Ou=Iu&&Iu.isSet,h1=Ou?f1(Ou):p1;Cu.exports=h1});var kt=l((hO,Pu)=>{var m1=Ft(),d1=_s(),g1=Rr(),b1=ao(),v1=fo(),y1=vo(),_1=_o(),q1=Io(),S1=Fo(),x1=Kr(),A1=Hr(),w1=nt(),T1=Qo(),I1=hu(),O1=vu(),C1=X(),E1=Pt(),j1=Au(),F1=se(),D1=Eu(),P1=ge(),N1=zt(),R1=1,M1=2,z1=4,ju="[object Arguments]",L1="[object Array]",$1="[object Boolean]",G1="[object Date]",B1="[object Error]",Fu="[object Function]",U1="[object GeneratorFunction]",k1="[object Map]",K1="[object Number]",Du="[object Object]",H1="[object RegExp]",V1="[object Set]",W1="[object String]",X1="[object Symbol]",Y1="[object WeakMap]",Q1="[object ArrayBuffer]",Z1="[object DataView]",J1="[object Float32Array]",e_="[object Float64Array]",t_="[object Int8Array]",r_="[object Int16Array]",n_="[object Int32Array]",i_="[object Uint8Array]",a_="[object Uint8ClampedArray]",s_="[object Uint16Array]",o_="[object Uint32Array]",P={};P[ju]=P[L1]=P[Q1]=P[Z1]=P[$1]=P[G1]=P[J1]=P[e_]=P[t_]=P[r_]=P[n_]=P[k1]=P[K1]=P[Du]=P[H1]=P[V1]=P[W1]=P[X1]=P[i_]=P[a_]=P[s_]=P[o_]=!0;P[B1]=P[Fu]=P[Y1]=!1;function Ut(e,t,r,n,i,a){var s,u=t&R1,o=t&M1,c=t&z1;if(r&&(s=i?r(e,n,i,a):r(e)),s!==void 0)return s;if(!F1(e))return e;var p=C1(e);if(p){if(s=T1(e),!u)return _1(e,s)}else{var f=w1(e),v=f==Fu||f==U1;if(E1(e))return y1(e,u);if(f==Du||f==ju||v&&!i){if(s=o||v?{}:O1(e),!u)return o?S1(e,v1(s,e)):q1(e,b1(s,e))}else{if(!P[f])return i?e:{};s=I1(e,f,u)}}a||(a=new m1);var q=a.get(e);if(q)return q;a.set(e,s),D1(e)?e.forEach(function(A){s.add(Ut(A,t,r,A,e,a))}):j1(e)&&e.forEach(function(A,x){s.set(x,Ut(A,t,r,x,e,a))});var S=c?o?A1:x1:o?N1:P1,w=p?void 0:S(e);return d1(w||e,function(A,x){w&&(x=A,A=e[x]),g1(s,x,Ut(A,t,r,x,e,a))}),s}Pu.exports=Ut});var it=l((mO,Nu)=>{var u_=kt(),l_=1,c_=4;function p_(e){return u_(e,l_|c_)}Nu.exports=p_});var Mu=l((dO,Ru)=>{var f_=ae(),h_=X(),m_=J(),d_="[object String]";function g_(e){return typeof e=="string"||!h_(e)&&m_(e)&&f_(e)==d_}Ru.exports=g_});var en=l((bO,zu)=>{function v_(e){return function(){return e}}zu.exports=v_});var $u=l((vO,Lu)=>{function y_(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),u=s.length;u--;){var o=s[e?u:++i];if(r(a[o],o,a)===!1)break}return t}}Lu.exports=y_});var Bu=l((yO,Gu)=>{var __=$u(),q_=__();Gu.exports=q_});var ku=l((_O,Uu)=>{var S_=Bu(),x_=ge();function A_(e,t){return e&&S_(e,t,x_)}Uu.exports=A_});var Hu=l((qO,Ku)=>{var w_=ku();function T_(e,t,r,n){return w_(e,function(i,a,s){t(n,r(i),a,s)}),n}Ku.exports=T_});var Wu=l((SO,Vu)=>{var I_=Hu();function O_(e,t){return function(r,n){return I_(r,e,t(n),{})}}Vu.exports=O_});var at=l((xO,Xu)=>{function C_(e){return e}Xu.exports=C_});var Qu=l((AO,Yu)=>{var E_=en(),j_=Wu(),F_=at(),D_=Object.prototype,P_=D_.toString,N_=j_(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=P_.call(t)),e[t]=r},E_(F_));Yu.exports=N_});var Ht=l((wO,Zu)=>{function R_(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}Zu.exports=R_});var st=l((TO,Ju)=>{var M_=ae(),z_=J(),L_="[object Symbol]";function $_(e){return typeof e=="symbol"||z_(e)&&M_(e)==L_}Ju.exports=$_});var Vt=l((IO,el)=>{var G_=X(),B_=st(),U_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k_=/^\w*$/;function K_(e,t){if(G_(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||B_(e)?!0:k_.test(e)||!U_.test(e)||t!=null&&e in Object(t)}el.exports=K_});var nl=l((OO,rl)=>{var tl=jt(),H_="Expected a function";function tn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(H_);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(tn.Cache||tl),r}tn.Cache=tl;rl.exports=tn});var al=l((CO,il)=>{var V_=nl(),W_=500;function X_(e){var t=V_(e,function(n){return r.size===W_&&r.clear(),n}),r=t.cache;return t}il.exports=X_});var ol=l((EO,sl)=>{var Y_=al(),Q_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z_=/\\(\\)?/g,J_=Y_(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Q_,function(r,n,i,a){t.push(i?a.replace(Z_,"$1"):n||r)}),t});sl.exports=J_});var hl=l((jO,fl)=>{var ul=de(),e0=Ht(),t0=X(),r0=st(),n0=1/0,ll=ul?ul.prototype:void 0,cl=ll?ll.toString:void 0;function pl(e){if(typeof e=="string")return e;if(t0(e))return e0(e,pl)+"";if(r0(e))return cl?cl.call(e):"";var t=e+"";return t=="0"&&1/e==-n0?"-0":t}fl.exports=pl});var dl=l((FO,ml)=>{var i0=hl();function a0(e){return e==null?"":i0(e)}ml.exports=a0});var ot=l((DO,gl)=>{var s0=X(),o0=Vt(),u0=ol(),l0=dl();function c0(e,t){return s0(e)?e:o0(e,t)?[e]:u0(l0(e))}gl.exports=c0});var vl=l((PO,bl)=>{function p0(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}bl.exports=p0});var Re=l((NO,yl)=>{var f0=st(),h0=1/0;function m0(e){if(typeof e=="string"||f0(e))return e;var t=e+"";return t=="0"&&1/e==-h0?"-0":t}yl.exports=m0});var Wt=l((RO,_l)=>{var d0=ot(),g0=Re();function b0(e,t){t=d0(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[g0(t[r++])];return r&&r==n?e:void 0}_l.exports=b0});var Sl=l((MO,ql)=>{function v0(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}ql.exports=v0});var Al=l((zO,xl)=>{var y0=Wt(),_0=Sl();function q0(e,t){return t.length<2?e:y0(e,_0(t,0,-1))}xl.exports=q0});var Tl=l((LO,wl)=>{var S0=ot(),x0=vl(),A0=Al(),w0=Re();function T0(e,t){return t=S0(t,e),e=A0(e,t),e==null||delete e[w0(x0(t))]}wl.exports=T0});var Cl=l(($O,Ol)=>{var I0=ae(),O0=Gt(),C0=J(),E0="[object Object]",j0=Function.prototype,F0=Object.prototype,Il=j0.toString,D0=F0.hasOwnProperty,P0=Il.call(Object);function N0(e){if(!C0(e)||I0(e)!=E0)return!1;var t=O0(e);if(t===null)return!0;var r=D0.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Il.call(r)==P0}Ol.exports=N0});var jl=l((GO,El)=>{var R0=Cl();function M0(e){return R0(e)?void 0:e}El.exports=M0});var Nl=l((BO,Pl)=>{var Fl=de(),z0=Dt(),L0=X(),Dl=Fl?Fl.isConcatSpreadable:void 0;function $0(e){return L0(e)||z0(e)||!!(Dl&&e&&e[Dl])}Pl.exports=$0});var rn=l((UO,Ml)=>{var G0=$t(),B0=Nl();function Rl(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=B0),i||(i=[]);++a<s;){var u=e[a];t>0&&r(u)?t>1?Rl(u,t-1,r,n,i):G0(i,u):n||(i[i.length]=u)}return i}Ml.exports=Rl});var Ll=l((kO,zl)=>{var U0=rn();function k0(e){var t=e==null?0:e.length;return t?U0(e,1):[]}zl.exports=k0});var Gl=l((KO,$l)=>{function K0(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}$l.exports=K0});var nn=l((HO,Ul)=>{var H0=Gl(),Bl=Math.max;function V0(e,t,r){return t=Bl(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Bl(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=r(s),H0(e,this,u)}}Ul.exports=V0});var Hl=l((VO,Kl)=>{var W0=en(),kl=Pr(),X0=at(),Y0=kl?function(e,t){return kl(e,"toString",{configurable:!0,enumerable:!1,value:W0(t),writable:!0})}:X0;Kl.exports=Y0});var Wl=l((WO,Vl)=>{var Q0=800,Z0=16,J0=Date.now;function eq(e){var t=0,r=0;return function(){var n=J0(),i=Z0-(n-r);if(r=n,i>0){if(++t>=Q0)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Vl.exports=eq});var an=l((XO,Xl)=>{var tq=Hl(),rq=Wl(),nq=rq(tq);Xl.exports=nq});var Ql=l((YO,Yl)=>{var iq=Ll(),aq=nn(),sq=an();function oq(e){return sq(aq(e,void 0,iq),e+"")}Yl.exports=oq});var Jl=l((QO,Zl)=>{var uq=Ht(),lq=kt(),cq=Tl(),pq=ot(),fq=je(),hq=jl(),mq=Ql(),dq=Hr(),gq=1,bq=2,vq=4,yq=mq(function(e,t){var r={};if(e==null)return r;var n=!1;t=uq(t,function(a){return a=pq(a,e),n||(n=a.length>1),a}),fq(e,dq(e),r),n&&(r=lq(r,gq|bq|vq,hq));for(var i=t.length;i--;)cq(r,t[i]);return r});Zl.exports=yq});var pc=l((nC,cc)=>{var xq="__lodash_hash_undefined__";function Aq(e){return this.__data__.set(e,xq),this}cc.exports=Aq});var hc=l((iC,fc)=>{function wq(e){return this.__data__.has(e)}fc.exports=wq});var tr=l((aC,mc)=>{var Tq=jt(),Iq=pc(),Oq=hc();function er(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Tq;++t<r;)this.add(e[t])}er.prototype.add=er.prototype.push=Iq;er.prototype.has=Oq;mc.exports=er});var gc=l((sC,dc)=>{function Cq(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}dc.exports=Cq});var rr=l((oC,bc)=>{function Eq(e,t){return e.has(t)}bc.exports=Eq});var ln=l((uC,vc)=>{var jq=tr(),Fq=gc(),Dq=rr(),Pq=1,Nq=2;function Rq(e,t,r,n,i,a){var s=r&Pq,u=e.length,o=t.length;if(u!=o&&!(s&&o>u))return!1;var c=a.get(e),p=a.get(t);if(c&&p)return c==t&&p==e;var f=-1,v=!0,q=r&Nq?new jq:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var S=e[f],w=t[f];if(n)var A=s?n(w,S,f,t,e,a):n(S,w,f,e,t,a);if(A!==void 0){if(A)continue;v=!1;break}if(q){if(!Fq(t,function(x,I){if(!Dq(q,I)&&(S===x||i(S,x,r,n,a)))return q.push(I)})){v=!1;break}}else if(!(S===w||i(S,w,r,n,a))){v=!1;break}}return a.delete(e),a.delete(t),v}vc.exports=Rq});var _c=l((lC,yc)=>{function Mq(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}yc.exports=Mq});var nr=l((cC,qc)=>{function zq(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}qc.exports=zq});var Tc=l((pC,wc)=>{var Sc=de(),xc=Jr(),Lq=Ct(),$q=ln(),Gq=_c(),Bq=nr(),Uq=1,kq=2,Kq="[object Boolean]",Hq="[object Date]",Vq="[object Error]",Wq="[object Map]",Xq="[object Number]",Yq="[object RegExp]",Qq="[object Set]",Zq="[object String]",Jq="[object Symbol]",eS="[object ArrayBuffer]",tS="[object DataView]",Ac=Sc?Sc.prototype:void 0,cn=Ac?Ac.valueOf:void 0;function rS(e,t,r,n,i,a,s){switch(r){case tS:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case eS:return!(e.byteLength!=t.byteLength||!a(new xc(e),new xc(t)));case Kq:case Hq:case Xq:return Lq(+e,+t);case Vq:return e.name==t.name&&e.message==t.message;case Yq:case Zq:return e==t+"";case Wq:var u=Gq;case Qq:var o=n&Uq;if(u||(u=Bq),e.size!=t.size&&!o)return!1;var c=s.get(e);if(c)return c==t;n|=kq,s.set(e,t);var p=$q(u(e),u(t),n,i,a,s);return s.delete(e),p;case Jq:if(cn)return cn.call(e)==cn.call(t)}return!1}wc.exports=rS});var Cc=l((fC,Oc)=>{var Ic=Kr(),nS=1,iS=Object.prototype,aS=iS.hasOwnProperty;function sS(e,t,r,n,i,a){var s=r&nS,u=Ic(e),o=u.length,c=Ic(t),p=c.length;if(o!=p&&!s)return!1;for(var f=o;f--;){var v=u[f];if(!(s?v in t:aS.call(t,v)))return!1}var q=a.get(e),S=a.get(t);if(q&&S)return q==t&&S==e;var w=!0;a.set(e,t),a.set(t,e);for(var A=s;++f<o;){v=u[f];var x=e[v],I=t[v];if(n)var O=s?n(I,x,v,t,e,a):n(x,I,v,e,t,a);if(!(O===void 0?x===I||i(x,I,r,n,a):O)){w=!1;break}A||(A=v=="constructor")}if(w&&!A){var E=e.constructor,j=t.constructor;E!=j&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof j=="function"&&j instanceof j)&&(w=!1)}return a.delete(e),a.delete(t),w}Oc.exports=sS});var Mc=l((hC,Rc)=>{var pn=Ft(),oS=ln(),uS=Tc(),lS=Cc(),Ec=nt(),jc=X(),Fc=Pt(),cS=Lr(),pS=1,Dc="[object Arguments]",Pc="[object Array]",ir="[object Object]",fS=Object.prototype,Nc=fS.hasOwnProperty;function hS(e,t,r,n,i,a){var s=jc(e),u=jc(t),o=s?Pc:Ec(e),c=u?Pc:Ec(t);o=o==Dc?ir:o,c=c==Dc?ir:c;var p=o==ir,f=c==ir,v=o==c;if(v&&Fc(e)){if(!Fc(t))return!1;s=!0,p=!1}if(v&&!p)return a||(a=new pn),s||cS(e)?oS(e,t,r,n,i,a):uS(e,t,o,r,n,i,a);if(!(r&pS)){var q=p&&Nc.call(e,"__wrapped__"),S=f&&Nc.call(t,"__wrapped__");if(q||S){var w=q?e.value():e,A=S?t.value():t;return a||(a=new pn),i(w,A,r,n,a)}}return v?(a||(a=new pn),lS(e,t,r,n,i,a)):!1}Rc.exports=hS});var ar=l((mC,$c)=>{var mS=Mc(),zc=J();function Lc(e,t,r,n,i){return e===t?!0:e==null||t==null||!zc(e)&&!zc(t)?e!==e&&t!==t:mS(e,t,r,n,Lc,i)}$c.exports=Lc});var Bc=l((dC,Gc)=>{var dS=ar();function gS(e,t){return dS(e,t)}Gc.exports=gS});var Xc=l((GC,Wc)=>{var zS=kt(),LS=4;function $S(e){return zS(e,LS)}Wc.exports=$S});var Qc=l((BC,Yc)=>{var GS=Ft(),BS=ar(),US=1,kS=2;function KS(e,t,r,n){var i=r.length,a=i,s=!n;if(e==null)return!a;for(e=Object(e);i--;){var u=r[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){u=r[i];var o=u[0],c=e[o],p=u[1];if(s&&u[2]){if(c===void 0&&!(o in e))return!1}else{var f=new GS;if(n)var v=n(c,p,o,e,t,f);if(!(v===void 0?BS(p,c,US|kS,n,f):v))return!1}}return!0}Yc.exports=KS});var yn=l((UC,Zc)=>{var HS=se();function VS(e){return e===e&&!HS(e)}Zc.exports=VS});var ep=l((kC,Jc)=>{var WS=yn(),XS=ge();function YS(e){for(var t=XS(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,WS(i)]}return t}Jc.exports=YS});var _n=l((KC,tp)=>{function QS(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}tp.exports=QS});var np=l((HC,rp)=>{var ZS=Qc(),JS=ep(),ex=_n();function tx(e){var t=JS(e);return t.length==1&&t[0][2]?ex(t[0][0],t[0][1]):function(r){return r===e||ZS(r,e,t)}}rp.exports=tx});var ap=l((VC,ip)=>{var rx=Wt();function nx(e,t,r){var n=e==null?void 0:rx(e,t);return n===void 0?r:n}ip.exports=nx});var op=l((WC,sp)=>{function ix(e,t){return e!=null&&t in Object(e)}sp.exports=ix});var lp=l((XC,up)=>{var ax=ot(),sx=Dt(),ox=X(),ux=Mr(),lx=Nt(),cx=Re();function px(e,t,r){t=ax(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var s=cx(t[n]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&lx(i)&&ux(s,i)&&(ox(e)||sx(e)))}up.exports=px});var pp=l((YC,cp)=>{var fx=op(),hx=lp();function mx(e,t){return e!=null&&hx(e,t,fx)}cp.exports=mx});var hp=l((QC,fp)=>{var dx=ar(),gx=ap(),bx=pp(),vx=Vt(),yx=yn(),_x=_n(),qx=Re(),Sx=1,xx=2;function Ax(e,t){return vx(e)&&yx(t)?_x(qx(e),t):function(r){var n=gx(r,e);return n===void 0&&n===t?bx(r,e):dx(t,n,Sx|xx)}}fp.exports=Ax});var dp=l((ZC,mp)=>{function wx(e){return function(t){return t?.[e]}}mp.exports=wx});var bp=l((JC,gp)=>{var Tx=Wt();function Ix(e){return function(t){return Tx(t,e)}}gp.exports=Ix});var yp=l((eE,vp)=>{var Ox=dp(),Cx=bp(),Ex=Vt(),jx=Re();function Fx(e){return Ex(e)?Ox(jx(e)):Cx(e)}vp.exports=Fx});var qn=l((tE,_p)=>{var Dx=np(),Px=hp(),Nx=at(),Rx=X(),Mx=yp();function zx(e){return typeof e=="function"?e:e==null?Nx:typeof e=="object"?Rx(e)?Px(e[0],e[1]):Dx(e):Mx(e)}_p.exports=zx});var Sp=l((rE,qp)=>{var Lx=qn(),$x=tt(),Gx=ge();function Bx(e){return function(t,r,n){var i=Object(t);if(!$x(t)){var a=Lx(r,3);t=Gx(t),r=function(u){return a(i[u],u,i)}}var s=e(t,r,n);return s>-1?i[a?t[s]:s]:void 0}}qp.exports=Bx});var Sn=l((nE,xp)=>{function Ux(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}xp.exports=Ux});var wp=l((iE,Ap)=>{var kx=/\s/;function Kx(e){for(var t=e.length;t--&&kx.test(e.charAt(t)););return t}Ap.exports=Kx});var Ip=l((aE,Tp)=>{var Hx=wp(),Vx=/^\s+/;function Wx(e){return e&&e.slice(0,Hx(e)+1).replace(Vx,"")}Tp.exports=Wx});var jp=l((sE,Ep)=>{var Xx=Ip(),Op=se(),Yx=st(),Cp=NaN,Qx=/^[-+]0x[0-9a-f]+$/i,Zx=/^0b[01]+$/i,Jx=/^0o[0-7]+$/i,eA=parseInt;function tA(e){if(typeof e=="number")return e;if(Yx(e))return Cp;if(Op(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Op(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xx(e);var r=Zx.test(e);return r||Jx.test(e)?eA(e.slice(2),r?2:8):Qx.test(e)?Cp:+e}Ep.exports=tA});var Pp=l((oE,Dp)=>{var rA=jp(),Fp=1/0,nA=17976931348623157e292;function iA(e){if(!e)return e===0?e:0;if(e=rA(e),e===Fp||e===-Fp){var t=e<0?-1:1;return t*nA}return e===e?e:0}Dp.exports=iA});var Rp=l((uE,Np)=>{var aA=Pp();function sA(e){var t=aA(e),r=t%1;return t===t?r?t-r:t:0}Np.exports=sA});var zp=l((lE,Mp)=>{var oA=Sn(),uA=qn(),lA=Rp(),cA=Math.max;function pA(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:lA(r);return i<0&&(i=cA(n+i,0)),oA(e,uA(t,3),i)}Mp.exports=pA});var $p=l((cE,Lp)=>{var fA=Sp(),hA=zp(),mA=fA(hA);Lp.exports=mA});var Bp=l((pE,Gp)=>{function dA(e){return e!==e}Gp.exports=dA});var kp=l((fE,Up)=>{function gA(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}Up.exports=gA});var Hp=l((hE,Kp)=>{var bA=Sn(),vA=Bp(),yA=kp();function _A(e,t,r){return t===t?yA(e,t,r):bA(e,vA,r)}Kp.exports=_A});var xn=l((mE,Vp)=>{var qA=Hp();function SA(e,t){var r=e==null?0:e.length;return!!r&&qA(e,t,0)>-1}Vp.exports=SA});var An=l((dE,Wp)=>{function xA(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}Wp.exports=xA});var Yp=l((gE,Xp)=>{function AA(){}Xp.exports=AA});var Zp=l((bE,Qp)=>{var wn=Vr(),wA=Yp(),TA=nr(),IA=1/0,OA=wn&&1/TA(new wn([,-0]))[1]==IA?function(e){return new wn(e)}:wA;Qp.exports=OA});var ef=l((vE,Jp)=>{var CA=tr(),EA=xn(),jA=An(),FA=rr(),DA=Zp(),PA=nr(),NA=200;function RA(e,t,r){var n=-1,i=EA,a=e.length,s=!0,u=[],o=u;if(r)s=!1,i=jA;else if(a>=NA){var c=t?null:DA(e);if(c)return PA(c);s=!1,i=FA,o=new CA}else o=t?[]:u;e:for(;++n<a;){var p=e[n],f=t?t(p):p;if(p=r||p!==0?p:0,s&&f===f){for(var v=o.length;v--;)if(o[v]===f)continue e;t&&o.push(f),u.push(p)}else i(o,f,r)||(o!==u&&o.push(f),u.push(p))}return u}Jp.exports=RA});var Tn=l((yE,tf)=>{var MA=ef();function zA(e){return e&&e.length?MA(e):[]}tf.exports=zA});var In=l((_E,rf)=>{var LA=tr(),$A=xn(),GA=An(),BA=Ht(),UA=Ze(),kA=rr(),KA=200;function HA(e,t,r,n){var i=-1,a=$A,s=!0,u=e.length,o=[],c=t.length;if(!u)return o;r&&(t=BA(t,UA(r))),n?(a=GA,s=!1):t.length>=KA&&(a=kA,s=!1,t=new LA(t));e:for(;++i<u;){var p=e[i],f=r==null?p:r(p);if(p=n||p!==0?p:0,s&&f===f){for(var v=c;v--;)if(t[v]===f)continue e;o.push(p)}else a(t,f,n)||o.push(p)}return o}rf.exports=HA});var On=l((qE,nf)=>{var VA=at(),WA=nn(),XA=an();function YA(e,t){return XA(WA(e,t,VA),e+"")}nf.exports=YA});var Cn=l((SE,af)=>{var QA=tt(),ZA=J();function JA(e){return ZA(e)&&QA(e)}af.exports=JA});var of=l((xE,sf)=>{var ew=In(),tw=On(),rw=Cn(),nw=tw(function(e,t){return rw(e)?ew(e,t):[]});sf.exports=nw});var qf=l((nj,_f)=>{var Vw=In(),Ww=rn(),Xw=On(),yf=Cn(),Yw=Xw(function(e,t){return yf(e)?Vw(e,Ww(t,1,yf,!0)):[]});_f.exports=Yw});var jf=$(Pi(),1);var Hi=$(Ki(),1),Tt=class{constructor(t){let r=/.*?(irealb(?:ook)?):\/\/([^"]*)/.exec(t),i=decodeURIComponent(r[2]).split("===");i.length>1&&(this.name=i.pop()),this.songs=i.map(a=>{try{return new Ke(a,r[1]==="irealbook")}catch(s){let u=a.split("="),o=Ke.parseTitle(u[0].trim());return console.error(`[ireal-musicxml] [${o}] ${s}`),null}}).filter(a=>a!==null).reduce((a,s)=>{if(a.length>0){let u=(0,Hi.default)(a[a.length-1].title,s.title);if(u[0][0]===0&&u.every(o=>o[0]===0||o[1].match(/^\d+$/)))return a[a.length-1].cells=a[a.length-1].cells.concat(s.cells),a}return a.push(s),a},[])}},It=class{constructor(){this.annots=[],this.comments=[],this.bars="",this.spacer=0,this.chord=null}},me=class{constructor(t,r="",n=null,i=null){this.note=t,this.modifiers=r,this.over=n,this.alternate=i}},Ke=class e{constructor(t,r=!1){if(this.cells=[],this.musicXml="",!t){this.title="",this.composer="",this.style="",this.key="",this.transpose=0,this.groove="",this.bpm=0,this.repeats=0;return}let n=t.split("=");if(r)this.title=e.parseTitle(n[0].trim()),this.composer=e.parseComposer(n[1].trim()),this.style=n[2].trim(),this.key=n[3],this.cells=this.parse(n[5]);else{this.title=e.parseTitle(n[0].trim()),this.composer=e.parseComposer(n[1].trim()),this.style=n[3].trim(),this.key=n[4],this.transpose=+n[5]||0,this.groove=n[7],this.bpm=+n[8],this.repeats=+n[9]||3;let i=n[6].split("1r34LbKcu7");this.cells=this.parse($h(i[1]))}}static chordRegex=/^([A-G][b#]?)((?:sus|alt|add|[+\-^\dhob#])*)(\*.+?\*)*(\/[A-G][#b]?)?(\(.*?\))?/;static chordRegex2=/^([ Wp])()()(\/[A-G][#b]?)?(\(.*?\))?/;static regExps=[/^\*[a-zA-Z]/,/^T\d\d/,/^N./,/^<.*?>/,e.chordRegex,e.chordRegex2];parse(t){let r=t.trim(),n=[];for(;r;){let u=!1;for(let o=0;o<e.regExps.length;o++){let c=e.regExps[o].exec(r);if(c){u=!0,c.length<=2?(n.push(c[0]),r=r.substr(c[0].length)):(n.push(c),r=r.substr(c[0].length));break}}u||(r[0]!==","&&n.push(r[0]),r=r.substr(1))}let i=[],a=this.newCell(i),s=null;for(let u=0;u<n.length;u++){let o=n[u];switch(o instanceof Array&&(a.chord=this.parseChord(o),o=" "),o[0]){case"{":case"[":s&&(s.bars+=")",s=null),a.bars=o,o=null;break;case"|":s&&(s.bars+=")",s=null),a.bars="(",o=null;break;case"]":case"}":case"Z":s&&(s.bars+=o,s=null),o=null;break;case"n":a.chord=new me(o[0]);break;case",":o=null;break;case"S":case"T":case"Q":case"N":case"U":case"s":case"l":case"f":case"*":a.annots.push(o),o=null;break;case"Y":a.spacer++,o=null,s=null;break;case"r":case"x":case"W":a.chord=new me(o);break;case"<":o=o.substr(1,o.length-2),a.comments.push(o),o=null;break;default:}o&&u<n.length-1&&(s=a,a=this.newCell(i))}return i}static parseTitle(t){return t.replace(/(.*)(, )(A|The)$/g,"$3 $1")}static parseComposer(t){let r=t.split(/(\s+)/);return r.length==3?r[2]+r[1]+r[0]:t}parseChord(t){var r=t[1]||" ",n=t[2]||"",i=t[3]||"";i&&(n+=i.substr(1,i.length-2));var a=t[4]||"";a[0]==="/"&&(a=a.substr(1));var s=t[5]||null;if(s&&(t=e.chordRegex.exec(s.substr(1,s.length-2)),t?s=this.parseChord(t):s=null),r===" "&&!s&&!a)return null;if(a){var u=a[1]==="#"||a[1]==="b"?2:1;a=new me(a.substr(0,u),a.substr(u),null,null)}else a=null;return new me(r,n,a,s)}newCell(t){var r=new It;return t.push(r),r}};function $h(e){let t="",r;for(;e.length>51;)r=e.substring(0,50),e=e.substring(50),t=t+Gh(r);return t=t+e,t=t.replace(/Kcl/g,"| x").replace(/LZ/g," |").replace(/XyQ/g,"   "),t}function Gh(e){let t=e.split("");for(let r=0;r<5;r++)t[49-r]=e[r],t[r]=e[49-r];for(let r=10;r<24;r++)t[49-r]=e[r],t[r]=e[49-r];return t.join("")}var Ef=$(Vi(),1);function Q(e,t){return e.reduce((r,n)=>r?n(r):null,t)}var fr=$(it()),bf=$(Mu());var b_=e=>{if(!Array.isArray(e))throw new TypeError("customFilters should be given as an array");if(e.some(t=>typeof t!="function"))throw new TypeError("The given filter is not a function");return!0},Kt=b_;var rc=$(Qu()),nc=$(Jl()),h={AFlat:"Ab",A:"A",ASharp:"A#",BFlat:"Bb",B:"B",C:"C",CSharp:"C#",DFlat:"Db",D:"D",DSharp:"D#",EFlat:"Eb",E:"E",F:"F",FSharp:"F#",GFlat:"Gb",G:"G",GSharp:"G#"},sn={Ab:h.AFlat,A:h.A,"A#":h.ASharp,Bb:h.BFlat,B:h.B,"B#":h.C,Cb:h.B,C:h.C,"C#":h.CSharp,Db:h.DFlat,D:h.D,"D#":h.DSharp,Eb:h.EFlat,E:h.E,"E#":h.F,Fb:h.E,F:h.F,"F#":h.FSharp,Gb:h.GFlat,G:h.G,"G#":h.GSharp},ec={Lab:h.AFlat,La:h.A,"La#":h.ASharp,Sib:h.BFlat,Si:h.B,"Si#":h.C,Dob:h.B,Do:h.C,"Do#":h.CSharp,Reb:h.DFlat,R\u00E9b:h.DFlat,Re:h.D,R\u00E9:h.D,"Re#":h.DSharp,"R\xE9#":h.DSharp,Mib:h.EFlat,Mi:h.E,"Mi#":h.F,Fab:h.E,Fa:h.F,"Fa#":h.FSharp,Solb:h.GFlat,Sol:h.G,"Sol#":h.GSharp},tc={...(0,nc.default)(sn,["Bb","B","B#"]),As:h.AFlat,Ais:h.ASharp,Hb:h.BFlat,Hes:h.BFlat,H:h.B,His:h.C,"H#":h.C,Ces:h.B,Cis:h.CSharp,Des:h.DFlat,Dis:h.DSharp,Es:h.EFlat,Eis:h.F,Fes:h.E,Fis:h.FSharp,Ges:h.GFlat,Gis:h.GSharp};function on(e){let t;return Object.keys(e).reduce((r,n)=>(n.match(/.[b|#]$/)&&(t=n.replace("#","\u266F").replace("b","\u266D"),r[t]=e[n]),r),{})}var ic={...sn,...on(sn)},ac={...ec,...on(ec)},sc={...tc,...on(tc)},Xt={...ic,...ac,...sc},ZO=Object.keys(Xt).sort((e,t)=>t.length-e.length),_q=Object.keys(ic).sort((e,t)=>t.length-e.length),qq=Object.keys(ac).sort((e,t)=>t.length-e.length),Sq=Object.keys(sc).sort((e,t)=>t.length-e.length),oc=[{name:"english",notes:_q},{name:"german",notes:Sq},{name:"latin",notes:qq}],ue=[h.A,h.ASharp,h.B,h.C,h.CSharp,h.D,h.DSharp,h.E,h.F,h.FSharp,h.G,h.GSharp],uc=[h.A,h.BFlat,h.B,h.C,h.DFlat,h.D,h.EFlat,h.E,h.F,h.GFlat,h.G,h.AFlat],un={[h.CSharp]:h.DFlat,[h.DSharp]:h.EFlat,[h.FSharp]:h.GFlat,[h.GSharp]:h.AFlat,[h.ASharp]:h.BFlat},ve=(0,rc.default)(un);var lc=[...Object.values(h),...Object.values(h).map(e=>e+"m")];var Yt=class extends Error{constructor(){super("The given symbol is not a valid string"),this.name="InvalidInput"}},Qt=class extends Error{constructor(){super("An unexpected error happened. Maybe a custom filter returned null instead of throwing an exception?"),this.name="UnexpectedError"}},ut=class extends Error{constructor(t,r,n){super(t),this.name=n,this.chord=r}},Me=class extends ut{constructor(t){let r=`"${t.input.symbol}" does not seems to be a chord`;super(r,t,"NoSymbolFound")}},Zt=class extends ut{constructor(t,r){let n=`The chord descriptor "${t.input.descriptor}" contains unknown or duplicated modifiers: "${r}"`;super(n,t,"InvalidModifier")}},Jt=class extends ut{constructor(t,r){let n=`"${t.input.symbol}" describes a chord with an invalid intervals combo: `+r.join(" and ");super(n,t,"InvalidIntervals")}};var fn=$(X()),Uc=$(Bc());function ye(e,t){let r=(0,fn.default)(t)?t:[t];return(0,Uc.default)(e,r)}function C(e,t){return hn(e,t,"oneOf")}function lt(e,t){return hn(e,t,"all")}function Y(e,t){return hn(e,t,"none")}function hn(e,t,r){return((0,fn.default)(t)?t:[t])[r==="oneOf"?"some":"every"](a=>r==="none"?!e.includes(a):e.includes(a))}var bS=[["2","3"],["2","9"],["3","b3"],["4","11"],["5","b5"],["5","#5"],["b6","#5"],["b6","6"],["b6","13"],["6","13"],["b7","bb7"],["7","b7"],["9","b9"],["9","#9"],["11","#11"],["13","b13"]];function mn(e){let t=e.normalized.intervals,r=bS.find(n=>lt(t,n));if(r)throw new Jt(e,r);return e}function ct(e){let{rootNote:t,bassNote:r,descriptor:n,chordChanges:i}=e.formatted,a=t;return n&&(a+=n),i&&i.length&&(a+="("+i.join(",")+")"),r&&(a+="/"+r),e.formatted.symbol=a,e}var g={ma:"major",ma6:"major6",ma7:"major7",dom7:"dominant7",mi:"minor",mi6:"minor6",mi7:"minor7",miMa7:"minorMajor7",aug:"augmented",dim:"diminished",dim7:"diminished7",power:"power",bass:"bass"},qC=[g.ma,g.ma6,g.ma7,g.dom7,g.aug],sr=[g.mi,g.mi6,g.mi7,g.miMa7,g.dim,g.dim7];var vS={[g.ma]:()=>"",[g.ma6]:e=>e.normalized.intervals.includes("9")?"69":"6",[g.ma7]:e=>"ma"+or(e),[g.dom7]:e=>e.normalized.intents.alt?"7alt":or(e),[g.mi]:()=>"mi",[g.mi6]:e=>e.normalized.intervals.includes("9")?"mi69":"mi6",[g.mi7]:e=>"mi"+or(e),[g.miMa7]:e=>"miMa"+or(e),[g.aug]:()=>"+",[g.dim]:()=>"dim",[g.dim7]:()=>"dim7",[g.power]:()=>"5",[g.bass]:()=>" bass"},ur={add:"add",add7:"Ma7",omit:"omit",sus:"sus"};function pt(e){return e.formatted={rootNote:e.normalized.rootNote,bassNote:e.normalized.bassNote,descriptor:yS(e),chordChanges:_S(e)},e}function yS(e){let t=vS[e.normalized.quality](e);return e.normalized.isSuspended&&(t+=ur.sus),t}function or(e){let t=e.normalized.extensions,r=t[t.length-1];return r==="11"&&e.normalized.intents.major&&(r=Y(e.normalized.alterations,["b9","#9"])?"9":"7"),r||"7"}function _S(e){let t=xS(e.normalized.omits);if(qS(e))return t;let r=SS(e.normalized.quality,e.normalized.adds);return[...e.normalized.alterations,...r,...t]}function qS(e){return e.normalized.intents.alt&&e.normalized.quality===g.dom7}function SS(e,t){return t.filter(r=>!([g.ma6,g.mi6].includes(e)&&r==="9")).map((r,n)=>{let i="";return n===0&&(i+=ur.add,["b","#"].includes(r[0])&&(i+=" ")),i+=r==="7"?ur.add7:r,i})}function xS(e){return e.map((t,r)=>{let n="";return r===0&&(n+=ur.omit),n+=t==="b3"?"3":t,n})}var ze={flat:"\u266D",sharp:"\u266F"},kc={major:{0:"I",2:"II",3:`${ze.flat}III`,4:"III",5:"IV",7:"V",8:`${ze.flat}VI`,9:"VI",10:`${ze.flat}VII`,11:"VII"},minor:{0:"I",2:"II",3:"III",4:`${ze.sharp}III`,5:"IV",7:"V",8:"VI",9:`${ze.sharp}VI`,10:"VII",11:`${ze.sharp}VII`}};var T={sup2:"\xB2",sup4:"\u2074",sup5:"\u2075",sup6:"\u2076",sup7:"\u2077",sub3:"\u2083",sub4:"\u2084",sub5:"\u2085",flat:"\u266D",sharp:"\u266F"},lr={major:["I","ii","iii","IV","V","vi","vii\xB0"],dom7:["I\u0394",`ii${T.sup7}`,`iii${T.sup7}`,"IV\u0394",`V${T.sup7}`,`vi${T.sup7}`,"vii\xF8"],minor:["i","ii\xB0","III","iv","v","VI","VII"],minor7:[`i${T.sup7}`,"ii\xF8","III\u0394",`iv${T.sup7}`,`v${T.sup7}`,"VI\u0394","VII\u0394"]},cr={borrowedFromMinor:["i","ii\xB0",`${T.flat}III`,"iv","v",`${T.flat}VI`,`${T.flat}VII`],borrowedFromMinor7:[`i${T.sup7}`,"ii\xF8",`${T.flat}III\u0394`,`iv${T.sup7}`,`v${T.sup7}`,`${T.flat}VI\u0394`,`${T.flat}VII\u0394`],borrowedFromMajor:["I","ii",`${T.sharp}iii`,"IV","V",`${T.sharp}vi`,`${T.sharp}vii\xB0`],borrowedFromDom7:["I\u0394",`ii${T.sup7}`,`${T.sharp}iii${T.sup7}`,"IV\u0394",`V${T.sup7}`,`${T.sharp}vi${T.sup7}`,`${T.sharp}vii\xF8`]};function dn(e="",t){let r,n,i;e||(e=t.normalized.rootNote);let a=e.indexOf("m")>-1?"minor":"major",s=sr.includes(t.normalized.quality)?"minor":"major";r=AS(e,a,t,s);let u=CS(t),o=TS[t.normalized.quality](t,u);return n=`${r}${o}`,IS(a,n)?i="diatonic":OS(a,n)?i="borrowed":(i="unknown",r="?",n=`${r}${o}`),n+=u,t.numeral={symbol:n,degree:r,descriptor:o,inversion:u,type:i,thirdQuality:s},t}function AS(e,t,r,n){let i=e.replace("m",""),a=wS(i,r.normalized.rootNote),s=kc[t][a]||"?";return n==="minor"?s.toLowerCase():s}function wS(e,t){let r=ue.indexOf(ve[e]||e);return(ue.indexOf(ve[t]||t)-r+12)%12}var TS={[g.ma]:()=>"",[g.ma6]:()=>"",[g.ma7]:()=>"\u0394",[g.dom7]:(e,t)=>t===""?`${T.sup7}`:"",[g.mi]:()=>"",[g.mi6]:()=>"",[g.mi7]:(e,t)=>e.normalized.intervals.includes("b5")?"\xF8":t===""?`${T.sup7}`:"",[g.miMa7]:()=>"m\u0394",[g.aug]:()=>"+",[g.dim]:()=>"\xB0",[g.dim7]:(e,t)=>t===""?`\xB0${T.sup7}`:"\xB0",[g.power]:()=>"",[g.bass]:()=>""};function IS(e,t){return e==="major"?lr.major.includes(t)||lr.dom7.includes(t):lr.minor.includes(t)||lr.minor7.includes(t)}function OS(e,t){return e==="major"?cr.borrowedFromMinor.includes(t)||cr.borrowedFromMinor7.includes(t):cr.borrowedFromMajor.includes(t)||cr.borrowedFromDom7.includes(t)}function CS(e){let t="";return e.normalized.bassNote&&(ES(e)?t=Kc(e)?`${T.sup6}${T.sub5}`:`${T.sup6}`:jS(e)?t=Kc(e)?`${T.sup4}${T.sub3}`:`${T.sup6}${T.sub4}`:FS(e)&&(t="\xB2")),t}function Kc(e){return[g.ma7,g.mi7,g.miMa7,g.dom7,g.dim7].includes(e.normalized.quality)}function ES(e){return le(e,"b3")||le(e,"3")}function jS(e){return le(e,"b5")||le(e,"5")||le(e,"#5")}function FS(e){return le(e,"bb7")||le(e,"b7")||le(e,"7")}function le(e,t){let r=e.normalized.intervals.indexOf(t);if(r===-1)return!1;let n=ve[e.normalized.bassNote]||e.normalized.bassNote,i=ve[e.normalized.notes[r]]||e.normalized.notes[r];return n===i}function gn(e){let t=[DS,PS,NS,RS];return e.input.descriptor&&(e.input.parsableDescriptor=Q(t,e.input.descriptor)),e}function DS(e){return e.replace(/[A-LN-Za-z]+/g,t=>t.toLowerCase()).replace("oMit","omit").replace("diM","dim").replace("augMented","augmented")}function PS(e){return e.replace(/ /g,"")}function NS(e){return e.replace(/(7?dim)(alt|add)/g,"$1 $2").replace(/([m|M])(alt|add)/g,"$1 $2").replace(/i(no[35])/g,"i $1").replace(/([b#]9)6/g,"$1 6").replace(/(9\/?6)/g," $1").replaceAll("+5","#5").replaceAll("-5","b5")}function RS(e){let t,r,n;return e.replace(/\((.*?)\)/g,(i,a)=>(t=[],r="",a.split(",").forEach(s=>{n=!0,s.startsWith("add")?r="add":s.startsWith("omit")?r="omit":s.startsWith("no")?r="no":n=!1,n?t.push(s):t.push(r+s)})," "+t.join(" ")+" "))}var Hc=$(it());function bn(e={},t){return{input:{symbol:t},normalized:{},formatted:{},parserConfiguration:(0,Hc.default)(e)}}var MS={C:"flat",D:"sharp",E:"sharp",F:"flat",G:"sharp",A:"sharp",B:"sharp",Cm:"flat",Dm:"flat",Em:"sharp",Fm:"flat",Gm:"flat",Am:"flat",Bm:"sharp"};function Vc(e){return e.indexOf("#")>-1?"sharp":e.indexOf("b")>-1?"flat":MS[e]}function _e(e){let t=e.normalized.rootNote,r=e.normalized.semitones,n=e.normalized.quality,i=t;sr.includes(n)&&(i+="m");let a=Vc(i)==="sharp"?ue:uc,s=a.indexOf(t),u=[...a.slice(s),...a.slice(0,s),...a.slice(s),...a.slice(0,s)];return e.normalized.notes=r.map(o=>u[o]),e}function vn(e){return e.normalized.rootNote=Xt[e.input.rootNote],e.input.bassNote&&(e.normalized.bassNote=Xt[e.input.bassNote]),e}var pr=$(Xc()),lf=$($p()),cf=$(Tn()),En=$(of());function ft(e){let t=(0,pr.default)(e.normalized.intervals),r={quality:"",isSuspended:!1,extensions:[],alterations:[],adds:[],omits:[]};if(iw(t))r.quality=g.power;else if(aw(t))r.quality=g.bass;else{let n=ow(t,e.normalized.intents.major),i=sw(t,e.normalized.intents.major),{qualityIntervals:a,quality:s}=uw(t,e,i,n),u=hw(t,s),o=["1",...a,...u],{adds:c,alterations:p}=yw(t,o,s);r={...r,quality:s,isSuspended:i,extensions:u,alterations:p,adds:c,omits:n}}return{...e,normalized:{...e.normalized,...r}}}function iw(e){return ye(e,["1","5"])}function aw(e){return ye(e,["1"])}function sw(e,t){return e.includes("4")||e.includes("11")&&t&&!e.includes("3")}function ow(e,t){let r=[];return(Y(e,["b3","3","4","11"])||!t&&Y(e,["b3","4"]))&&r.push(t?"3":"b3"),Y(e,["b5","5","#5","b13"])&&r.push("5"),r}function uw(e,t,r,n){let i=lw(e,t,r,n),a=[{qualityIntervals:["b3"],quality:g.mi},{qualityIntervals:["b3","6"],quality:g.mi6},{qualityIntervals:["b3","7"],quality:g.miMa7},{qualityIntervals:["b3","b7"],quality:g.mi7},{qualityIntervals:["3"],quality:g.ma},{qualityIntervals:["3","6"],quality:g.ma6},{qualityIntervals:["3","7"],quality:g.ma7},{qualityIntervals:["3","b7"],quality:g.dom7},{qualityIntervals:["3","#5"],quality:g.aug},{qualityIntervals:["b3","b5"],quality:g.dim},{qualityIntervals:["b3","b5","bb7"],quality:g.dim7}].sort((s,u)=>u.qualityIntervals.length-s.qualityIntervals.length);return(0,lf.default)(a,s=>lt(i,s.qualityIntervals))}function lw(e,t,r,n){let i=[cw.bind(null,n),pw.bind(null,r,t.normalized.intents.major),fw.bind(null,t.normalized.intents.alt),cf.default];return Q(i,(0,pr.default)(e))}function cw(e,t){let r=(0,pr.default)(t);return e.includes("3")?r.push("3"):e.includes("b3")&&r.push("b3"),r}function pw(e,t,r){if(e){let n=(0,En.default)(r,"4");return n.push(t?"3":"b3"),n}return r}function fw(e,t){if(e){let r=(0,En.default)(t,"b5","#5");return r.push("5"),r}return t}function hw(e,t){let r=[];return mw(t)&&(dw(e,t)?r.push("9","11","13"):gw(e,t)?r.push("9","13"):bw(e)?r.push("9","11"):vw(e)&&r.push("9")),r}function mw(e){return[g.ma7,g.dom7,g.mi7,g.miMa7].includes(e)}function pf(e){return[g.mi7,g.miMa7].includes(e)}function dw(e,t){return pf(t)&&C(e,"13")&&C(e,["11","#11"])&&C(e,["b9","9","#9"])}function gw(e,t){return!pf(t)&&C(e,"13")&&C(e,["b9","9","#9"])}function bw(e){return C(e,"11")&&C(e,["b9","9","#9"])}function vw(e){return e.includes("9")}function yw(e,t,r){let n=[],i=[];return e.filter(a=>a!=="5"&&a!=="4").forEach(a=>{t.includes(a)||(_w(r,a)?i.push(a):n.push(a))}),qw(e)&&n.push("3"),{adds:uf(n),alterations:uf(i)}}function _w(e,t){return{[g.ma]:["b5","#5","#11","b13"],[g.ma6]:["b5","#5","#11","b13"],[g.ma7]:["b5","#5","#11","b13"],[g.dom7]:["b5","#5","b9","#9","#11","b13"],[g.mi]:["b5","#5","#11","b13"],[g.mi6]:["b5","#5","#11","b13"],[g.mi7]:["b5","#5","#11","b13"],[g.miMa7]:["b5","#5","#11","b13"],[g.aug]:[],[g.dim]:[],[g.dim7]:[]}[e].includes(t)}function qw(e){return lt(e,["3","4"])}function uf(e){return e.sort((t,r)=>{let n=Number.parseInt(t.replace(/[b#]/,"")),i=Number.parseInt(r.replace(/[b#]/,""));return n-i})}function jn(e,t){let{symbol:r}=t.input,n=e.join("|"),i=new RegExp("^("+n+")(.*?)(/("+n+"))?$"),a=r.match(i);if(a&&a[1])return t.input.rootNote=a[1],a[2]&&(t.input.descriptor=a[2]),a[4]&&(t.input.bassNote=a[4]),t;throw new Me(t)}var df=$(Tn());var m={ma:"ma",mi:"mi",dim:"dim",halfDim:"halfDim",aug:"aug",seventh:"seventh",sus:"sus",sus2:"sus2",ninth:"ninth",eleventh:"eleventh",thirteenth:"thirteenth",fifthFlat:"b5",fifthSharp:"#5",ninthFlat:"b9",ninthSharp:"#9",eleventhSharp:"#11",thirteenthFlat:"b13",add3:"add3",add4:"add4",addb6:"addb6",add6:"add6",add69:"add69",add7:"add7",add9:"add9",add11:"add11",add13:"add13",bass:"bass",omit3:"omit3",omit5:"omit5",power:"power",alt:"alt"},Fn={"^":[m.ma,m.add7],\u0394:[m.ma,m.add7],M:m.ma,Ma:m.ma,Maj:m.ma,Major:m.ma,ma:m.ma,maj:m.ma,major:m.ma},Sw=ff(Fn,m.add7,e=>e+"7"),xw=ff(Fn,m.add7,e=>"add"+e+"7"),Dn={...Fn,...Sw,"-":m.mi,m:m.mi,Mi:m.mi,Min:m.mi,Minor:m.mi,mi:m.mi,min:m.mi,minor:m.mi,"\xB0":m.dim,o:m.dim,0:m.dim,dim:m.dim,"dim.":m.dim,diminished:m.dim,\u00D8:m.halfDim,\u00F8:m.halfDim,h:m.halfDim,"+":m.aug,aug:m.aug,augmented:m.aug,7:m.seventh,4:m.sus,sus:m.sus,sus4:m.sus,suspended:m.sus,suspended4:m.sus,sus2:m.sus2,suspended2:m.sus2,9:m.ninth,11:m.eleventh,13:m.thirteenth,b3:m.mi,b5:m.fifthFlat,"\u266D5":m.fifthFlat,"#5":m.fifthSharp,"\u266F5":m.fifthSharp,b9:m.ninthFlat,"\u266D9":m.ninthFlat,addb9:m.ninthFlat,"add\u266D9":m.ninthFlat,"#9":m.ninthSharp,"\u266F9":m.ninthSharp,"add#9":m.ninthSharp,"add\u266F9":m.ninthSharp,"#11":m.eleventhSharp,"\u266F11":m.eleventhSharp,"add#11":m.eleventhSharp,b13:m.thirteenthFlat,"\u266D13":m.thirteenthFlat,addb13:m.thirteenthFlat,"add\u266D13":m.thirteenthFlat,...xw,2:m.add9,add2:m.add9,add3:m.add3,add4:m.add4,addb6:m.addb6,b6:m.addb6,6:m.add6,add6:m.add6,"6/9":m.add69,69:m.add69,96:m.add69,"9/6":m.add69,add9:m.add9,add11:m.add11,add13:m.add13,bass:m.bass,omit3:m.omit3,no3:m.omit3,omit5:m.omit5,no5:m.omit5,5:m.power,alt:m.alt,"alt.":m.alt,altered:m.alt};function ff(e,t,r){return Object.keys(e).map(r).reduce((n,i)=>(n[i]=t,n),{})}var hf=Object.keys(Dn).sort((e,t)=>t.length-e.length);var b=m;var Le={1:0,2:2,b3:3,3:4,4:5,b5:6,5:7,"#5":8,b6:8,6:9,bb7:9,b7:10,7:11,b9:13,9:14,"#9":15,11:17,"#11":18,b13:20,13:21};function Pn(e,t){let r=[];return t.input.parsableDescriptor&&(r=Aw(t)),t.input.modifiers=r,t.normalized.intervals=ww(r,e),t.normalized.semitones=Nw(t.normalized.intervals),t.normalized.intents=Rw(r),t}function Aw(e){let{parsableDescriptor:t}=e.input,r=[],n=new RegExp(hf.map(Pw).join("|"),"g"),i=t.match(n),a=t,s;if(i&&i.forEach(u=>{s=Dn[u],Array.isArray(s)||(s=[s]),s.forEach(o=>{r.includes(o)||(r.push(o),a=a.replace(u,""))})}),r.length===0)throw new Me(e);if(a.trim().length>0)throw new Zt(e,a);return r}function ww(e,t){return e.includes(b.power)?["1","5"]:e.includes(b.bass)?["1"]:(0,df.default)(["1",...Tw(e),...Iw(e),...Ow(e,t),...Cw(e),...Ew(e),...jw(e,t),...Fw(e,t),...Dw(e,t)]).sort((r,n)=>Le[r]-Le[n])}function Tw(e){let t=[];return e.includes(b.omit3)?[]:(C(e,[b.sus,b.sus2])||(Nn(e)?e.includes(b.eleventh)||t.push("3"):t.push("b3")),e.includes(b.add3)&&t.push("3"),t)}function Iw(e){let t=[];return C(e,[b.sus,b.add4])&&t.push("4"),t}function Ow(e,t){let r=[];return e.includes(b.omit5)?[]:((C(e,[b.dim,b.halfDim,b.fifthFlat])||$e(e,t,"b5"))&&r.push("b5"),(C(e,[b.aug,b.fifthSharp])||$e(e,t,"#5"))&&r.push("#5"),!r.length&&!e.includes(b.thirteenthFlat)&&r.push("5"),r)}function Cw(e){let t=[];return C(e,[b.addb6])&&t.push("b6"),C(e,[b.add6,b.add69])&&!gf(e)&&!C(e,[b.halfDim])&&t.push("6"),t}function Ew(e){let t=[];return C(e,[b.alt])&&t.push("b7"),C(e,[b.seventh,b.halfDim])?e.includes(b.dim)?t.push("bb7"):e.includes(b.halfDim)?t.push("b7"):t.push(mf(e)):C(e,[b.ninth,b.eleventh,b.thirteenth])&&t.push(mf(e)),e.includes(b.add7)&&t.push("7"),t}function mf(e){return e.includes(b.ma)?"7":"b7"}function jw(e,t){let r=[];return C(e,[b.add69,b.ninth,b.eleventh,b.thirteenth])&&Y(e,[b.ninthFlat,b.ninthSharp])&&r.push("9"),C(e,[b.sus2,b.add9])&&r.push("9"),(C(e,[b.ninthFlat])||$e(e,t,"b9"))&&r.push("b9"),(C(e,[b.ninthSharp])||$e(e,t,"#9"))&&r.push("#9"),r}function Fw(e,t){let r=[];return(C(e,[b.thirteenth])&&!Nn(e)||C(e,[b.eleventh,b.add11]))&&r.push("11"),(C(e,[b.eleventhSharp])||$e(e,t,"#11"))&&r.push("#11"),r}function Dw(e,t){let r=[];return(C(e,[b.add13,b.thirteenth])||C(e,[b.add6,b.add69])&&gf(e)||C(e,[b.add6,b.add69])&&C(e,[b.halfDim]))&&r.push("13"),(C(e,[b.thirteenthFlat])||$e(e,t,"b13"))&&r.push("b13"),r}function $e(e,t,r){return e.includes(b.alt)&&t.includes(r)}function Nn(e){return Y(e,[b.mi,b.dim,b.dim7,b.halfDim])}function gf(e){return C(e,[b.seventh,b.ninth,b.eleventh,b.thirteenth])}function Pw(e){return e.replace(/[.\-*+?^${}()|[\]\\]/g,"\\$&")}function Nw(e){return e.map(t=>Le[t]).sort((t,r)=>t-r)}function Rw(e){return{major:Nn(e),eleventh:e.includes(b.eleventh),alt:e.includes(b.alt)}}function Mw(e={}){let t=["b5","#5","b9","#9","#11","b13"],r=["english","german","latin"],{notationSystems:n=(0,fr.default)(r),altIntervals:i=(0,fr.default)(t),customFilters:a=[],key:s=""}=e;return zw(i,t),Lw(n,r),Kt(a),$w(s),u;function u(o){let c=[];if(!Gw(o)){let S=new Yt;c.push(Rn(S))}let p=(0,fr.default)(oc).filter(S=>n.includes(S.name)),f,v,q;if(!c.length)for(;p.length&&!f;){q=p.shift(),v=[bn.bind(null,e),jn.bind(null,q.notes),gn,Pn.bind(null,i),mn,vn,ft,pt,ct,_e,dn.bind(null,s),...a];try{f=Q(v,o),f?f.input.notationSystem=q.name:c.push(Bw(q.name))}catch(S){c.push(Rn(S,q.name))}}return f||{error:c}}}function zw(e,t){vf("altIntervals",e,t,!0)}function Lw(e,t){vf("notationSystems",e,t)}function vf(e,t,r,n){if(!Array.isArray(t))throw new TypeError(`'${e}' should be an array`);if(!n&&t.length===0)throw new TypeError(`'${e}' cannot be empty`);t.forEach(i=>{if(!r.includes(i))throw new TypeError(`'${i}' is not a valid value for ${e}`)})}function $w(e){if(e!==""&&(!(0,bf.default)(e)||!lc.includes(e)))throw new TypeError(`'${e}' is not a valid value for key`)}function Gw(e){return typeof e=="string"&&e.length>0}function Bw(e){let t=new Qt;return Rn(t,e)}function Rn(e,t){return{type:e.name,chord:e.chord,message:e.message,notationSystem:t}}var ht=Mw;var Tf=$(it());var re={sus2:"sus2",add2:"2",omit:"no",ma:"M",mi:"m",dim:"\xB0",aug7:"7+",eleventh:"11"};function Mn(e){let t,r=e.formatted.chordChanges;return Uw(e)?(t=re.sus2,r=[]):kw(e)?(t=re.add2,r=[]):Kw(e)?(t=re.aug7,r=[]):(t=e.formatted.descriptor.replace("mi",re.mi).replace(/[m|M]a/,re.ma).replace("dim",re.dim),Hw(e)&&(t=t.replace(/7sus|9sus/,re.eleventh))),r=r.map(n=>n.replace(/[m|M]a/,re.ma).replace("omit",re.omit)),{...e,formatted:{...e.formatted,descriptor:t,chordChanges:r}}}function Uw(e){return ye(e.normalized.intervals,["1","5","9"])}function kw(e){return ye(e.normalized.intervals,["1","3","5","9"])}function Kw(e){return ye(e.normalized.intervals,["1","3","#5","b7"])}function Hw(e){return e.normalized.intents.eleventh}var Sf=$(qf());function zn(e="none",t){if(e==="none")return t;let r={max:["4","b5","#5","6","bb7","b7","7","b9","9","#9","11","#11","b13","13"],core:["4","b9","9","#9","11","#11","b13","13"]},n=(0,Sf.default)(t.normalized.intervals,r[e]);return Y(n,["b3","3"])&&n.push(t.normalized.intents.major?"3":"b3"),Y(n,["b5","5","#5"])&&n.push("5"),t.normalized.intervals=n,t.normalized.semitones=n.map(a=>Le[a]),t.normalized.intents.eleventh=!1,t.normalized.intents.alt=!1,e==="max"&&delete t.normalized.bassNote,Q([ft,pt,_e],t)}function Ln(e,t,r){let{rootNote:n,bassNote:i}=r.normalized,a=Af(n);if(r.normalized.rootNote=xf(a,e,t),r.formatted.rootNote=r.normalized.rootNote,i){let s=Af(i);r.normalized.bassNote=xf(s,e,t),r.formatted.bassNote=r.normalized.bassNote}return _e(r)}function xf(e,t,r){let i=ue.indexOf(e)+t,a=Math.floor(i/12),s=i-a*12,u=ue[s];return r==="flat"&&un[u]||u}function Af(e){return ve[e]||e}var $n={german:{Ab:"As",A:"A","A#":"Ais",Bb:"Hes",B:"H",C:"C","C#":"Cis",Db:"Des",D:"D","D#":"Dis",Eb:"Es",E:"E",F:"F","F#":"Fis",Gb:"Ges",G:"G","G#":"Gis"},latin:{Ab:"Lab",A:"La","A#":"La#",Bb:"Sib",B:"Si",C:"Do","C#":"Do#",Db:"Reb",D:"Re","D#":"Re#",Eb:"Mib",E:"Mi",F:"Fa","F#":"Fa#",Gb:"Solb",G:"Sol","G#":"Sol#"}},Qw=Object.keys($n);function Gn(e="english",t){let r=e==="auto"?t.input.notationSystem:e;return r==="english"?t:Qw.includes(r)?(t.formatted.rootNote=$n[r][t.formatted.rootNote],t.formatted.bassNote&&(t.formatted.bassNote=$n[r][t.formatted.bassNote]),t):null}function mt(e){return e&&e.formatted&&e.formatted.symbol?e.formatted.symbol:null}var wf=$(it());function Bn(e){delete e.parserConfiguration.notationSystems;let t=(0,wf.default)(e),r=mt(e),i=ht(e.parserConfiguration)(r);return t.input=i.input,t}function Zw({accidental:e="original",customFilters:t=[],notationSystem:r="english",printer:n="text",simplify:i="none",transposeValue:a=0,useShortNamings:s=!1}={}){Kt(t);let u=[];return["max","core"].includes(i)&&u.push(zn.bind(null,i)),(e!=="original"||a!==0)&&u.push(Ln.bind(null,a,e)),s&&u.push(Mn),u.push(Gn.bind(null,r),ct,...t),o;function o(c){if(!Jw(c))return null;let p=Q(u,(0,Tf.default)(c));return n==="raw"?Bn(p):mt(p)}}var Jw=e=>e&&typeof e=="object"&&!e.error&&e.input,Un=Zw;var dt={name:"ireal-musicxml",version:"2.0.0",description:"iReal Pro to MusicXML converter.",author:"Karim Ratib <karim.ratib@gmail.com> (https://github.com/infojunkie)",license:"GPL-3.0-only",repository:{type:"git",url:"https://github.com/infojunkie/ireal-musicxml"},homepage:"https://github.com/infojunkie/ireal-musicxml",type:"module",main:"build/ireal-musicxml.js",types:"build/ireal-musicxml.d.ts",files:["LICENSE.txt","build/*"],scripts:{build:"esbuild src/lib/index.js --bundle --minify --sourcemap --outfile=build/ireal-musicxml.js && cp src/types/* build/",test:"npm run test:lint && npm run test:spec","test:spec":"node --test","test:typescript":"npm run build && ts-mocha test/**/*.spec.ts","test:lint":"eslint src --fix"},devDependencies:{"@xmldom/xmldom":"^0.8.0",esbuild:"0.24.0",eslint:"^9.13.0","sanitize-filename":"^1.6.3",typescript:"^4.3.2","validate-with-xmllint":"^1.2.0","xpath.js":"^1.1.0"},dependencies:{"chord-symbol":"^4.0.0","fast-diff":"^1.2.0",jstoxml:"^2.0.6",promise:"^8.1.0"}};var gt=class{static name=dt.name;static version=dt.version;static author=dt.author;static description=dt.description};var M=class{static Debug=0;static Info=1;static Warn=2;static Error=3;static None=4},If="4.0",Of=7,Cf=40,hr=class e{static defaultOptions={divisions:768,notation:"rhythmic",step:"B",octave:4,notehead:"slash",noteheadSize:"large",date:!0,clef:!1,keySignature:!1,pageWidth:210,pageHeight:297,pageMargin:15,logLevel:M.Warn};static sequenceAttributes=["divisions","key","time","staves","part-symbol","instruments","clef","staff-details","transpose","directive","measure-style"];static sequenceNote=["cue","pitch","rest","unpitched","duration","tie","voice","type","dot","accidental","time-modification","stem","notehead","notehead-text","staff","beam","notations","lyric","play"];static sequenceNotations=["accidental-mark","arpeggiate","articulations","dynamics","fermata","glissando","non-arpeggiate","ornaments","other-notation","slide","slur","technical","tied","tuplet"];static sequenceBarline=["bar-style","footnote","level","wavy-line","segno","coda","fermata","ending","repeat"];static mapAlter={"#":1,b:-1};static mapFifthsToAlters={sharp:["F","C","G","D","A","E","B"],flat:["B","E","A","D","G","C","F"]};static mapRepeats={"D.C. al Coda":e.prototype.convertDaCapo,"D.C. al Fine":e.prototype.convertDaCapo,"D.C. al 1st End.":e.prototype.convertDaCapo,"D.C. al 2nd End.":e.prototype.convertDaCapo,"D.C. al 3rd End.":e.prototype.convertDaCapo,"D.S. al Coda":e.prototype.convertDalSegno,"D.S. al Fine":e.prototype.convertDalSegno,"D.S. al 1st End.":e.prototype.convertDalSegno,"D.S. al 2nd End.":e.prototype.convertDalSegno,"D.S. al 3rd End.":e.prototype.convertDalSegno,Fine:e.prototype.convertFine,"3x":e.prototype.convertRepeatNx,"4x":e.prototype.convertRepeatNx,"5x":e.prototype.convertRepeatNx,"6x":e.prototype.convertRepeatNx,"7x":e.prototype.convertRepeatNx,"8x":e.prototype.convertRepeatNx};static convert(t,r={}){let n=Object.assign({},this.defaultOptions,r);return new e(t,n).convert()}constructor(t,r){this.song=t,this.options=r,this.time={beats:4,beatType:4},this.fifths=null,this.measure=null,this.barRepeat=0,this.codas=[],this.repeats=0,this.emptyCells=0,this.emptyCellNewSystem=!1,this.cellWidth=(this.options.pageWidth-2*this.options.pageMargin)/16,this.parseChord=ht({altIntervals:["b5","b9"]}),this.renderChord=Un({useShortNamings:!0,printer:"raw"})}convert(){return Ef.default.toXML(this.convertSong(),{header:`
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE score-partwise PUBLIC "-//Recordare//DTD MusicXML ${If} Partwise//EN" "http://www.musicxml.org/dtds/partwise.dtd">
      `.trim(),indent:"  "})}convertSong(){return{_name:"score-partwise",_attrs:{version:If},_content:[{work:{"work-title":this.song.title}},{identification:[{_name:"creator",_attrs:{type:"composer"},_content:this.song.composer},{encoding:[{software:`@infojunkie/ireal-musicxml ${gt.version}`},{...this.options.date&&{"encoding-date":e.convertDate(new Date)}},{_name:"supports",_attrs:{element:"accidental",type:"no"}},{_name:"supports",_attrs:{element:"transpose",type:"no"}},{_name:"supports",_attrs:{attribute:"new-page",element:"print",type:"yes",value:"yes"}},{_name:"supports",_attrs:{attribute:"new-system",element:"print",type:"yes",value:"yes"}}]}]},{defaults:{scaling:{millimeters:Of,tenths:Cf},"page-layout":{"page-height":e._mmToTenths(this.options.pageHeight),"page-width":e._mmToTenths(this.options.pageWidth),"page-margins":{"left-margin":e._mmToTenths(this.options.pageMargin,4),"right-margin":e._mmToTenths(this.options.pageMargin,4),"top-margin":e._mmToTenths(this.options.pageMargin,4),"bottom-margin":e._mmToTenths(this.options.pageMargin,4)}}}},{"part-list":{_name:"score-part",_attrs:{id:"P1"},_content:{_name:"part-name",_attrs:{"print-object":"no"},_content:"Lead Sheet"}}},{_name:"part",_attrs:{id:"P1"},_content:this.convertMeasures()}]}}static convertDate(t){return new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0]}static Measure=class{constructor(t){this.body={_name:"measure",_attrs:{number:t},_content:[]},this.attributes=[],this.chords=[],this.barlines=[],this.barEnding=null}number(){return this.body._attrs.number}assemble(){return this.attributes.length&&this.body._content.push({attributes:e.reorderSequence(this,this.attributes,e.sequenceAttributes)}),this.chords.forEach(t=>{this.body._content.push({harmony:t.harmony},...t.notes.map(r=>({note:r})))}),this.barlines[0]._content=e.reorderSequence(this,this.barlines[0]._content,e.sequenceBarline),this.body._content.splice(1,0,this.barlines[0]),this.barlines[1]._content=e.reorderSequence(this,this.barlines[1]._content,e.sequenceBarline),this.body._content.push(this.barlines[1]),this.body}};static Chord=class{constructor(t,r,n){this.harmony=t,this.notes=r,this.ireal=n,this.spaces=0,this.fermata=!1}};convertMeasures(){let t=i=>i>0&&i%16===0,r=this.song.cells.reduce((i,a,s)=>{if((a.bars.match(/\(|\{|\[/)||!this.measure&&(a.chord||a.annots.length||a.comments.length))&&(this.measure&&(this._log(M.Warn,"Starting a new measure over existing measure. Closing current measure first."),this.measure.barlines.push(this.convertBarline("","right")),this.adjustChordsDuration(this.measure)&&i.push(this.measure)),this.measure=new e.Measure(i.length+1,this.options),i.length||(this.measure.attributes.push({divisions:this.options.divisions},{_name:"clef",_attrs:[{"print-object":this.options.clef?"yes":"no"}],_content:[{sign:"G"},{line:2}]},{"staff-details":{"staff-lines":0}},{"measure-style":[{_name:"slash",_attrs:{type:"start","use-stems":this.options.notation==="rhythmic"?"yes":"no"}}]},this.convertKey()),this.song.bpm&&this.measure.body._content.push(this.convertTempo(this.song.bpm)),this.measure.body._content.push(this.convertStyleAndGroove(this.song.style,this.song.groove))),this.measure.barlines.push(this.convertBarline(a.bars,"left")),this.barRepeat&&(this.measure.chords=[...i[i.length-this.barRepeat-1].chords])),!this.measure)return(a.chord||a.annots.length||a.comments.length||a.bars&&a.bars!==")")&&this._log(M.Warn,`Found non-empty orphan cell ${JSON.stringify(a)}`,i[i.length-1]),this.emptyCells++,t(s)&&(this.emptyCellNewSystem=!0),i;if((t(s)||this.emptyCellNewSystem)&&this.measure.body._content.splice(0,0,{_name:"print",_attrs:{"new-system":"yes"},_content:{...this.emptyCellNewSystem&&{"system-layout":{"system-margins":[{"left-margin":e._mmToTenths(this.cellWidth*this.emptyCells)},{"right-margin":"0.00"}]}}}}),!this.emptyCellNewSystem&&this.emptyCells>0&&(this.measure.body._content[0]?._name==="print"&&this.measure.body._content[0]._attrs?.["new-system"]==="yes"?i[i.length-1].body._content.splice(0,0,{_name:"print",_content:{"system-layout":{"system-margins":[{"left-margin":"0.00"},{"right-margin":e._mmToTenths(this.cellWidth*this.emptyCells)}]}}}):this.measure.body._content.splice(0,0,{_name:"print",_content:{"measure-layout":{"measure-distance":e._mmToTenths(this.cellWidth*this.emptyCells)}}})),this.emptyCellNewSystem=!1,this.emptyCells=0,a.chord)switch(a.chord.note){case"x":{this.barRepeat=1,this.measure.chords=[...i[i.length-this.barRepeat].chords];break}case"r":{this.barRepeat=2,this.measure.chords=[...i[i.length-this.barRepeat].chords];break}case"p":if(this.measure.chords.length){this.measure.chords[this.measure.chords.length-1].spaces++;break}case"W":{let u=this.measure;if(u.chords.length||(u=i.slice().reverse().find(o=>o.chords.length),u||this._log(M.Error,`Cannot find any measure with chords prior to ${JSON.stringify(a.chord)}`)),u){let o=u.chords[u.chords.length-1].ireal;o.over=a.chord.over,o.alternate=a.chord.alternate,this.measure.chords.push(this.convertChord(o))}break}case" ":{this._log(M.Warn,`Unhandled empty/alternate chord ${JSON.stringify(a.chord)}`);break}default:this.measure.chords.push(this.convertChord(a.chord))}else this.barRepeat||this.measure.chords.length&&this.measure.chords[this.measure.chords.length-1].spaces++;return a.annots.forEach(u=>{switch(u[0]){case"*":{let o=u.slice(1);this.measure.body._content.push(this.convertSection(o));break}case"T":{let o=u.slice(1);this.measure.attributes.push(this.convertTime(o));break}case"S":{this.measure.body._content.push(this.convertSegno());break}case"N":{let o=parseInt(u.slice(1));if(o<1&&(o=i.slice().reverse().find(p=>!!p.barEnding)?.barEnding??1),this.measure.barlines[0]._content.push(this.convertEnding(o,"start")),o>1){i[i.length-1].barlines[1]._content.push(this.convertEnding(o-1,"stop"));let c=i.slice().reverse().find(p=>p.barEnding===o-1);if(!c)this._log(M.Error,`Cannot find ending ${o-1} in right barline of any measure`);else{let p=c.barlines[1]._content.findIndex(f=>!!f&&f._name==="ending");p===-1&&this._log(M.Error,`Cannot find ending ${o-1} in right barline`,c),delete c.barlines[1]._content[p]}}this.measure.barEnding=o;break}case"Q":{this.measure.body._content.push(this.convertToCoda()),this.codas.push(this.measure);break}case"l":case"s":break;case"f":{this.measure.chords[this.measure.chords.length-1].fermata=!0;break}case"U":{this.measure.body._content.push(this.convertFine("END"));break}default:this._log(M.Warn,`Unhandled annotation "${u}"`)}}),a.comments.map(u=>u.trim()).forEach(u=>{let o=this._map(e.mapRepeats,u);o?this.measure.body._content.push(o.call(this,u)):this.measure.body._content.push(this.convertComment(u))}),a.bars.match(/\)|\}|\]|Z/)&&this.measure.chords.length&&(this.measure.barlines.push(this.convertBarline(a.bars,"right")),this.measure.barEnding&&this.measure.barlines[1]._content.push(this.convertEnding(this.measure.barEnding,"discontinue")),this.adjustChordsDuration(this.measure)&&i.push(this.measure),this.measure=null,this.barRepeat&&this.barRepeat--),i},[]),n=this.song.cells.length%16-this.emptyCells;if(n>0&&r.length>0&&r[r.length-1].body._content.splice(0,0,{_name:"print",_content:{"system-layout":{"system-margins":[{"left-margin":"0.00"},{"right-margin":e._mmToTenths(this.cellWidth*n)}]}}}),this.codas.length){let i=this.codas[this.codas.length-1],a=i.body._content.findIndex(s=>s._name==="direction"&&Array.isArray(s._content)&&s._content.some(u=>u._name==="sound"&&Object.keys(u._attrs).includes("tocoda")));a===-1&&this._log(M.Warn,"Cannot find sound direction",i),i.body._content[a]=this.convertCoda()}return r.map(i=>i.assemble())}static reorderSequence(t,r,n){return r.filter(i=>Object.keys(i).length).sort((i,a)=>{let s=Object.keys(i)[0];s==="_name"&&(s=i[s]);let u=Object.keys(a)[0];u==="_name"&&(u=a[u]);let o=n.indexOf(s),c=n.indexOf(u);return o===-1&&this._log(M.Warn,`Unrecognized element "${s}"`,t),c===-1&&this._log(M.Warn,`Unrecognized element "${u}"`,t),o-c})}convertRepeatNx(t){let r=null;(r=t.match(/(\d+)x/))!==null&&(this.repeats=r[1])}convertFine(t){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:t}},{_name:"sound",_attrs:{fine:"yes"}}]}}convertDaCapo(t){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:t}},{_name:"sound",_attrs:{dacapo:"yes"}}]}}convertDalSegno(t){return{_name:"direction",_attrs:{placement:"below"},_content:[{"direction-type":{words:t}},{_name:"sound",_attrs:{dalsegno:"yes"}}]}}convertComment(t){return{_name:"direction",_attrs:{placement:t[0]==="*"?"above":"below"},_content:{"direction-type":{words:t[0]==="*"?t.slice(3):t}}}}convertEnding(t,r){return{_name:"ending",_attrs:{number:t,type:r},_content:`${t}.`}}convertBarline(t,r){let n="regular",i=null;return t.match(/\[|\]/)?n="light-light":t.match(/Z/)?n="light-heavy":t.match(/\{|\}/)&&(n=r==="left"?"heavy-light":"light-heavy",i=r==="left"?"forward":"backward"),i==="forward"&&(this.repeats=2),{_name:"barline",_attrs:{location:r},_content:[{"bar-style":n},{...i&&{_name:"repeat",_attrs:{direction:i,...i==="backward"&&{times:this.repeats}}}}]}}convertSection(t){return t==="i"&&(t="Intro"),{_name:"direction",_attrs:{placement:"above"},_content:{"direction-type":{rehearsal:t}}}}convertSegno(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"segno"}},{_name:"sound",_attrs:{segno:"segno"}}]}}convertCoda(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"coda"}},{_name:"sound",_attrs:{coda:"coda"}}]}}convertToCoda(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{words:"To Coda"}},{_name:"sound",_attrs:{tocoda:"coda"}}]}}convertTempo(t){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{_name:"metronome",_attrs:{parentheses:"no"},_content:[{"beat-unit":this.calculateChordDuration(1)[0].type},{"per-minute":t}]}]},{_name:"sound",_attrs:{tempo:t}}]}}convertTime(t){let r=parseInt(t[0]),n=parseInt(t[1]);return t==="12"&&(r=12,n=8),this.time={beats:r,beatType:n},{time:[{beats:r},{"beat-type":n}]}}adjustChordsDuration(t){if(t.chords.length>this.time.beats)return this._log(M.Error,`Too many chords (${t.chords.length} out of ${this.time.beats})`,t),!0;let r=t.chords.reduce((n,i)=>n+1+i.spaces,0);if(!r)return this._log(M.Warn,"No chord found. Skipping current measure.",t),!1;if(r>this.time.beats){let n=0;for(;r>this.time.beats;)t.chords[n].spaces>0&&(t.chords[n].spaces--,r--),n=(n+1)%t.chords.length}else{let n=0;for(;r<this.time.beats;)t.chords[n].spaces++,r++,n=(n+1)%t.chords.length}return t.chords=t.chords.map(n=>(n.notes=this.calculateChordDuration(1+n.spaces).map((i,a,s)=>this.convertChordNote(i,a===s.length-1?n.fermata:!1,this.options.notation==="rhythmic"&&s.length>1?a>0?"stop":"start":null)),n)),!0}calculateChordDuration(t){let r={1:[{t:"eighth",d:0,b:1}],2:[{t:"quarter",d:0,b:2}],3:[{t:"quarter",d:1,b:3}],4:[{t:"half",d:0,b:4}],5:[{t:"quarter",d:1,b:3},{t:"quarter",d:0,b:2}],6:[{t:"half",d:1,b:6}],7:[{t:"half",d:2,b:7}],8:[{t:"whole",d:0,b:8}],9:[{t:"half",d:1,b:6},{t:"quarter",d:1,b:3}],10:[{t:"half",d:1,b:6},{t:"half",d:0,b:4}],11:[{t:"half",d:2,b:7},{t:"half",d:0,b:4}],12:[{t:"whole",d:1,b:12}],13:[{t:"half",d:2,b:7},{t:"half",d:1,b:6}],14:[{t:"whole",d:2,b:14}],15:[{t:"whole",d:0,b:8},{t:"half",d:2,b:7}]};if(this.options.notation==="slash"){let n=8/this.time.beatType;return Array(t).fill(this._map(r,n,[],`Unexpected beat count 1 for time signature ${this.time.beats}/${this.time.beatType}`).map(i=>({duration:i.b*this.options.divisions/2,type:i.t,dots:i.d}))[0])}else{let n=t*8/this.time.beatType;return this._map(r,n,[],`Unexpected beat count ${t} for time signature ${this.time.beats}/${this.time.beatType}`).map(i=>({duration:i.b*this.options.divisions/2,type:i.t,dots:i.d}))}}convertChordNote(t,r=!1,n=null){let i=e.mapFifthsToAlters[this.fifths>=0?"sharp":"flat"].slice(0,Math.abs(this.fifths)),a={_name:"pitch",_content:[{step:this.options.step},{alter:i.includes(this.options.step)?this.fifths>0?1:-1:0},{octave:this.options.octave}]},s=[];return r&&s.push({_name:"fermata"}),n&&s.push({_name:"tied",_attrs:{type:n}}),e.reorderSequence(this.measure,[a,{_name:"cue"},{_name:"notehead",_content:this.options.notehead,_attrs:[{"font-size":this.options.noteheadSize}]},{duration:t.duration},{voice:1},{_name:"type",_attrs:{size:"full"},_content:t.type},{...s.length&&{notations:e.reorderSequence(this.measure,s,e.sequenceNotations)}}].concat(Array(t.dots).fill({_name:"dot"})),e.sequenceNote)}convertChordDegree(t,r,n){return{_name:"degree",_attrs:{"print-object":"no"},_content:[{"degree-value":t},{"degree-alter":n},{"degree-type":r}]}}convertChordSymbol(t){let r=this.renderChord(this.parseChord(`${t.note}${t.modifiers}`));if(!r)return this._log(M.Warn,`Unrecognized chord "${t.note}${t.modifiers}"`),{rootStep:null,rootAlter:null,chordKind:null,chordDegrees:[],chordText:null};let n=r.input.rootNote[0],i=this._map(e.mapAlter,r.input.rootNote[1]||null,null,`Unrecognized accidental in chord "${r.input.rootNote}"`),a=r.formatted.descriptor+r.formatted.chordChanges.join(""),s={major:"major",major6:"major-sixth",major7:"major-seventh",dominant7:"dominant",minor:"minor",minor6:"minor-sixth",minor7:"minor-seventh",minorMajor7:"major-minor",augmented:"augmented",diminished:"diminished",diminished7:"diminished-seventh",power:"power"},u=this._map(s,r.normalized.quality,"",`Unrecognized chord quality "${r.normalized.quality}"`);if(r.normalized.extensions.length){let c=Math.max(...r.normalized.extensions.map(f=>parseInt(f))).toString(),p={9:"-ninth",11:"-11th",13:"-13th"};u=u.split("-")[0]+this._map(p,c,"",`Unhandled extension ${c}`),u==="dominant-11th"&&(r.normalized.isSuspended=!1)}[{intervals:["1","4","5"],kind:"suspended-fourth",strict:!0},{intervals:["1","5","9"],kind:"suspended-second",strict:!0},{intervals:["1","b3","b5","b7"],kind:"half-diminished",strict:!0},{intervals:["1","3","#5","b7"],kind:"augmented-seventh",strict:!1}].some(c=>{if((!c.strict||r.normalized.intervals.length===c.intervals.length)&&c.intervals.every((p,f)=>p===r.normalized.intervals[f]))return u=c.kind,c.intervals.forEach(p=>{r.normalized.alterations=r.normalized.alterations.filter(f=>f===p),r.normalized.adds=r.normalized.adds.filter(f=>f===p),r.normalized.omits=r.normalized.omits.filter(f=>f===p)}),r.normalized.intervals.forEach(p=>{c.intervals.includes(p)||r.normalized.adds.push(p)}),!0});let o=[];return r.normalized.isSuspended&&!u.includes("suspended")&&(r.normalized.adds.push("4"),r.normalized.adds.includes("3")||r.normalized.omits.push("3")),r.normalized.alterations.forEach(c=>{let p=c.slice(1);o.push(this.convertChordDegree(p,p==="5"||r.normalized.extensions.includes(p)?"alter":"add",this._map(e.mapAlter,c[0],0,`Unrecognized alter symbol in "${c}"`)))}),r.normalized.adds.forEach(c=>{let p=Object.keys(e.mapAlter).includes(c[0])?c[0]:null,f=p?c.slice(1):c;o.push(this.convertChordDegree(f,"add",this._map(e.mapAlter,p,0,`Unrecognized alter symbol in "${c}"`)))}),r.normalized.omits.forEach(c=>{let p=Object.keys(e.mapAlter).includes(c[0])?c[0]:null,f=p?c.slice(1):c;o.push(this.convertChordDegree(f,"subtract",this._map(e.mapAlter,p,0,`Unrecognized alter symbol in "${c}"`)))}),{rootStep:n,rootAlter:i,chordKind:u,chordDegrees:o,chordText:a}}convertChord(t){let r=null;if(t.note==="n")r=[{root:[{_name:"root-step",_attrs:{text:""},_content:this.options.step}]},{_name:"kind",_attrs:{text:"N.C."},_content:"none"}];else{let{rootStep:n,rootAlter:i,chordKind:a,chordDegrees:s,chordText:u}=this.convertChordSymbol(t),o=t.over?[{"bass-step":t.over.note[0]},{...t.over.note[1]&&{"bass-alter":this._map(e.mapAlter,t.over.note[1],null,`Unrecognized accidental in bass note "${t.over.note}"`)}}]:null;r=[{root:[{"root-step":n},{...i&&{"root-alter":i}}]},{_name:"kind",_attrs:{text:u,"use-symbols":"no"},_content:a},{...o&&{bass:o}}].concat(s)}return t.alternate&&this._log(M.Warn,`Unhandled alternate chord ${JSON.stringify(t.alternate)}`),new e.Chord(r,this.calculateChordDuration(1).map(n=>this.convertChordNote(n)),t)}convertKey(){let t={C:0,G:1,D:2,A:3,E:4,B:5,"F#":6,"C#":7,F:-1,Bb:-2,Eb:-3,Ab:-4,Db:-5,Gb:-6,Cb:-7,"A-":0,"E-":1,"B-":2,"F#-":3,"C#-":4,"G#-":5,"D#-":6,"A#-":7,"D-":-1,"G-":-2,"C-":-3,"F-":-4,"Bb-":-5,"Eb-":-6,"Ab-":-7};return this.fifths=this._map(t,this.song.key,0,`Unrecognized key signature "${this.song.key}"`),{_name:"key",_attrs:[{"print-object":this.options.keySignature?"yes":"no"}],_content:[{fifths:this.fifths},{mode:this.song.key.slice(-1)==="-"?"minor":"major"}]}}convertStyleAndGroove(t,r){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{words:t}]},{sound:[{play:[{_name:"other-play",_attrs:{type:"groove"},_content:r||t}]}]}]}}_log(t,r,n=this.measure){if(t<this.options.logLevel)return;let i=`[ireal-musicxml] [${this.song.title}${n?"#"+n.number():""}] ${r}`,a="warn";switch(t){case M.Debug:a="debug";break;case M.Info:a="info";break;case M.Warn:a="warn";break;case M.Error:a="error";break}console[a](i)}_map(t,r,n,i,a=M.Warn,s=this.measure){return r?r in t?t[r]:(i&&this._log(a,i,s),n||null):n}static _mmToTenths(t,r=2){let n=t*Cf/Of,i=Math.pow(10,r);return Math.round(n*i)/i}};function tT(e,t={}){let r=new Tt(e);return r.songs.forEach(n=>{n.musicXml=hr.convert(n,t)}),r}async function Uj(e,t={}){return new jf.default(r=>r(tT(e,t)))}})();
//# sourceMappingURL=ireal-musicxml.js.map
