!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.iReal2MusicXML=e():t.iReal2MusicXML=e()}(this,(function(){return(()=>{var t={272:(t,e,n)=>{"use strict";var r=n(723),o=[],i=[],a=r.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function s(t){var e;(e=o.length?o.pop():new c).task=t,r(e)}function c(){this.task=null}t.exports=s,c.prototype.call=function(){try{this.task.call()}catch(t){s.onerror?s.onerror(t):(i.push(t),a())}finally{this.task=null,o[o.length]=this}}},723:(t,e,n)=>{"use strict";function r(t){i.length||o(),i[i.length]=t}t.exports=r;var o,i=[],a=0;function s(){for(;a<i.length;){var t=a;if(a+=1,i[t].call(),a>1024){for(var e=0,n=i.length-a;e<n;e++)i[e]=i[e+a];i.length-=a,a=0}}i.length=0,a=0}var c,u,l,d=void 0!==n.g?n.g:self,h=d.MutationObserver||d.WebKitMutationObserver;function f(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof h?(c=1,u=new h(s),l=document.createTextNode(""),u.observe(l,{characterData:!0}),o=function(){c=-c,l.data=c}):o=f(s),r.requestFlush=o,r.makeRequestCallFromTimer=f},875:(t,e,n)=>{"use strict";n.r(e),n.d(e,{convert:()=>O,convertSync:()=>j});var r=n(259),o=n.n(r);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function t(e){s(this,t);var n=/.*?irealb:\/\/([^"]*)/.exec(e),r=decodeURIComponent(n[1]).split("===");r.length>1&&(this.name=r.pop()),this.songs=r.map((function(t){return new d(t)}))},u=function t(){s(this,t),this.annots=[],this.comments=[],this.bars="",this.spacer=0,this.chord=null},l=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,t),this.note=e,this.modifiers=n,this.over=r,this.alternate=o},d=function(){function t(e){if(s(this,t),this.cells=[],!e)return this.title="",this.composer="",this.style="",this.key="",this.transpose=0,this.groove="",this.bpm=0,this.repeats=0,void(this.music="");var n=e.split("=");this.title=this.parseTitle(n[0].trim()),this.composer=this.parseComposer(n[1].trim()),this.style=n[3].trim(),this.key=n[4],this.transpose=+n[5]||0,this.groove=n[7],this.bpm=+n[8],this.repeats=+n[9]||3;var r=n[6].split("1r34LbKcu7");this.music=this.unscramble(r[1]),this.cells=this.parse()}var e,n;return e=t,(n=[{key:"parse",value:function(){for(var e=this.music.trim(),n=[];e;){for(var r=!1,o=0;o<t.regExps.length;o++){var i=t.regExps[o].exec(e);if(i){r=!0,i.length<=2?(n.push(i[0]),e=e.substr(i[0].length)):(n.push(i),e=e.substr(i[0].length));break}}r||(","!==e[0]&&n.push(e[0]),e=e.substr(1))}for(var a=[],s=this.newCell(a),c=null,u=0;u<n.length;u++){var d=n[u];switch(d instanceof Array&&(s.chord=this.parseChord(d),d=" "),d[0]){case"{":case"[":s.bars=d,d=null;break;case"|":c&&(c.bars+=")",c=null),s.bars="(",d=null;break;case"]":case"}":case"Z":c&&(c.bars+=d,c=null),d=null;break;case"n":s.chord=new l(d[0]);break;case",":d=null;break;case"S":case"T":case"Q":case"N":case"U":case"s":case"l":case"f":case"*":s.annots.push(d),d=null;break;case"Y":s.spacer++,d=null,c=null;break;case"r":case"x":case"W":s.chord=new l(d);break;case"<":d=d.substr(1,d.length-2),s.comments.push(d),d=null}d&&u<n.length-1&&(c=s,s=this.newCell(a))}return a}},{key:"parseTitle",value:function(t){return t.replace(/(.*)(, )(A|The)$/g,"$3 $1")}},{key:"parseComposer",value:function(t){var e=t.split(/(\s+)/);return 3==e.length?e[2]+e[1]+e[0]:t}},{key:"parseChord",value:function(e){var n=e[1]||" ",r=e[2]||"",o=e[3]||"";o&&(r+=o.substr(1,o.length-2));var i=e[4]||"";"/"===i[0]&&(i=i.substr(1));var a=e[5]||null;if(a&&(e=t.chordRegex.exec(a.substr(1,a.length-2)),a=e?this.parseChord(e):null)," "===n&&!a&&!i)return null;if(i){var s="#"===i[1]||"b"===i[1]?2:1;i=new l(i.substr(0,s),i.substr(s),null,null)}else i=null;return new l(n,r,i,a)}},{key:"newCell",value:function(t){var e=new u;return t.push(e),e}},{key:"unscramble",value:function(t){for(var e,n="";t.length>51;)e=t.substring(0,50),t=t.substring(50),n+=this.obfusc50(e);return(n+=t).replace(/Kcl/g,"| x").replace(/LZ/g," |").replace(/XyQ/g,"   ")}},{key:"obfusc50",value:function(t){for(var e=t.split(""),n=0;n<5;n++)e[49-n]=t[n],e[n]=t[49-n];for(var r=10;r<24;r++)e[49-r]=t[r],e[r]=t[49-r];return e.join("")}}])&&i(e.prototype,n),t}();a(d,"chordRegex",/^([A-G][b#]?)((?:sus|alt|add|[+\-^\dhob#])*)(\*.+?\*)*(\/[A-G][#b]?)?(\(.*?\))?/),a(d,"chordRegex2",/^([ Wp])()()(\/[A-G][#b]?)?(\(.*?\))?/),a(d,"regExps",[/^\*[a-zA-Z]/,/^T\d\d/,/^N./,/^<.*?>/,d.chordRegex,d.chordRegex2]);var h=n(308);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function(){function t(e,n){y(this,t),this.song=e,this.options=n,this.time={beats:4,type:4},this.fifths=null,this.measure=null,this.barRepeat=0,this.codas=[],this.musicXml=(0,h.toXML)(this.convert(),{header:'\n<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE score-partwise PUBLIC "-//Recordare//DTD MusicXML 3.1 Partwise//EN" "http://www.musicxml.org/dtds/partwise.dtd">\n      '.trim(),indent:"  "})}return b(t,null,[{key:"convert",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},this.defaultOptions,n);return new t(e,r).musicXml}}]),b(t,[{key:"convert",value:function(){return{"score-partwise":[{"movement-title":this.song.title},{identification:[{_name:"creator",_attrs:{type:"composer"},_content:this.song.composer},{_name:"creator",_attrs:{type:"lyricist"},_content:this.song.style+(this.song.groove?" (".concat(this.song.groove,")"):"")},{encoding:[{software:"@infojunkie/ireal-musicxml"},{"encoding-date":t.convertDate(new Date)},{_name:"supports",_attrs:{element:"accidental",type:"no"}},{_name:"supports",_attrs:{element:"transpose",type:"no"}},{_name:"supports",_attrs:{attribute:"new-page",element:"print",type:"yes",value:"yes"}},{_name:"supports",_attrs:{attribute:"new-system",element:"print",type:"yes",value:"yes"}}]}]},{"part-list":{_name:"score-part",_attrs:{id:"P1"},_content:{_name:"part-name",_attrs:{"print-object":"no"},_content:"Lead sheet"}}},{_name:"part",_attrs:{id:"P1"},_content:this.convertMeasures()}]}}},{key:"convertMeasures",value:function(){var e=this,n=this.song.cells.reduce((function(n,r,o){if((r.bars.match(/\(|\{|\[/)||!e.measure&&(r.chord||r.annots.length||r.comments.length))&&(e.measure&&console.log("[MusicXML.convertMeasures] Starting a new measure over existing measure ".concat(JSON.stringify(e.measure))),e.measure=new t.Measure(n.length+1),n.length||(e.measure.attributes.push({divisions:e.options.divisions},{clef:[{sign:"G"},{line:2}]},{"measure-style":[{_name:"slash",_attrs:{type:"start","use-stems":"no"}}]},e.convertKey()),e.song.bpm&&e.measure.body._content.push(e.convertTempo(e.song.bpm))),e.measure.barlines.push(e.convertBarline(r.bars,"left")),e.barRepeat&&(e.measure.chords=m(n[n.length-e.barRepeat-1].chords))),!e.measure)return(r.chord||r.annots.length||r.comments.length||r.bars)&&console.log("[MusicXML.convertMeasures] Found non-empty orphan cell ".concat(JSON.stringify(r),".")),n;if(o%16==0&&e.measure.body._content.splice(0,0,{_name:"print",_attrs:{"new-system":"yes"}}),r.chord)switch(r.chord.note){case"x":e.barRepeat=1,e.measure.chords=m(n[n.length-e.barRepeat].chords);break;case"r":e.barRepeat=2,e.measure.chords=m(n[n.length-e.barRepeat].chords);break;case"p":if(e.measure.chords.length){e.measure.chords[e.measure.chords.length-1].spaces++;break}case"W":var i=e.measure;i.chords.length||(i=n.slice().reverse().find((function(t){return t.chords.length})))||console.error("[MusicXML.convertMeasures] Cannot find any measure with chords prior to ".concat(r.chord));var a=i.chords[i.chords.length-1].ireal;a.over=r.chord.over,a.alternate=r.chord.alternate,e.measure.chords.push(e.convertChord(a));break;case" ":console.warn("[MusicXML.convertMeasures] Unhandled empty/alternate chord ".concat(JSON.stringify(r.chord)));break;default:e.measure.chords.push(e.convertChord(r.chord))}else e.barRepeat||e.measure.chords.length&&e.measure.chords[e.measure.chords.length-1].spaces++;return r.annots.forEach((function(t){switch(t[0]){case"*":var r=t.slice(1);e.measure.body._content.push(e.convertSection(r));break;case"T":var o=t.slice(1);e.measure.attributes.push(e.convertTime(o));break;case"S":e.measure.body._content.push(e.convertSegno());break;case"N":var i=parseInt(t.slice(1));if(e.measure.barlines[0]._content.push(e.convertEnding(i,"start")),i>1){n[n.length-1].barlines[1]._content.push(e.convertEnding(i-1,"stop"));var a=n.slice().reverse().find((function(t){return t.barEnding===i-1}));a||console.error("[MusicXML.convertMeasures] Cannot find ending ".concat(i-1," in right barline of any measure"));var s=a.barlines[1]._content.findIndex((function(t){return"ending"===t._name}));-1===s&&console.error("[MusicXML.convertMeasures] Cannot find ending ".concat(i-1," in right barline of measure ").concat(a.number())),delete a.barlines[1]._content[s]}e.measure.barEnding=i;break;case"Q":e.measure.body._content.push(e.convertToCoda()),e.codas.push(e.measure);break;case"l":case"s":break;case"f":e.measure.chords[e.measure.chords.length-1].fermata=!0;break;default:console.warn('[MusicXML.convertMeasures] Unrecognized annotation "'.concat(t,'"'))}})),r.comments.map((function(t){return t.trim()})).forEach((function(n){t.mapRepeats.includes(n)?console.warn('[MusicXML.convertMeasures] Unhandled repeat directive "'.concat(n,'"')):e.measure.body._content.push(e.convertComment(n))})),r.bars.match(/\)|\}|\]|Z/)&&(e.measure.barlines.push(e.convertBarline(r.bars,"right")),e.measure.barEnding&&e.measure.barlines[1]._content.push(e.convertEnding(e.measure.barEnding,"discontinue")),e.adjustChordsDuration(e.measure),n.push(e.measure),e.measure=null,e.barRepeat&&e.barRepeat--),n}),[]);if(this.codas.length){var r=this.codas[this.codas.length-1],o=r.body._content.findIndex((function(t){return"direction"===t._name&&Array.isArray(t._content)&&t._content.some((function(t){return"sound"===t._name&&Object.keys(t._attrs).includes("tocoda")}))}));-1===o&&console.warn("[MusicXML.convertMeasures] Cannot find sound direction in measure ".concat(r.number())),r.body._content[o]=this.convertCoda()}return n.map((function(t){return t.assemble()}))}},{key:"convertComment",value:function(t){var e="*"===t[0]?t.slice(3):t;return{_name:"direction",_attrs:{placement:"*"===t[0]?"above":"below"},_content:{"direction-type":{words:e}}}}},{key:"convertEnding",value:function(t,e){return{_name:"ending",_attrs:{number:t,type:e},_content:"".concat(t,".")}}},{key:"convertBarline",value:function(t,e){var n="left"===e?"none":"regular",r=null;return t.match(/\[|\]/)?n="light-light":t.match(/Z/)?n="light-heavy":t.match(/\{|\}/)&&(n="left"===e?"heavy-light":"light-heavy",r="left"===e?"forward":"backward"),{_name:"barline",_attrs:{location:e},_content:[{"bar-style":n},p({},r&&{_name:"repeat",_attrs:{direction:r,times:2}})]}}},{key:"convertSection",value:function(t){return"i"===t&&(t="Intro"),{_name:"direction",_attrs:{placement:"above"},_content:{"direction-type":{rehearsal:t}}}}},{key:"convertSegno",value:function(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"segno"}},{_name:"sound",_attrs:{segno:"segno"}}]}}},{key:"convertCoda",value:function(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{_name:"coda"}},{_name:"sound",_attrs:{coda:"coda"}}]}}},{key:"convertToCoda",value:function(){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":{words:"To Coda"}},{_name:"sound",_attrs:{tocoda:"coda"}}]}}},{key:"convertTempo",value:function(t){return{_name:"direction",_attrs:{placement:"above"},_content:[{"direction-type":[{_name:"metronome",_attrs:{parentheses:"no"},_content:[{"beat-unit":this.calculateChordDuration(1).type},{"per-minute":t}]}]},{_name:"sound",_attrs:{tempo:t}}]}}},{key:"convertTime",value:function(t){var e=parseInt(t[0]),n=parseInt(t[1]);return"12"===t&&(e=12,n=8),this.time={beats:e,type:n},{time:[{beats:e},{"beat-type":n}]}}},{key:"adjustChordsDuration",value:function(t){var e=this;if(t.chords.length>this.time.beats)console.error("[MusicXML.adjustChordDuration] Too many chords (".concat(t.chords.length," out of ").concat(this.time.beats,") in measure ").concat(t.number(),". Aborting."));else{var n=t.chords.reduce((function(t,e){return t+1+e.spaces}),0);if(n>this.time.beats){console.warn("[MusicXML.adjustChordDuration] Too many beats (".concat(n," out of ").concat(this.time.beats,") in measure ").concat(t.number(),". Removing some spaces..."));for(var r=0;n>this.time.beats;)t.chords[r].spaces>0&&(t.chords[r].spaces--,n--),r=(r+1)%t.chords.length}else for(var o=0;n<this.time.beats;)t.chords[o].spaces++,n++,o=(o+1)%t.chords.length;t.chords=t.chords.map((function(t){var n=e.calculateChordDuration(1+t.spaces),r=n.duration,o=n.type,i=n.dots;return t.note=e.convertChordNote(r,o,i,t.fermata),t}))}}},{key:"calculateChordDuration",value:function(t){var e={1:{t:"eighth",d:0},2:{t:"quarter",d:0},3:{t:"quarter",d:1},4:{t:"half",d:0},5:{t:null,d:null},6:{t:"half",d:1},7:{t:"half",d:2},8:{t:"whole",d:0},9:{t:null,d:null},10:{t:null,d:null},11:{t:null,d:null},12:{t:"whole",d:1}},n=8*t/this.time.type;t===this.time.beats&&(n=8),n in e||console.warn("[MusicXML.calculateChordDuration] Unexpected beat count ".concat(t," for time signature ").concat(this.time.beats,"/").concat(this.time.type));var r=e[n].t;return r||console.warn("[MusicXML.calculateChordDuration] Unhandled beat count ".concat(t," for time signature ").concat(this.time.beats,"/").concat(this.time.type)),{duration:t*this.options.divisions,type:r,dots:e[n].d}}},{key:"convertChordNote",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="rest"===this.options.note.type?{_name:"rest"}:{_name:"pitch",_content:[{step:this.options.note.step},{alter:t.getMap(t.mapFifthsToAlters,this.fifths,[],'[MusicXML.convertChordNote] Unhandled fifths "'.concat(this.fifths,'"')).includes(this.options.note.step)?this.fifths>0?1:-1:0},{octave:this.options.note.octave}]};return t.reorderSequence([i,{notehead:this.options.note.notehead},{duration:e},{voice:1},{type:n},p({},o&&{notations:{_name:"fermata"}})].concat(Array(r).fill({_name:"dot"})),t.sequenceNote)}},{key:"convertChord",value:function(e){var n=null;if("n"===e.note)n=[{root:[{_name:"root-step",_attrs:{text:""},_content:this.options.note.step}]},{_name:"kind",_attrs:{text:"N.C."},_content:"none"}];else{var r=e.note[0],o=t.getMap(t.mapAlter,e.note[1],null,'[MusicXML.convertChord] Unrecognized accidental in chord "'.concat(e.note,'"')),i={"":{text:"",kind:"major"},"-":{text:"m",kind:"minor"},"-#5":{text:"m",kind:"minor",degrees:[{d:5,a:1,t:"alter"}]},"-b6":{text:"m",kind:"minor",degrees:[{d:6,a:-1,t:"add"}]},"+":{text:"+",kind:"augmented"},sus:{text:"sus4",kind:"suspended-fourth"},sus4:{text:"sus4",kind:"suspended-fourth"},2:{text:"sus2",kind:"suspended-second"},sus2:{text:"sus2",kind:"suspended-second"},o:{text:"o",kind:"diminished"},"^":{text:"△7",kind:"major-seventh"},"^7":{text:"△7",kind:"major-seventh"},"^7#5":{text:"△7",kind:"major-seventh",degrees:[{d:5,a:1,t:"alter"}]},"^7#11":{text:"△7",kind:"major-seventh",degrees:[{d:11,a:1,t:"add"}]},"-^7":{text:"m△7",kind:"major-minor"},"-7":{text:"m7",kind:"minor-seventh"},"-7b5":{text:"m7♭5",kind:"half-diminished"},h7:{text:"ø7",kind:"half-diminished"},h:{text:"ø7",kind:"half-diminished"},o7:{text:"o7",kind:"diminished-seventh"},7:{text:"7",kind:"dominant"},"7#5":{text:"7",kind:"dominant",degrees:[{d:5,a:1,t:"alter"}]},"7+":{text:"7",kind:"dominant",degrees:[{d:5,a:1,t:"alter"}]},"7b5":{text:"7",kind:"dominant",degrees:[{d:5,a:-1,t:"alter"}]},"7sus":{text:"7sus4",kind:"dominant",degrees:[{d:3,a:1,t:"alter"}]},"7b9":{text:"7",kind:"dominant",degrees:[{d:9,a:-1,t:"add"}]},"7b9b5":{text:"7",kind:"dominant",degrees:[{d:5,a:-1,t:"alter"},{d:9,a:-1,t:"add"}]},"7b9sus":{text:"7",kind:"dominant",degrees:[{d:7,a:-1,t:"add"},{d:9,a:-1,t:"add"}]},"7b9#5":{text:"7",kind:"dominant",degrees:[{d:5,a:1,t:"alter"},{d:9,a:-1,t:"add"}]},"7b9#9":{text:"7",kind:"dominant",degrees:[{d:9,a:-1,t:"add"},{d:9,a:1,t:"add"}]},"7b9b13":{text:"7",kind:"dominant",degrees:[{d:9,a:-1,t:"add"},{d:13,a:-1,t:"add"}]},"7b9#11":{text:"",kind:"dominant",degrees:[{d:9,a:-1,t:"add"},{d:11,a:1,t:"add"}]},"7#9":{text:"7",kind:"dominant",degrees:[{d:9,a:1,t:"add"}]},"7#9b5":{text:"7",kind:"dominant",degrees:[{d:5,a:-1,t:"alter"},{d:9,a:1,t:"add"}]},"7#9#5":{text:"7",kind:"dominant",degrees:[{d:5,a:1,t:"alter"},{d:9,a:1,t:"add"}]},"7#9#11":{text:"7",kind:"dominant",degrees:[{d:9,a:1,t:"alter"},{d:11,a:1,t:"add"}]},"7#11":{text:"7",kind:"dominant",degrees:[{d:11,a:1,t:"add"}]},"7alt":{text:"7alt",kind:"dominant",degrees:[{d:5,a:-1,t:"alter"},{d:5,a:1,t:"add"},{d:9,a:-1,t:"add"},{d:9,a:1,t:"add"},{d:11,a:1,t:"add"},{d:13,a:-1,t:"add"}]},"7b13":{text:"7",kind:"dominant",degrees:[{d:13,a:-1,t:"add"}]},6:{text:"6",kind:"major-sixth"},69:{text:"6/9",kind:"major-sixth",degrees:[{d:9,a:null,t:"add"}]},"-6":{text:"m6",kind:"minor-sixth"},"-69":{text:"m6/9",kind:"minor-sixth",degrees:[{d:9,a:null,t:"add"}]},"^9":{text:"△9",kind:"major-ninth"},"^9#11":{text:"△9",kind:"major-ninth",degrees:[{d:11,a:1,t:"add"}]},"-9":{text:"m9",kind:"minor-ninth"},"-^9":{text:"m△9",kind:"major-minor",degrees:[{d:9,a:null,t:"add"}]},9:{text:"9",kind:"dominant-ninth"},"9sus":{text:"9sus4",kind:"dominant-ninth",degrees:[{d:3,a:1,t:"alter"}]},"9#5":{text:"9",kind:"dominant-ninth",degrees:[{d:5,a:1,t:"alter"}]},"9b5":{text:"9",kind:"dominant-ninth",degrees:[{d:5,a:-1,t:"alter"}]},"9#11":{text:"9",kind:"dominant-ninth",degrees:[{d:11,a:1,t:"add"}]},"^11":{text:"△11",kind:"major-11th"},"-11":{text:"m11",kind:"minor-11th"},11:{text:"11",kind:"dominant-11th"},"^13":{text:"△13",kind:"major-13th"},"-13":{text:"m13",kind:"minor-13th"},13:{text:"13",kind:"dominant-13th"},"13sus":{text:"13sus4",kind:"dominant-13th",degrees:[{d:3,a:1,t:"alter"}]},"13b9":{text:"13",kind:"dominant-13th",degrees:[{d:9,a:-1,t:"alter"}]},"13#9":{text:"13",kind:"dominant-13th",degrees:[{d:9,a:1,t:"alter"}]},"13#11":{text:"13",kind:"dominant-13th",degrees:[{d:11,a:1,t:"alter"}]}},a=null,s=null,c=[];if(e.modifiers in i){var u=i[e.modifiers];s=u.text,a=u.kind,"degrees"in u&&(c=u.degrees.map((function(t){return{degree:[{"degree-value":t.d},{"degree-alter":t.a},{"degree-type":t.t}]}})))}else console.warn('[MusicXML.convertChord] Unrecognized chord modifiers "'.concat(e.modifiers,'"'));var l=e.over?[{"bass-step":e.over.note[0]},p({},e.over.note[1]&&{"bass-alter":t.getMap(t.mapAlter,e.over.note[1],null,'[MusicXML.convertChord] Unrecognized accidental in bass note "'.concat(e.over.note,'"'))})]:null;n=[{root:[{"root-step":r},p({},o&&{"root-alter":o})]},{_name:"kind",_attrs:{text:s},_content:a},p({},l&&{bass:l})].concat(c)}e.alternate&&console.warn("[MusicXML.convertChord] Unhandled alternate chord ".concat(JSON.stringify(e.alternate)));var d=this.calculateChordDuration(1),h=d.duration,f=d.type,m=d.dots;return{harmony:n,note:this.convertChordNote(h,f,m),ireal:e,spaces:0,fermata:!1}}},{key:"convertKey",value:function(){var t={C:0,G:1,D:2,A:3,E:4,B:5,"F#":6,"C#":7,F:-1,Bb:-2,Eb:-3,Ab:-4,Db:-5,Gb:-6,Cb:-7,"A-":0,"E-":1,"B-":2,"F#-":3,"C#-":4,"G#-":5,"D#-":6,"A#-":7,"D-":-1,"G-":-2,"C-":-3,"F-":-4,"Bb-":-5,"Eb-":-6,"Ab-":-7};return this.song.key in t?(this.fifths=t[this.song.key],{key:[{fifths:this.fifths},{mode:"-"===this.song.key.slice(-1)?"minor":"major"}]}):(console.warn('[MusicXML.convertKey] Unrecognized key signature "'.concat(this.song.key,'"')),null)}}],[{key:"convertDate",value:function(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T")[0]}},{key:"reorderSequence",value:function(t,e){return t.filter((function(t){return Object.keys(t).length})).sort((function(t,n){var r=Object.keys(t)[0];"_name"===r&&(r=t[r]);var o=Object.keys(n)[0];"_name"===o&&(o=n[o]);var i=e.indexOf(r),a=e.indexOf(o);return-1===i&&console.warn('[MusicXML.reorderSequence] Unrecognized element "'.concat(r,'"')),-1===a&&console.warn('[MusicXML.reorderSequence] Unrecognized element "'.concat(o,'"')),i-a}))}},{key:"getMap",value:function(t,e,n,r){return e?e in t?t[e]:(console.warn(r),n):n}}]),t}();function k(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){k(i,r,o,a,s,"next",t)}function s(t){k(i,r,o,a,s,"throw",t)}a(void 0)}))}}function j(t){var e=new c(t);return e.songs.forEach((function(t){t.musicXml=w.convert(t)})),e}function O(t){return M.apply(this,arguments)}function M(){return(M=x(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new(o())((function(t){return t(j(e))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}_(w,"defaultOptions",{divisions:768,note:{type:"pitch",step:"B",octave:4,notehead:"slash"}}),_(w,"sequenceAttributes",["divisions","key","time","staves","part-symbol","instruments","clef","staff-details","transpose","directive","measure-style"]),_(w,"sequenceNote",["pitch","rest","unpitched","duration","voice","type","dot","accidental","time-modification","stem","notehead","notehead-text","staff","beam","notations","lyric","play"]),_(w,"sequenceBarline",["bar-style","footnote","level","wavy-line","segno","coda","fermata","ending","repeat"]),_(w,"mapAlter",{"#":1,b:-1}),_(w,"mapFifthsToAlters",{0:[],1:["F"],2:["F","C"],3:["F","C","G"],4:["F","C","G","D"],5:["F","C","G","D","A"],6:["F","C","G","D","A","E"],7:["F","C","G","D","A","E","B"],"-1":["B"],"-2":["B","E"],"-3":["B","E","A"],"-4":["B","E","A","D"],"-5":["B","E","A","D","G"],"-6":["B","E","A","D","G","C"],"-7":["B","E","A","D","G","C","F"]}),_(w,"mapRepeats",["D.C. al Coda","D.C. al Fine","D.C. al 1st End.","D.C. al 2nd End.","D.C. al 3rd End.","D.S. al Coda","D.S. al Fine","D.S. al 1st End.","D.S. al 2nd End.","D.S. al 3rd End.","Fine","3x","4x","4x","6x","7x","8x"]),_(w,"Measure",function(){function t(e){y(this,t),this.body={_name:"measure",_attrs:{number:e},_content:[]},this.attributes=[],this.chords=[],this.barlines=[],this.barEnding=0}return b(t,[{key:"number",value:function(){return this.body._attrs.number}},{key:"assemble",value:function(){var t=this;return this.attributes.length&&this.body._content.push({attributes:w.reorderSequence(this.attributes,w.sequenceAttributes)}),this.chords.forEach((function(e){t.body._content.push({harmony:e.harmony},{note:e.note})})),this.barlines[0]._content=w.reorderSequence(this.barlines[0]._content,w.sequenceBarline),this.body._content.splice(1,0,this.barlines[0]),this.barlines[1]._content=w.reorderSequence(this.barlines[1]._content,w.sequenceBarline),this.body._content.push(this.barlines[1]),this.body}}]),t}()),n(666)},308:function(t,e){var n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(r="function"==typeof(n=function(t){"use strict";function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.toXML=void 0;var s="boolean",c="date",u="special-object",l=["_selfCloseTag","_attrs"],d=new RegExp(l.join("|"),"g"),h=function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").repeat(t)},f=function(t){return(Array.isArray(t)?"array":"object"===a(t)&&null!==t&&t._name&&u)||t instanceof Date&&c||null===t&&"null"||a(t)},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)return t;var n=new RegExp("(".concat(Object.keys(e).join("|"),")(?!(\\w|#)*;)"),"g");return String(t).replace(n,(function(t,n){return e[n]||""}))},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Array.isArray(t)?t.map((function(t){var n=Object.keys(t)[0],r=t[n],o=e?p(r,e):r,i=!0===o?"":'="'.concat(o,'"');return"".concat(n).concat(i)})):Object.keys(t).map((function(n){var r=e?p(t[n],e):t[n],o=!0===t[n]?"":'="'.concat(r,'"');return"".concat(n).concat(o)}))},v=function(){var t=m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0);if(0===t.length)return"";var e=t.join(" ");return" ".concat(e)},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map((function(e){return{_name:e,_content:t[e]}}))},g=["string","number",s],b=function(t){return g.includes(f(t))},_=[].concat(g,[c,u]),w=function(t){return _.includes(f(t))},k=function(t){return!t.match("<")},x=function(t){var e=t.header,n=t.indent,r=t.isOutputStart;if(!e||!r)return"";var o=a(e)===s;return"".concat(o?'<?xml version="1.0" encoding="UTF-8"?>':e).concat(n?"\n":"")},j={"<":"&lt;",">":"&gt;","&":"&amp;"},O=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.depth,c=void 0===i?0:i,u=r.indent,m=r._isFirstItem,g=r.header,_=r.attributesFilter,O=void 0===_?{}:_,M=r.filter,C=void 0===M?{}:M,E="boolean"!=typeof O||O?o(o(o({},j),{'"':"&quot;"}),O):{},S="boolean"!=typeof C||C?o(o({},j),C):{},L=h(u,c),A=f(n),T=w(n),D=0===c&&(T||!T&&m),P="";switch(A){case"special-object":var X=n._name,F=n._content;if(null===F){P=X;break}if(Array.isArray(F)&&F.every(b))return F.map((function(e){return t({_name:X,_content:e},o(o({},r),{},{depth:c}))})).join("");if(X.match(d))break;var R=t(F,o(o({},r),{},{depth:c+1})),U=f(R),I=k(R),G="".concat(u&&!D?"\n":"").concat(L),N="undefined"===U||""===R,V=a(n._selfCloseTag)===s?N&&n._selfCloseTag:N,W=V?"/":"",q=v(n._attrs,E),B="<".concat(X).concat(q).concat(W,">"),z=u&&!I?"\n".concat(L):"",Z=V?"":"".concat(R).concat(z,"</").concat(X,">");P="".concat(G).concat(B).concat(Z);break;case"object":var Y=Object.keys(n),K=Y.map((function(i,a){var s=o(o({},r),{},{_isFirstItem:0===a,_isLastItem:a+1===Y.length}),c={_name:i};if("object"===f(n[i])&&(l.forEach((function(t){var e=n[i][t];void 0!==e&&(c[t]=e,delete n[i][t])})),void 0!==n[i]._content&&Object.keys(n[i]).length>1)){var u=Object.assign({},n[i]);delete u._content,c._content=[].concat(e(y(u)),[n[i]._content])}return void 0===c._content&&(c._content=n[i]),t(c,s,i)}),r),$=u&&0===c?"\n":"";P=K.join($);break;case"function":var J=n(r);P=t(J,r);break;case"array":var Q=n.map((function(e,i){var a=o(o({},r),{},{_isFirstItem:0===i,_isLastItem:i+1===n.length});return t(e,a)})),H=u&&0===c?"\n":"";P=Q.join(H);break;default:P=p(n,S)}var tt=x({header:g,indent:u,depth:c,isOutputStart:D});return"".concat(tt).concat(P)};t.toXML=O;var M={toXML:O};t.default=M})?n.apply(e,[e]):n)||(t.exports=r)},259:(t,e,n)=>{"use strict";t.exports=n(159)},434:(t,e,n)=>{"use strict";var r=n(723);function o(){}var i=null,a={};function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,t!==o&&f(t,this)}function c(t,e){for(;3===t._V;)t=t._W;if(s._Y&&s._Y(t),0===t._V)return 0===t._U?(t._U=1,void(t._X=e)):1===t._U?(t._U=2,void(t._X=[t._X,e])):void t._X.push(e);!function(t,e){r((function(){var n=1===t._V?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return i=t,a}}(n,t._W);r===a?l(e.promise,i):u(e.promise,r)}else 1===t._V?u(e.promise,t._W):l(e.promise,t._W)}))}(t,e)}function u(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return i=t,a}}(e);if(n===a)return l(t,i);if(n===t.then&&e instanceof s)return t._V=3,t._W=e,void d(t);if("function"==typeof n)return void f(n.bind(e),t)}t._V=1,t._W=e,d(t)}function l(t,e){t._V=2,t._W=e,s._Z&&s._Z(t,e),d(t)}function d(t){if(1===t._U&&(c(t,t._X),t._X=null),2===t._U){for(var e=0;e<t._X.length;e++)c(t,t._X[e]);t._X=null}}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function f(t,e){var n=!1,r=function(t,r,o){try{t((function(t){n||(n=!0,u(e,t))}),(function(t){n||(n=!0,l(e,t))}))}catch(t){return i=t,a}}(t);n||r!==a||(n=!0,l(e,i))}t.exports=s,s._Y=null,s._Z=null,s._0=o,s.prototype.then=function(t,e){if(this.constructor!==s)return function(t,e,n){return new t.constructor((function(r,i){var a=new s(o);a.then(r,i),c(t,new h(e,n,a))}))}(this,t,e);var n=new s(o);return c(this,new h(t,e,n)),n}},445:(t,e,n)=>{"use strict";var r=n(434);t.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(t){setTimeout((function(){throw t}),0)}))}},803:(t,e,n)=>{"use strict";var r=n(434);t.exports=r;var o=l(!0),i=l(!1),a=l(null),s=l(void 0),c=l(0),u=l("");function l(t){var e=new r(r._0);return e._V=1,e._W=t,e}r.resolve=function(t){if(t instanceof r)return t;if(null===t)return a;if(void 0===t)return s;if(!0===t)return o;if(!1===t)return i;if(0===t)return c;if(""===t)return u;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(t){return new r((function(e,n){n(t)}))}return l(t)};var d=function(t){return"function"==typeof Array.from?(d=Array.from,Array.from(t)):(d=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};r.all=function(t){var e=d(t);return new r((function(t,n){if(0===e.length)return t([]);var o=e.length;function i(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._V;)s=s._W;return 1===s._V?i(a,s._W):(2===s._V&&n(s._W),void s.then((function(t){i(a,t)}),n))}var c=s.then;if("function"==typeof c)return void new r(c.bind(s)).then((function(t){i(a,t)}),n)}e[a]=s,0==--o&&t(e)}for(var a=0;a<e.length;a++)i(a,e[a])}))},r.reject=function(t){return new r((function(e,n){n(t)}))},r.race=function(t){return new r((function(e,n){d(t).forEach((function(t){r.resolve(t).then(e,n)}))}))},r.prototype.catch=function(t){return this.then(null,t)}},29:(t,e,n)=>{"use strict";var r=n(434);t.exports=r,r.prototype.finally=function(t){return this.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))}))}},159:(t,e,n)=>{"use strict";t.exports=n(434),n(445),n(29),n(803),n(490),n(690)},490:(t,e,n)=>{"use strict";var r=n(434),o=n(272);t.exports=r,r.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var n=[],o=0;o<e;o++)n.push("a"+o);var a=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([i]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],a)(r,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),n=[],o=0;o<e;o++)n.push("a"+o);var a=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+i+";","var res;","switch (argLength) {",n.concat(["extra"]).map((function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"})).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],a)(r,t)}(t)};var i="function (err, res) {if (err) { rj(err); } else { rs(res); }}";r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(t){if(null==n)return new r((function(e,n){n(t)}));o((function(){n.call(i,t)}))}}},r.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then((function(n){o((function(){t.call(e,null,n)}))}),(function(n){o((function(){t.call(e,n)}))}))}},690:(t,e,n)=>{"use strict";var r=n(434);t.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._V)return this._W.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._W},r.prototype.getReason=function(){if(3===this._V)return this._W.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._W},r.prototype.getState=function(){return 3===this._V?this._W.getState():-1===this._V||-2===this._V?0:this._V}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),a=new E(r||[]);return i._invoke=function(t,e,n){var r=d;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?p:h,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function v(){}function y(){}function g(){}var b={};b[i]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(S([])));w&&w!==n&&r.call(w,i)&&(b=w);var k=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function S(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return y.prototype=k.constructor=g,g.constructor=y,y.displayName=c(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},x(j.prototype),j.prototype[a]=function(){return this},t.AsyncIterator=j,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new j(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(k),c(k,s,"Generator"),k[i]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:S(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(875)})()}));